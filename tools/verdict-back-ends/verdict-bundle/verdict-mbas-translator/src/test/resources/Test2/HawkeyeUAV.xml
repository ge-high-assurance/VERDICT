<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<vdm_model:model
  xmlns:vdm_lustre="verdict::vdm::vdm_lustre"
  xmlns:vdm_model="verdict::vdm::vdm_model"
  xmlns:vdm_data="verdict::vdm::vdm_data">
  <dataflowCode>
    <vdm_lustre:typeDeclaration>
      <vdm_data:name>Movement</vdm_data:name>
      <vdm_data:definition>
        <vdm_data:enumType>
          <vdm_data:enumValue>Turn_Right</vdm_data:enumValue>
          <vdm_data:enumValue>Turn_Left</vdm_data:enumValue>
          <vdm_data:enumValue>Move_Forward</vdm_data:enumValue>
          <vdm_data:enumValue>Stop</vdm_data:enumValue>
        </vdm_data:enumType>
      </vdm_data:definition>
    </vdm_lustre:typeDeclaration>
    <vdm_lustre:typeDeclaration>
      <vdm_data:name>Direction</vdm_data:name>
      <vdm_data:definition>
        <vdm_data:enumType>
          <vdm_data:enumValue>North</vdm_data:enumValue>
          <vdm_data:enumValue>South</vdm_data:enumValue>
          <vdm_data:enumValue>East</vdm_data:enumValue>
          <vdm_data:enumValue>West</vdm_data:enumValue>
        </vdm_data:enumType>
      </vdm_data:definition>
    </vdm_lustre:typeDeclaration>
    <vdm_lustre:typeDeclaration>
      <vdm_data:name>Action</vdm_data:name>
      <vdm_data:definition>
        <vdm_data:enumType>
          <vdm_data:enumValue>Camera</vdm_data:enumValue>
          <vdm_data:enumValue>Weapon</vdm_data:enumValue>
          <vdm_data:enumValue>Land</vdm_data:enumValue>
          <vdm_data:enumValue>None</vdm_data:enumValue>
        </vdm_data:enumType>
      </vdm_data:definition>
    </vdm_lustre:typeDeclaration>
    <vdm_lustre:typeDeclaration>
      <vdm_data:name>Position</vdm_data:name>
      <vdm_data:definition>
        <vdm_data:recordType>
          <vdm_data:recordField>
            <vdm_data:name>x</vdm_data:name>
            <vdm_data:type>
              <vdm_data:plainType>int</vdm_data:plainType>
            </vdm_data:type>
          </vdm_data:recordField>
          <vdm_data:recordField>
            <vdm_data:name>y</vdm_data:name>
            <vdm_data:type>
              <vdm_data:plainType>int</vdm_data:plainType>
            </vdm_data:type>
          </vdm_data:recordField>
        </vdm_data:recordType>
      </vdm_data:definition>
    </vdm_lustre:typeDeclaration>
    <vdm_lustre:typeDeclaration>
      <vdm_data:name>TaskStatus</vdm_data:name>
      <vdm_data:definition>
        <vdm_data:enumType>
          <vdm_data:enumValue>Successful</vdm_data:enumValue>
          <vdm_data:enumValue>Aborted</vdm_data:enumValue>
          <vdm_data:enumValue>InProgress</vdm_data:enumValue>
          <vdm_data:enumValue>Started</vdm_data:enumValue>
        </vdm_data:enumType>
      </vdm_data:definition>
    </vdm_lustre:typeDeclaration>
    <vdm_lustre:typeDeclaration>
      <vdm_data:name>Task</vdm_data:name>
      <vdm_data:definition>
        <vdm_data:recordType>
          <vdm_data:recordField>
            <vdm_data:name>waypoint</vdm_data:name>
            <vdm_data:type>
              <vdm_data:userDefinedType>Position</vdm_data:userDefinedType>
            </vdm_data:type>
          </vdm_data:recordField>
          <vdm_data:recordField>
            <vdm_data:name>action</vdm_data:name>
            <vdm_data:type>
              <vdm_data:userDefinedType>Action</vdm_data:userDefinedType>
            </vdm_data:type>
          </vdm_data:recordField>
          <vdm_data:recordField>
            <vdm_data:name>status</vdm_data:name>
            <vdm_data:type>
              <vdm_data:userDefinedType>TaskStatus</vdm_data:userDefinedType>
            </vdm_data:type>
          </vdm_data:recordField>
        </vdm_data:recordType>
      </vdm_data:definition>
    </vdm_lustre:typeDeclaration>
    <vdm_lustre:typeDeclaration>
      <vdm_data:name>MotorCommand</vdm_data:name>
      <vdm_data:definition>
        <vdm_data:enumType>
          <vdm_data:enumValue>IncreaseX</vdm_data:enumValue>
          <vdm_data:enumValue>DecreaseX</vdm_data:enumValue>
          <vdm_data:enumValue>IncreaseY</vdm_data:enumValue>
          <vdm_data:enumValue>DecreaseY</vdm_data:enumValue>
          <vdm_data:enumValue>IncreaseYaw</vdm_data:enumValue>
          <vdm_data:enumValue>DecreaseYaw</vdm_data:enumValue>
          <vdm_data:enumValue>NoChange</vdm_data:enumValue>
        </vdm_data:enumType>
      </vdm_data:definition>
    </vdm_lustre:typeDeclaration>
    <vdm_lustre:typeDeclaration>
      <vdm_data:name>UAVState</vdm_data:name>
      <vdm_data:definition>
        <vdm_data:enumType>
          <vdm_data:enumValue>s_RETURN_TO_LAUNCH</vdm_data:enumValue>
          <vdm_data:enumValue>s_AUTO_FLIGHT_MODE</vdm_data:enumValue>
          <vdm_data:enumValue>s_MANUAL_FLIGHT_MODE</vdm_data:enumValue>
        </vdm_data:enumType>
      </vdm_data:definition>
    </vdm_lustre:typeDeclaration>
    <vdm_lustre:typeDeclaration>
      <vdm_data:name>YawAngle</vdm_data:name>
      <vdm_data:definition>
        <vdm_data:enumType>
          <vdm_data:enumValue>Y_0</vdm_data:enumValue>
          <vdm_data:enumValue>Y_90</vdm_data:enumValue>
          <vdm_data:enumValue>Y_180</vdm_data:enumValue>
          <vdm_data:enumValue>Y_270</vdm_data:enumValue>
        </vdm_data:enumType>
      </vdm_data:definition>
    </vdm_lustre:typeDeclaration>
    <vdm_lustre:typeDeclaration>
      <vdm_data:name>Tasks</vdm_data:name>
      <vdm_data:definition>
        <vdm_data:recordType>
          <vdm_data:recordField>
            <vdm_data:name>task1</vdm_data:name>
            <vdm_data:type>
              <vdm_data:userDefinedType>Task</vdm_data:userDefinedType>
            </vdm_data:type>
          </vdm_data:recordField>
          <vdm_data:recordField>
            <vdm_data:name>task2</vdm_data:name>
            <vdm_data:type>
              <vdm_data:userDefinedType>Task</vdm_data:userDefinedType>
            </vdm_data:type>
          </vdm_data:recordField>
          <vdm_data:recordField>
            <vdm_data:name>task3</vdm_data:name>
            <vdm_data:type>
              <vdm_data:userDefinedType>Task</vdm_data:userDefinedType>
            </vdm_data:type>
          </vdm_data:recordField>
        </vdm_data:recordType>
      </vdm_data:definition>
    </vdm_lustre:typeDeclaration>
    <vdm_lustre:typeDeclaration>
      <vdm_data:name>ATE6Type</vdm_data:name>
      <vdm_data:definition>
        <vdm_data:enumType>
          <vdm_data:enumValue>RC_Abnormal</vdm_data:enumValue>
          <vdm_data:enumValue>RC_Normal</vdm_data:enumValue>
        </vdm_data:enumType>
      </vdm_data:definition>
    </vdm_lustre:typeDeclaration>
    <vdm_lustre:typeDeclaration>
      <vdm_data:name>ATE7Type</vdm_data:name>
      <vdm_data:definition>
        <vdm_data:enumType>
          <vdm_data:enumValue>Inadequate</vdm_data:enumValue>
          <vdm_data:enumValue>Adequate</vdm_data:enumValue>
        </vdm_data:enumType>
      </vdm_data:definition>
    </vdm_lustre:typeDeclaration>
    <vdm_lustre:typeDeclaration>
      <vdm_data:name>ComponentInstrumentation</vdm_data:name>
      <vdm_data:definition>
        <vdm_data:recordType>
          <vdm_data:recordField>
            <vdm_data:name>gps</vdm_data:name>
            <vdm_data:type>
              <vdm_data:plainType>bool</vdm_data:plainType>
            </vdm_data:type>
          </vdm_data:recordField>
          <vdm_data:recordField>
            <vdm_data:name>receiver</vdm_data:name>
            <vdm_data:type>
              <vdm_data:plainType>bool</vdm_data:plainType>
            </vdm_data:type>
          </vdm_data:recordField>
          <vdm_data:recordField>
            <vdm_data:name>navigator</vdm_data:name>
            <vdm_data:type>
              <vdm_data:plainType>bool</vdm_data:plainType>
            </vdm_data:type>
          </vdm_data:recordField>
        </vdm_data:recordType>
      </vdm_data:definition>
    </vdm_lustre:typeDeclaration>
    <vdm_lustre:constantDeclaration>
      <vdm_lustre:name>INITIAL_BATTERY_LEVEL</vdm_lustre:name>
      <vdm_lustre:definition>
        <vdm_lustre:intLiteral>100</vdm_lustre:intLiteral>
      </vdm_lustre:definition>
    </vdm_lustre:constantDeclaration>
    <vdm_lustre:constantDeclaration>
      <vdm_lustre:name>BATTERY_LEVEL_THRESHOLD</vdm_lustre:name>
      <vdm_lustre:definition>
        <vdm_lustre:intLiteral>20</vdm_lustre:intLiteral>
      </vdm_lustre:definition>
    </vdm_lustre:constantDeclaration>
    <vdm_lustre:constantDeclaration>
      <vdm_lustre:name>BATTERY_CONSUMPTION_LOWER_BOUND</vdm_lustre:name>
      <vdm_lustre:definition>
        <vdm_lustre:intLiteral>1</vdm_lustre:intLiteral>
      </vdm_lustre:definition>
    </vdm_lustre:constantDeclaration>
    <vdm_lustre:constantDeclaration>
      <vdm_lustre:name>BATTERY_CONSUMPTION_UPPER_BOUND</vdm_lustre:name>
      <vdm_lustre:definition>
        <vdm_lustre:intLiteral>4</vdm_lustre:intLiteral>
      </vdm_lustre:definition>
    </vdm_lustre:constantDeclaration>
    <vdm_lustre:constantDeclaration>
      <vdm_lustre:name>RC_RECEIVER_TOLERANCE_LEVEL</vdm_lustre:name>
      <vdm_lustre:definition>
        <vdm_lustre:intLiteral>1</vdm_lustre:intLiteral>
      </vdm_lustre:definition>
    </vdm_lustre:constantDeclaration>
    <vdm_lustre:constantDeclaration>
      <vdm_lustre:name>LAUNCH_POS</vdm_lustre:name>
      <vdm_lustre:definition>
        <vdm_lustre:recordLiteral
          vdm_lustre:recordType="Position">
          <vdm_lustre:fieldDefinition>
            <vdm_lustre:fieldIdentifier>x</vdm_lustre:fieldIdentifier>
            <vdm_lustre:fieldValue>
              <vdm_lustre:intLiteral>0</vdm_lustre:intLiteral>
            </vdm_lustre:fieldValue>
          </vdm_lustre:fieldDefinition>
          <vdm_lustre:fieldDefinition>
            <vdm_lustre:fieldIdentifier>y</vdm_lustre:fieldIdentifier>
            <vdm_lustre:fieldValue>
              <vdm_lustre:intLiteral>0</vdm_lustre:intLiteral>
            </vdm_lustre:fieldValue>
          </vdm_lustre:fieldDefinition>
        </vdm_lustre:recordLiteral>
      </vdm_lustre:definition>
    </vdm_lustre:constantDeclaration>
    <vdm_lustre:constantDeclaration>
      <vdm_lustre:name>LAUNCH_DIR</vdm_lustre:name>
      <vdm_lustre:definition>
        <vdm_lustre:identifier>North</vdm_lustre:identifier>
      </vdm_lustre:definition>
    </vdm_lustre:constantDeclaration>
    <vdm_lustre:constantDeclaration>
      <vdm_lustre:name>PILOT_TARGET_POSITION</vdm_lustre:name>
      <vdm_lustre:definition>
        <vdm_lustre:recordLiteral
          vdm_lustre:recordType="Position">
          <vdm_lustre:fieldDefinition>
            <vdm_lustre:fieldIdentifier>x</vdm_lustre:fieldIdentifier>
            <vdm_lustre:fieldValue>
              <vdm_lustre:negative>
                <vdm_lustre:intLiteral>2</vdm_lustre:intLiteral>
              </vdm_lustre:negative>
            </vdm_lustre:fieldValue>
          </vdm_lustre:fieldDefinition>
          <vdm_lustre:fieldDefinition>
            <vdm_lustre:fieldIdentifier>y</vdm_lustre:fieldIdentifier>
            <vdm_lustre:fieldValue>
              <vdm_lustre:intLiteral>2</vdm_lustre:intLiteral>
            </vdm_lustre:fieldValue>
          </vdm_lustre:fieldDefinition>
        </vdm_lustre:recordLiteral>
      </vdm_lustre:definition>
    </vdm_lustre:constantDeclaration>
    <vdm_lustre:constantDeclaration>
      <vdm_lustre:name>PILOT_FLIGHT_MODE</vdm_lustre:name>
      <vdm_lustre:definition>
        <vdm_lustre:identifier>s_AUTO_FLIGHT_MODE</vdm_lustre:identifier>
      </vdm_lustre:definition>
    </vdm_lustre:constantDeclaration>
    <vdm_lustre:nodeDeclaration>
      <vdm_lustre:name>duration</vdm_lustre:name>
      <vdm_lustre:inputParameter>
        <vdm_lustre:name>p</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:plainType>bool</vdm_data:plainType>
        </vdm_lustre:dataType>
      </vdm_lustre:inputParameter>
      <vdm_lustre:outputParameter>
        <vdm_lustre:name>r</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:plainType>int</vdm_data:plainType>
        </vdm_lustre:dataType>
      </vdm_lustre:outputParameter>
      <vdm_lustre:body>
        <vdm_lustre:equation>
          <vdm_lustre:lhs>
            <vdm_lustre:identifier>r</vdm_lustre:identifier>
          </vdm_lustre:lhs>
          <vdm_lustre:rhs>
            <vdm_lustre:arrow>
              <vdm_lustre:lhsOperand>
                <vdm_lustre:expressionList>
                  <vdm_lustre:expression>
                    <vdm_lustre:conditionalExpression>
                      <vdm_lustre:condition>
                        <vdm_lustre:not>
                          <vdm_lustre:identifier>p</vdm_lustre:identifier>
                        </vdm_lustre:not>
                      </vdm_lustre:condition>
                      <vdm_lustre:thenBranch>
                        <vdm_lustre:intLiteral>1</vdm_lustre:intLiteral>
                      </vdm_lustre:thenBranch>
                      <vdm_lustre:elseBranch>
                        <vdm_lustre:intLiteral>0</vdm_lustre:intLiteral>
                      </vdm_lustre:elseBranch>
                    </vdm_lustre:conditionalExpression>
                  </vdm_lustre:expression>
                </vdm_lustre:expressionList>
              </vdm_lustre:lhsOperand>
              <vdm_lustre:rhsOperand>
                <vdm_lustre:expressionList>
                  <vdm_lustre:expression>
                    <vdm_lustre:conditionalExpression>
                      <vdm_lustre:condition>
                        <vdm_lustre:not>
                          <vdm_lustre:identifier>p</vdm_lustre:identifier>
                        </vdm_lustre:not>
                      </vdm_lustre:condition>
                      <vdm_lustre:thenBranch>
                        <vdm_lustre:plus>
                          <vdm_lustre:lhsOperand>
                            <vdm_lustre:pre>
                              <vdm_lustre:identifier>r</vdm_lustre:identifier>
                            </vdm_lustre:pre>
                          </vdm_lustre:lhsOperand>
                          <vdm_lustre:rhsOperand>
                            <vdm_lustre:intLiteral>1</vdm_lustre:intLiteral>
                          </vdm_lustre:rhsOperand>
                        </vdm_lustre:plus>
                      </vdm_lustre:thenBranch>
                      <vdm_lustre:elseBranch>
                        <vdm_lustre:intLiteral>0</vdm_lustre:intLiteral>
                      </vdm_lustre:elseBranch>
                    </vdm_lustre:conditionalExpression>
                  </vdm_lustre:expression>
                </vdm_lustre:expressionList>
              </vdm_lustre:rhsOperand>
            </vdm_lustre:arrow>
          </vdm_lustre:rhs>
        </vdm_lustre:equation>
      </vdm_lustre:body>
    </vdm_lustre:nodeDeclaration>
    <vdm_lustre:nodeDeclaration>
      <vdm_lustre:name>is_equal</vdm_lustre:name>
      <vdm_lustre:inputParameter>
        <vdm_lustre:name>pos1</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>Position</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:inputParameter>
      <vdm_lustre:inputParameter>
        <vdm_lustre:name>pos2</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>Position</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:inputParameter>
      <vdm_lustre:outputParameter>
        <vdm_lustre:name>z</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:plainType>bool</vdm_data:plainType>
        </vdm_lustre:dataType>
      </vdm_lustre:outputParameter>
      <vdm_lustre:body>
        <vdm_lustre:equation>
          <vdm_lustre:lhs>
            <vdm_lustre:identifier>z</vdm_lustre:identifier>
          </vdm_lustre:lhs>
          <vdm_lustre:rhs>
            <vdm_lustre:recordProjection>
              <vdm_lustre:recordReference>
                <vdm_lustre:equal>
                  <vdm_lustre:lhsOperand>
                    <vdm_lustre:recordProjection>
                      <vdm_lustre:recordReference>
                        <vdm_lustre:and>
                          <vdm_lustre:lhsOperand>
                            <vdm_lustre:recordProjection>
                              <vdm_lustre:recordReference>
                                <vdm_lustre:equal>
                                  <vdm_lustre:lhsOperand>
                                    <vdm_lustre:recordProjection>
                                      <vdm_lustre:recordReference>
                                        <vdm_lustre:identifier>pos1</vdm_lustre:identifier>
                                      </vdm_lustre:recordReference>
                                      <vdm_lustre:fieldId>x</vdm_lustre:fieldId>
                                    </vdm_lustre:recordProjection>
                                  </vdm_lustre:lhsOperand>
                                  <vdm_lustre:rhsOperand>
                                    <vdm_lustre:identifier>pos2</vdm_lustre:identifier>
                                  </vdm_lustre:rhsOperand>
                                </vdm_lustre:equal>
                              </vdm_lustre:recordReference>
                              <vdm_lustre:fieldId>x</vdm_lustre:fieldId>
                            </vdm_lustre:recordProjection>
                          </vdm_lustre:lhsOperand>
                          <vdm_lustre:rhsOperand>
                            <vdm_lustre:identifier>pos1</vdm_lustre:identifier>
                          </vdm_lustre:rhsOperand>
                        </vdm_lustre:and>
                      </vdm_lustre:recordReference>
                      <vdm_lustre:fieldId>y</vdm_lustre:fieldId>
                    </vdm_lustre:recordProjection>
                  </vdm_lustre:lhsOperand>
                  <vdm_lustre:rhsOperand>
                    <vdm_lustre:identifier>pos2</vdm_lustre:identifier>
                  </vdm_lustre:rhsOperand>
                </vdm_lustre:equal>
              </vdm_lustre:recordReference>
              <vdm_lustre:fieldId>y</vdm_lustre:fieldId>
            </vdm_lustre:recordProjection>
          </vdm_lustre:rhs>
        </vdm_lustre:equation>
      </vdm_lustre:body>
    </vdm_lustre:nodeDeclaration>
    <vdm_lustre:nodeDeclaration>
      <vdm_lustre:name>yaw2dir</vdm_lustre:name>
      <vdm_lustre:inputParameter>
        <vdm_lustre:name>yaw</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>YawAngle</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:inputParameter>
      <vdm_lustre:outputParameter>
        <vdm_lustre:name>dir</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>Direction</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:outputParameter>
      <vdm_lustre:body>
        <vdm_lustre:equation>
          <vdm_lustre:lhs>
            <vdm_lustre:identifier>dir</vdm_lustre:identifier>
          </vdm_lustre:lhs>
          <vdm_lustre:rhs>
            <vdm_lustre:conditionalExpression>
              <vdm_lustre:condition>
                <vdm_lustre:equal>
                  <vdm_lustre:lhsOperand>
                    <vdm_lustre:identifier>yaw</vdm_lustre:identifier>
                  </vdm_lustre:lhsOperand>
                  <vdm_lustre:rhsOperand>
                    <vdm_lustre:identifier>Y_0</vdm_lustre:identifier>
                  </vdm_lustre:rhsOperand>
                </vdm_lustre:equal>
              </vdm_lustre:condition>
              <vdm_lustre:thenBranch>
                <vdm_lustre:identifier>North</vdm_lustre:identifier>
              </vdm_lustre:thenBranch>
              <vdm_lustre:elseBranch>
                <vdm_lustre:conditionalExpression>
                  <vdm_lustre:condition>
                    <vdm_lustre:equal>
                      <vdm_lustre:lhsOperand>
                        <vdm_lustre:identifier>yaw</vdm_lustre:identifier>
                      </vdm_lustre:lhsOperand>
                      <vdm_lustre:rhsOperand>
                        <vdm_lustre:identifier>Y_90</vdm_lustre:identifier>
                      </vdm_lustre:rhsOperand>
                    </vdm_lustre:equal>
                  </vdm_lustre:condition>
                  <vdm_lustre:thenBranch>
                    <vdm_lustre:identifier>East</vdm_lustre:identifier>
                  </vdm_lustre:thenBranch>
                  <vdm_lustre:elseBranch>
                    <vdm_lustre:conditionalExpression>
                      <vdm_lustre:condition>
                        <vdm_lustre:equal>
                          <vdm_lustre:lhsOperand>
                            <vdm_lustre:identifier>yaw</vdm_lustre:identifier>
                          </vdm_lustre:lhsOperand>
                          <vdm_lustre:rhsOperand>
                            <vdm_lustre:identifier>Y_180</vdm_lustre:identifier>
                          </vdm_lustre:rhsOperand>
                        </vdm_lustre:equal>
                      </vdm_lustre:condition>
                      <vdm_lustre:thenBranch>
                        <vdm_lustre:identifier>South</vdm_lustre:identifier>
                      </vdm_lustre:thenBranch>
                      <vdm_lustre:elseBranch>
                        <vdm_lustre:identifier>West</vdm_lustre:identifier>
                      </vdm_lustre:elseBranch>
                    </vdm_lustre:conditionalExpression>
                  </vdm_lustre:elseBranch>
                </vdm_lustre:conditionalExpression>
              </vdm_lustre:elseBranch>
            </vdm_lustre:conditionalExpression>
          </vdm_lustre:rhs>
        </vdm_lustre:equation>
      </vdm_lustre:body>
    </vdm_lustre:nodeDeclaration>
    <vdm_lustre:nodeDeclaration>
      <vdm_lustre:name>set_task_status</vdm_lustre:name>
      <vdm_lustre:inputParameter>
        <vdm_lustre:name>curr_task</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>Task</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:inputParameter>
      <vdm_lustre:inputParameter>
        <vdm_lustre:name>new_status</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>TaskStatus</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:inputParameter>
      <vdm_lustre:outputParameter>
        <vdm_lustre:name>new_task</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>Task</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:outputParameter>
      <vdm_lustre:body>
        <vdm_lustre:equation>
          <vdm_lustre:lhs>
            <vdm_lustre:identifier>new_task</vdm_lustre:identifier>
          </vdm_lustre:lhs>
          <vdm_lustre:rhs>
            <vdm_lustre:recordLiteral
              vdm_lustre:recordType="Task">
              <vdm_lustre:fieldDefinition>
                <vdm_lustre:fieldIdentifier>waypoint</vdm_lustre:fieldIdentifier>
                <vdm_lustre:fieldValue>
                  <vdm_lustre:recordProjection>
                    <vdm_lustre:recordReference>
                      <vdm_lustre:identifier>curr_task</vdm_lustre:identifier>
                    </vdm_lustre:recordReference>
                    <vdm_lustre:fieldId>waypoint</vdm_lustre:fieldId>
                  </vdm_lustre:recordProjection>
                </vdm_lustre:fieldValue>
              </vdm_lustre:fieldDefinition>
              <vdm_lustre:fieldDefinition>
                <vdm_lustre:fieldIdentifier>action</vdm_lustre:fieldIdentifier>
                <vdm_lustre:fieldValue>
                  <vdm_lustre:recordProjection>
                    <vdm_lustre:recordReference>
                      <vdm_lustre:identifier>curr_task</vdm_lustre:identifier>
                    </vdm_lustre:recordReference>
                    <vdm_lustre:fieldId>action</vdm_lustre:fieldId>
                  </vdm_lustre:recordProjection>
                </vdm_lustre:fieldValue>
              </vdm_lustre:fieldDefinition>
              <vdm_lustre:fieldDefinition>
                <vdm_lustre:fieldIdentifier>status</vdm_lustre:fieldIdentifier>
                <vdm_lustre:fieldValue>
                  <vdm_lustre:identifier>new_status</vdm_lustre:identifier>
                </vdm_lustre:fieldValue>
              </vdm_lustre:fieldDefinition>
            </vdm_lustre:recordLiteral>
          </vdm_lustre:rhs>
        </vdm_lustre:equation>
      </vdm_lustre:body>
    </vdm_lustre:nodeDeclaration>
    <vdm_lustre:nodeDeclaration>
      <vdm_lustre:name>sofar</vdm_lustre:name>
      <vdm_lustre:inputParameter>
        <vdm_lustre:name>a</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:plainType>bool</vdm_data:plainType>
        </vdm_lustre:dataType>
      </vdm_lustre:inputParameter>
      <vdm_lustre:outputParameter>
        <vdm_lustre:name>b</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:plainType>bool</vdm_data:plainType>
        </vdm_lustre:dataType>
      </vdm_lustre:outputParameter>
      <vdm_lustre:body>
        <vdm_lustre:equation>
          <vdm_lustre:lhs>
            <vdm_lustre:identifier>b</vdm_lustre:identifier>
          </vdm_lustre:lhs>
          <vdm_lustre:rhs>
            <vdm_lustre:arrow>
              <vdm_lustre:lhsOperand>
                <vdm_lustre:identifier>a</vdm_lustre:identifier>
              </vdm_lustre:lhsOperand>
              <vdm_lustre:rhsOperand>
                <vdm_lustre:expressionList>
                  <vdm_lustre:expression>
                    <vdm_lustre:and>
                      <vdm_lustre:lhsOperand>
                        <vdm_lustre:identifier>a</vdm_lustre:identifier>
                      </vdm_lustre:lhsOperand>
                      <vdm_lustre:rhsOperand>
                        <vdm_lustre:expressionList>
                          <vdm_lustre:expression>
                            <vdm_lustre:pre>
                              <vdm_lustre:identifier>b</vdm_lustre:identifier>
                            </vdm_lustre:pre>
                          </vdm_lustre:expression>
                        </vdm_lustre:expressionList>
                      </vdm_lustre:rhsOperand>
                    </vdm_lustre:and>
                  </vdm_lustre:expression>
                </vdm_lustre:expressionList>
              </vdm_lustre:rhsOperand>
            </vdm_lustre:arrow>
          </vdm_lustre:rhs>
        </vdm_lustre:equation>
      </vdm_lustre:body>
    </vdm_lustre:nodeDeclaration>
    <vdm_lustre:nodeDeclaration>
      <vdm_lustre:name>Channel_GPS2PosEst</vdm_lustre:name>
      <vdm_lustre:inputParameter>
        <vdm_lustre:name>is_instrumented</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>ComponentInstrumentation</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:inputParameter>
      <vdm_lustre:inputParameter>
        <vdm_lustre:name>in_pos</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>Position</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:inputParameter>
      <vdm_lustre:outputParameter>
        <vdm_lustre:name>out_pos</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>Position</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:outputParameter>
      <vdm_lustre:body>
        <vdm_lustre:equation>
          <vdm_lustre:lhs>
            <vdm_lustre:identifier>out_pos</vdm_lustre:identifier>
          </vdm_lustre:lhs>
          <vdm_lustre:rhs>
            <vdm_lustre:conditionalExpression>
              <vdm_lustre:condition>
                <vdm_lustre:expressionList>
                  <vdm_lustre:expression>
                    <vdm_lustre:recordProjection>
                      <vdm_lustre:recordReference>
                        <vdm_lustre:identifier>is_instrumented</vdm_lustre:identifier>
                      </vdm_lustre:recordReference>
                      <vdm_lustre:fieldId>gps</vdm_lustre:fieldId>
                    </vdm_lustre:recordProjection>
                  </vdm_lustre:expression>
                </vdm_lustre:expressionList>
              </vdm_lustre:condition>
              <vdm_lustre:thenBranch>
                <vdm_lustre:call
                  vdm_lustre:nodeId="choose_tampered_pos">
                  <vdm_lustre:argument>
                    <vdm_lustre:intLiteral>1</vdm_lustre:intLiteral>
                  </vdm_lustre:argument>
                </vdm_lustre:call>
              </vdm_lustre:thenBranch>
              <vdm_lustre:elseBranch>
                <vdm_lustre:identifier>in_pos</vdm_lustre:identifier>
              </vdm_lustre:elseBranch>
            </vdm_lustre:conditionalExpression>
          </vdm_lustre:rhs>
        </vdm_lustre:equation>
      </vdm_lustre:body>
    </vdm_lustre:nodeDeclaration>
    <vdm_lustre:nodeDeclaration>
      <vdm_lustre:name>Channel_ROC2Rcv</vdm_lustre:name>
      <vdm_lustre:inputParameter>
        <vdm_lustre:name>is_instrumented</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>ComponentInstrumentation</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:inputParameter>
      <vdm_lustre:inputParameter>
        <vdm_lustre:name>in_payloadCmd</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>Action</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:inputParameter>
      <vdm_lustre:inputParameter>
        <vdm_lustre:name>in_move</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>Movement</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:inputParameter>
      <vdm_lustre:outputParameter>
        <vdm_lustre:name>out_payloadCmd</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>Action</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:outputParameter>
      <vdm_lustre:outputParameter>
        <vdm_lustre:name>out_move</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>Movement</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:outputParameter>
      <vdm_lustre:body>
        <vdm_lustre:equation>
          <vdm_lustre:lhs>
            <vdm_lustre:identifier>out_payloadCmd</vdm_lustre:identifier>
          </vdm_lustre:lhs>
          <vdm_lustre:rhs>
            <vdm_lustre:conditionalExpression>
              <vdm_lustre:condition>
                <vdm_lustre:expressionList>
                  <vdm_lustre:expression>
                    <vdm_lustre:recordProjection>
                      <vdm_lustre:recordReference>
                        <vdm_lustre:identifier>is_instrumented</vdm_lustre:identifier>
                      </vdm_lustre:recordReference>
                      <vdm_lustre:fieldId>receiver</vdm_lustre:fieldId>
                    </vdm_lustre:recordProjection>
                  </vdm_lustre:expression>
                </vdm_lustre:expressionList>
              </vdm_lustre:condition>
              <vdm_lustre:thenBranch>
                <vdm_lustre:call
                  vdm_lustre:nodeId="choose_tampered_action">
                  <vdm_lustre:argument>
                    <vdm_lustre:intLiteral>2</vdm_lustre:intLiteral>
                  </vdm_lustre:argument>
                </vdm_lustre:call>
              </vdm_lustre:thenBranch>
              <vdm_lustre:elseBranch>
                <vdm_lustre:identifier>in_payloadCmd</vdm_lustre:identifier>
              </vdm_lustre:elseBranch>
            </vdm_lustre:conditionalExpression>
          </vdm_lustre:rhs>
        </vdm_lustre:equation>
        <vdm_lustre:equation>
          <vdm_lustre:lhs>
            <vdm_lustre:identifier>out_move</vdm_lustre:identifier>
          </vdm_lustre:lhs>
          <vdm_lustre:rhs>
            <vdm_lustre:conditionalExpression>
              <vdm_lustre:condition>
                <vdm_lustre:expressionList>
                  <vdm_lustre:expression>
                    <vdm_lustre:recordProjection>
                      <vdm_lustre:recordReference>
                        <vdm_lustre:identifier>is_instrumented</vdm_lustre:identifier>
                      </vdm_lustre:recordReference>
                      <vdm_lustre:fieldId>receiver</vdm_lustre:fieldId>
                    </vdm_lustre:recordProjection>
                  </vdm_lustre:expression>
                </vdm_lustre:expressionList>
              </vdm_lustre:condition>
              <vdm_lustre:thenBranch>
                <vdm_lustre:call
                  vdm_lustre:nodeId="choose_tampered_movement">
                  <vdm_lustre:argument>
                    <vdm_lustre:intLiteral>2</vdm_lustre:intLiteral>
                  </vdm_lustre:argument>
                </vdm_lustre:call>
              </vdm_lustre:thenBranch>
              <vdm_lustre:elseBranch>
                <vdm_lustre:identifier>in_move</vdm_lustre:identifier>
              </vdm_lustre:elseBranch>
            </vdm_lustre:conditionalExpression>
          </vdm_lustre:rhs>
        </vdm_lustre:equation>
      </vdm_lustre:body>
    </vdm_lustre:nodeDeclaration>
    <vdm_lustre:nodeDeclaration>
      <vdm_lustre:name>Encrypted_Channel_ROC2Rcv</vdm_lustre:name>
      <vdm_lustre:inputParameter>
        <vdm_lustre:name>is_instrumented</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>ComponentInstrumentation</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:inputParameter>
      <vdm_lustre:inputParameter>
        <vdm_lustre:name>in_payloadCmd</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>Action</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:inputParameter>
      <vdm_lustre:inputParameter>
        <vdm_lustre:name>in_move</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>Movement</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:inputParameter>
      <vdm_lustre:outputParameter>
        <vdm_lustre:name>out_payloadCmd</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>Action</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:outputParameter>
      <vdm_lustre:outputParameter>
        <vdm_lustre:name>out_move</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>Movement</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:outputParameter>
      <vdm_lustre:body>
        <vdm_lustre:equation>
          <vdm_lustre:lhs>
            <vdm_lustre:identifier>out_payloadCmd</vdm_lustre:identifier>
          </vdm_lustre:lhs>
          <vdm_lustre:rhs>
            <vdm_lustre:identifier>in_payloadCmd</vdm_lustre:identifier>
          </vdm_lustre:rhs>
        </vdm_lustre:equation>
        <vdm_lustre:equation>
          <vdm_lustre:lhs>
            <vdm_lustre:identifier>out_move</vdm_lustre:identifier>
          </vdm_lustre:lhs>
          <vdm_lustre:rhs>
            <vdm_lustre:identifier>in_move</vdm_lustre:identifier>
          </vdm_lustre:rhs>
        </vdm_lustre:equation>
      </vdm_lustre:body>
    </vdm_lustre:nodeDeclaration>
    <vdm_lustre:nodeDeclaration>
      <vdm_lustre:name>Channel_Nav2Mix</vdm_lustre:name>
      <vdm_lustre:inputParameter>
        <vdm_lustre:name>is_instrumented</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>ComponentInstrumentation</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:inputParameter>
      <vdm_lustre:inputParameter>
        <vdm_lustre:name>in_move</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>Movement</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:inputParameter>
      <vdm_lustre:outputParameter>
        <vdm_lustre:name>out_move</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>Movement</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:outputParameter>
      <vdm_lustre:body>
        <vdm_lustre:equation>
          <vdm_lustre:lhs>
            <vdm_lustre:identifier>out_move</vdm_lustre:identifier>
          </vdm_lustre:lhs>
          <vdm_lustre:rhs>
            <vdm_lustre:conditionalExpression>
              <vdm_lustre:condition>
                <vdm_lustre:expressionList>
                  <vdm_lustre:expression>
                    <vdm_lustre:recordProjection>
                      <vdm_lustre:recordReference>
                        <vdm_lustre:identifier>is_instrumented</vdm_lustre:identifier>
                      </vdm_lustre:recordReference>
                      <vdm_lustre:fieldId>navigator</vdm_lustre:fieldId>
                    </vdm_lustre:recordProjection>
                  </vdm_lustre:expression>
                </vdm_lustre:expressionList>
              </vdm_lustre:condition>
              <vdm_lustre:thenBranch>
                <vdm_lustre:call
                  vdm_lustre:nodeId="choose_tampered_movement">
                  <vdm_lustre:argument>
                    <vdm_lustre:intLiteral>1</vdm_lustre:intLiteral>
                  </vdm_lustre:argument>
                </vdm_lustre:call>
              </vdm_lustre:thenBranch>
              <vdm_lustre:elseBranch>
                <vdm_lustre:identifier>in_move</vdm_lustre:identifier>
              </vdm_lustre:elseBranch>
            </vdm_lustre:conditionalExpression>
          </vdm_lustre:rhs>
        </vdm_lustre:equation>
      </vdm_lustre:body>
    </vdm_lustre:nodeDeclaration>
    <vdm_lustre:nodeDeclaration>
      <vdm_lustre:name>Actuators</vdm_lustre:name>
      <vdm_lustre:inputParameter>
        <vdm_lustre:name>cmd</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>MotorCommand</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:inputParameter>
      <vdm_lustre:inputParameter>
        <vdm_lustre:name>payloadCmdFC</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>Action</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:inputParameter>
      <vdm_lustre:inputParameter>
        <vdm_lustre:name>mstate</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>UAVState</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:inputParameter>
      <vdm_lustre:inputParameter>
        <vdm_lustre:name>payloadCmdRC</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>Action</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:inputParameter>
      <vdm_lustre:outputParameter>
        <vdm_lustre:name>battery_level</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:plainType>int</vdm_data:plainType>
        </vdm_lustre:dataType>
      </vdm_lustre:outputParameter>
      <vdm_lustre:outputParameter>
        <vdm_lustre:name>payload_performed</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:plainType>bool</vdm_data:plainType>
        </vdm_lustre:dataType>
      </vdm_lustre:outputParameter>
      <vdm_lustre:body>
        <vdm_lustre:variableDeclaration>
          <vdm_lustre:name>prev_battery_level</vdm_lustre:name>
          <vdm_lustre:dataType>
            <vdm_data:plainType>int</vdm_data:plainType>
          </vdm_lustre:dataType>
        </vdm_lustre:variableDeclaration>
        <vdm_lustre:variableDeclaration>
          <vdm_lustre:name>battery4pos_consumed</vdm_lustre:name>
          <vdm_lustre:dataType>
            <vdm_data:plainType>bool</vdm_data:plainType>
          </vdm_lustre:dataType>
        </vdm_lustre:variableDeclaration>
        <vdm_lustre:variableDeclaration>
          <vdm_lustre:name>battery4dir_consumed</vdm_lustre:name>
          <vdm_lustre:dataType>
            <vdm_data:plainType>bool</vdm_data:plainType>
          </vdm_lustre:dataType>
        </vdm_lustre:variableDeclaration>
        <vdm_lustre:variableDeclaration>
          <vdm_lustre:name>battery4pay_consumed</vdm_lustre:name>
          <vdm_lustre:dataType>
            <vdm_data:plainType>bool</vdm_data:plainType>
          </vdm_lustre:dataType>
        </vdm_lustre:variableDeclaration>
        <vdm_lustre:variableDeclaration>
          <vdm_lustre:name>payloadCMD</vdm_lustre:name>
          <vdm_lustre:dataType>
            <vdm_data:userDefinedType>Action</vdm_data:userDefinedType>
          </vdm_lustre:dataType>
        </vdm_lustre:variableDeclaration>
        <vdm_lustre:equation>
          <vdm_lustre:lhs>
            <vdm_lustre:identifier>payloadCMD</vdm_lustre:identifier>
          </vdm_lustre:lhs>
          <vdm_lustre:rhs>
            <vdm_lustre:conditionalExpression>
              <vdm_lustre:condition>
                <vdm_lustre:equal>
                  <vdm_lustre:lhsOperand>
                    <vdm_lustre:identifier>mstate</vdm_lustre:identifier>
                  </vdm_lustre:lhsOperand>
                  <vdm_lustre:rhsOperand>
                    <vdm_lustre:identifier>s_MANUAL_FLIGHT_MODE</vdm_lustre:identifier>
                  </vdm_lustre:rhsOperand>
                </vdm_lustre:equal>
              </vdm_lustre:condition>
              <vdm_lustre:thenBranch>
                <vdm_lustre:identifier>payloadCmdRC</vdm_lustre:identifier>
              </vdm_lustre:thenBranch>
              <vdm_lustre:elseBranch>
                <vdm_lustre:identifier>payloadCmdFC</vdm_lustre:identifier>
              </vdm_lustre:elseBranch>
            </vdm_lustre:conditionalExpression>
          </vdm_lustre:rhs>
        </vdm_lustre:equation>
        <vdm_lustre:equation>
          <vdm_lustre:lhs>
            <vdm_lustre:identifier>prev_battery_level</vdm_lustre:identifier>
          </vdm_lustre:lhs>
          <vdm_lustre:rhs>
            <vdm_lustre:arrow>
              <vdm_lustre:lhsOperand>
                <vdm_lustre:identifier>INITIAL_BATTERY_LEVEL</vdm_lustre:identifier>
              </vdm_lustre:lhsOperand>
              <vdm_lustre:rhsOperand>
                <vdm_lustre:pre>
                  <vdm_lustre:identifier>battery_level</vdm_lustre:identifier>
                </vdm_lustre:pre>
              </vdm_lustre:rhsOperand>
            </vdm_lustre:arrow>
          </vdm_lustre:rhs>
        </vdm_lustre:equation>
        <vdm_lustre:equation>
          <vdm_lustre:lhs>
            <vdm_lustre:identifier>battery4pos_consumed</vdm_lustre:identifier>
          </vdm_lustre:lhs>
          <vdm_lustre:rhs>
            <vdm_lustre:equal>
              <vdm_lustre:lhsOperand>
                <vdm_lustre:equal>
                  <vdm_lustre:lhsOperand>
                    <vdm_lustre:equal>
                      <vdm_lustre:lhsOperand>
                        <vdm_lustre:equal>
                          <vdm_lustre:lhsOperand>
                            <vdm_lustre:equal>
                              <vdm_lustre:lhsOperand>
                                <vdm_lustre:identifier>cmd</vdm_lustre:identifier>
                              </vdm_lustre:lhsOperand>
                              <vdm_lustre:rhsOperand>
                                <vdm_lustre:or>
                                  <vdm_lustre:lhsOperand>
                                    <vdm_lustre:identifier>IncreaseY</vdm_lustre:identifier>
                                  </vdm_lustre:lhsOperand>
                                  <vdm_lustre:rhsOperand>
                                    <vdm_lustre:identifier>cmd</vdm_lustre:identifier>
                                  </vdm_lustre:rhsOperand>
                                </vdm_lustre:or>
                              </vdm_lustre:rhsOperand>
                            </vdm_lustre:equal>
                          </vdm_lustre:lhsOperand>
                          <vdm_lustre:rhsOperand>
                            <vdm_lustre:or>
                              <vdm_lustre:lhsOperand>
                                <vdm_lustre:identifier>IncreaseX</vdm_lustre:identifier>
                              </vdm_lustre:lhsOperand>
                              <vdm_lustre:rhsOperand>
                                <vdm_lustre:identifier>cmd</vdm_lustre:identifier>
                              </vdm_lustre:rhsOperand>
                            </vdm_lustre:or>
                          </vdm_lustre:rhsOperand>
                        </vdm_lustre:equal>
                      </vdm_lustre:lhsOperand>
                      <vdm_lustre:rhsOperand>
                        <vdm_lustre:or>
                          <vdm_lustre:lhsOperand>
                            <vdm_lustre:identifier>DecreaseY</vdm_lustre:identifier>
                          </vdm_lustre:lhsOperand>
                          <vdm_lustre:rhsOperand>
                            <vdm_lustre:identifier>cmd</vdm_lustre:identifier>
                          </vdm_lustre:rhsOperand>
                        </vdm_lustre:or>
                      </vdm_lustre:rhsOperand>
                    </vdm_lustre:equal>
                  </vdm_lustre:lhsOperand>
                  <vdm_lustre:rhsOperand>
                    <vdm_lustre:or>
                      <vdm_lustre:lhsOperand>
                        <vdm_lustre:identifier>DecreaseX</vdm_lustre:identifier>
                      </vdm_lustre:lhsOperand>
                      <vdm_lustre:rhsOperand>
                        <vdm_lustre:identifier>cmd</vdm_lustre:identifier>
                      </vdm_lustre:rhsOperand>
                    </vdm_lustre:or>
                  </vdm_lustre:rhsOperand>
                </vdm_lustre:equal>
              </vdm_lustre:lhsOperand>
              <vdm_lustre:rhsOperand>
                <vdm_lustre:identifier>NoChange</vdm_lustre:identifier>
              </vdm_lustre:rhsOperand>
            </vdm_lustre:equal>
          </vdm_lustre:rhs>
        </vdm_lustre:equation>
        <vdm_lustre:equation>
          <vdm_lustre:lhs>
            <vdm_lustre:identifier>battery4dir_consumed</vdm_lustre:identifier>
          </vdm_lustre:lhs>
          <vdm_lustre:rhs>
            <vdm_lustre:equal>
              <vdm_lustre:lhsOperand>
                <vdm_lustre:equal>
                  <vdm_lustre:lhsOperand>
                    <vdm_lustre:identifier>cmd</vdm_lustre:identifier>
                  </vdm_lustre:lhsOperand>
                  <vdm_lustre:rhsOperand>
                    <vdm_lustre:or>
                      <vdm_lustre:lhsOperand>
                        <vdm_lustre:identifier>IncreaseYaw</vdm_lustre:identifier>
                      </vdm_lustre:lhsOperand>
                      <vdm_lustre:rhsOperand>
                        <vdm_lustre:identifier>cmd</vdm_lustre:identifier>
                      </vdm_lustre:rhsOperand>
                    </vdm_lustre:or>
                  </vdm_lustre:rhsOperand>
                </vdm_lustre:equal>
              </vdm_lustre:lhsOperand>
              <vdm_lustre:rhsOperand>
                <vdm_lustre:identifier>DecreaseYaw</vdm_lustre:identifier>
              </vdm_lustre:rhsOperand>
            </vdm_lustre:equal>
          </vdm_lustre:rhs>
        </vdm_lustre:equation>
        <vdm_lustre:equation>
          <vdm_lustre:lhs>
            <vdm_lustre:identifier>battery4pay_consumed</vdm_lustre:identifier>
            <vdm_lustre:identifier>payload_performed</vdm_lustre:identifier>
          </vdm_lustre:lhs>
          <vdm_lustre:rhs>
            <vdm_lustre:conditionalExpression>
              <vdm_lustre:condition>
                <vdm_lustre:equal>
                  <vdm_lustre:lhsOperand>
                    <vdm_lustre:notEqual>
                      <vdm_lustre:lhsOperand>
                        <vdm_lustre:identifier>payloadCMD</vdm_lustre:identifier>
                      </vdm_lustre:lhsOperand>
                      <vdm_lustre:rhsOperand>
                        <vdm_lustre:and>
                          <vdm_lustre:lhsOperand>
                            <vdm_lustre:identifier>None</vdm_lustre:identifier>
                          </vdm_lustre:lhsOperand>
                          <vdm_lustre:rhsOperand>
                            <vdm_lustre:identifier>cmd</vdm_lustre:identifier>
                          </vdm_lustre:rhsOperand>
                        </vdm_lustre:and>
                      </vdm_lustre:rhsOperand>
                    </vdm_lustre:notEqual>
                  </vdm_lustre:lhsOperand>
                  <vdm_lustre:rhsOperand>
                    <vdm_lustre:identifier>NoChange</vdm_lustre:identifier>
                  </vdm_lustre:rhsOperand>
                </vdm_lustre:equal>
              </vdm_lustre:condition>
              <vdm_lustre:thenBranch>
                <vdm_lustre:expressionList>
                  <vdm_lustre:expression>
                    <vdm_lustre:boolLiteral>true</vdm_lustre:boolLiteral>
                  </vdm_lustre:expression>
                  <vdm_lustre:expression>
                    <vdm_lustre:boolLiteral>true</vdm_lustre:boolLiteral>
                  </vdm_lustre:expression>
                </vdm_lustre:expressionList>
              </vdm_lustre:thenBranch>
              <vdm_lustre:elseBranch>
                <vdm_lustre:expressionList>
                  <vdm_lustre:expression>
                    <vdm_lustre:boolLiteral>false</vdm_lustre:boolLiteral>
                  </vdm_lustre:expression>
                  <vdm_lustre:expression>
                    <vdm_lustre:boolLiteral>false</vdm_lustre:boolLiteral>
                  </vdm_lustre:expression>
                </vdm_lustre:expressionList>
              </vdm_lustre:elseBranch>
            </vdm_lustre:conditionalExpression>
          </vdm_lustre:rhs>
        </vdm_lustre:equation>
        <vdm_lustre:equation>
          <vdm_lustre:lhs>
            <vdm_lustre:identifier>battery_level</vdm_lustre:identifier>
          </vdm_lustre:lhs>
          <vdm_lustre:rhs>
            <vdm_lustre:conditionalExpression>
              <vdm_lustre:condition>
                <vdm_lustre:expressionList>
                  <vdm_lustre:expression>
                    <vdm_lustre:or>
                      <vdm_lustre:lhsOperand>
                        <vdm_lustre:or>
                          <vdm_lustre:lhsOperand>
                            <vdm_lustre:identifier>battery4pos_consumed</vdm_lustre:identifier>
                          </vdm_lustre:lhsOperand>
                          <vdm_lustre:rhsOperand>
                            <vdm_lustre:identifier>battery4dir_consumed</vdm_lustre:identifier>
                          </vdm_lustre:rhsOperand>
                        </vdm_lustre:or>
                      </vdm_lustre:lhsOperand>
                      <vdm_lustre:rhsOperand>
                        <vdm_lustre:identifier>battery4pay_consumed</vdm_lustre:identifier>
                      </vdm_lustre:rhsOperand>
                    </vdm_lustre:or>
                  </vdm_lustre:expression>
                </vdm_lustre:expressionList>
              </vdm_lustre:condition>
              <vdm_lustre:thenBranch>
                <vdm_lustre:minus>
                  <vdm_lustre:lhsOperand>
                    <vdm_lustre:identifier>prev_battery_level</vdm_lustre:identifier>
                  </vdm_lustre:lhsOperand>
                  <vdm_lustre:rhsOperand>
                    <vdm_lustre:call
                      vdm_lustre:nodeId="choose_battery_consumption" />
                  </vdm_lustre:rhsOperand>
                </vdm_lustre:minus>
              </vdm_lustre:thenBranch>
              <vdm_lustre:elseBranch>
                <vdm_lustre:identifier>prev_battery_level</vdm_lustre:identifier>
              </vdm_lustre:elseBranch>
            </vdm_lustre:conditionalExpression>
          </vdm_lustre:rhs>
        </vdm_lustre:equation>
      </vdm_lustre:body>
    </vdm_lustre:nodeDeclaration>
    <vdm_lustre:nodeDeclaration>
      <vdm_lustre:name>BatteryHealthCheck</vdm_lustre:name>
      <vdm_lustre:inputParameter>
        <vdm_lustre:name>battery_level</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:plainType>int</vdm_data:plainType>
        </vdm_lustre:dataType>
      </vdm_lustre:inputParameter>
      <vdm_lustre:outputParameter>
        <vdm_lustre:name>ATE7</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>ATE7Type</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:outputParameter>
      <vdm_lustre:body>
        <vdm_lustre:variableDeclaration>
          <vdm_lustre:name>next_ATE7</vdm_lustre:name>
          <vdm_lustre:dataType>
            <vdm_data:userDefinedType>ATE7Type</vdm_data:userDefinedType>
          </vdm_lustre:dataType>
        </vdm_lustre:variableDeclaration>
        <vdm_lustre:equation>
          <vdm_lustre:lhs>
            <vdm_lustre:identifier>ATE7</vdm_lustre:identifier>
          </vdm_lustre:lhs>
          <vdm_lustre:rhs>
            <vdm_lustre:arrow>
              <vdm_lustre:lhsOperand>
                <vdm_lustre:identifier>Adequate</vdm_lustre:identifier>
              </vdm_lustre:lhsOperand>
              <vdm_lustre:rhsOperand>
                <vdm_lustre:pre>
                  <vdm_lustre:identifier>next_ATE7</vdm_lustre:identifier>
                </vdm_lustre:pre>
              </vdm_lustre:rhsOperand>
            </vdm_lustre:arrow>
          </vdm_lustre:rhs>
        </vdm_lustre:equation>
        <vdm_lustre:equation>
          <vdm_lustre:lhs>
            <vdm_lustre:identifier>next_ATE7</vdm_lustre:identifier>
          </vdm_lustre:lhs>
          <vdm_lustre:rhs>
            <vdm_lustre:conditionalExpression>
              <vdm_lustre:condition>
                <vdm_lustre:greaterThan>
                  <vdm_lustre:lhsOperand>
                    <vdm_lustre:identifier>battery_level</vdm_lustre:identifier>
                  </vdm_lustre:lhsOperand>
                  <vdm_lustre:rhsOperand>
                    <vdm_lustre:identifier>BATTERY_LEVEL_THRESHOLD</vdm_lustre:identifier>
                  </vdm_lustre:rhsOperand>
                </vdm_lustre:greaterThan>
              </vdm_lustre:condition>
              <vdm_lustre:thenBranch>
                <vdm_lustre:identifier>Adequate</vdm_lustre:identifier>
              </vdm_lustre:thenBranch>
              <vdm_lustre:elseBranch>
                <vdm_lustre:identifier>Inadequate</vdm_lustre:identifier>
              </vdm_lustre:elseBranch>
            </vdm_lustre:conditionalExpression>
          </vdm_lustre:rhs>
        </vdm_lustre:equation>
      </vdm_lustre:body>
    </vdm_lustre:nodeDeclaration>
    <vdm_lustre:nodeDeclaration>
      <vdm_lustre:name>FlightController</vdm_lustre:name>
      <vdm_lustre:inputParameter>
        <vdm_lustre:name>dest_reached</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:plainType>bool</vdm_data:plainType>
        </vdm_lustre:dataType>
      </vdm_lustre:inputParameter>
      <vdm_lustre:inputParameter>
        <vdm_lustre:name>payload_performed</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:plainType>bool</vdm_data:plainType>
        </vdm_lustre:dataType>
      </vdm_lustre:inputParameter>
      <vdm_lustre:inputParameter>
        <vdm_lustre:name>tasks</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>Tasks</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:inputParameter>
      <vdm_lustre:inputParameter>
        <vdm_lustre:name>mstate</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>UAVState</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:inputParameter>
      <vdm_lustre:outputParameter>
        <vdm_lustre:name>payloadCMD</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>Action</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:outputParameter>
      <vdm_lustre:outputParameter>
        <vdm_lustre:name>waypoint</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>Position</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:outputParameter>
      <vdm_lustre:body>
        <vdm_lustre:variableDeclaration>
          <vdm_lustre:name>task1</vdm_lustre:name>
          <vdm_lustre:dataType>
            <vdm_data:userDefinedType>Task</vdm_data:userDefinedType>
          </vdm_lustre:dataType>
        </vdm_lustre:variableDeclaration>
        <vdm_lustre:variableDeclaration>
          <vdm_lustre:name>task2</vdm_lustre:name>
          <vdm_lustre:dataType>
            <vdm_data:userDefinedType>Task</vdm_data:userDefinedType>
          </vdm_lustre:dataType>
        </vdm_lustre:variableDeclaration>
        <vdm_lustre:variableDeclaration>
          <vdm_lustre:name>task3</vdm_lustre:name>
          <vdm_lustre:dataType>
            <vdm_data:userDefinedType>Task</vdm_data:userDefinedType>
          </vdm_lustre:dataType>
        </vdm_lustre:variableDeclaration>
        <vdm_lustre:variableDeclaration>
          <vdm_lustre:name>upd_task1</vdm_lustre:name>
          <vdm_lustre:dataType>
            <vdm_data:userDefinedType>Task</vdm_data:userDefinedType>
          </vdm_lustre:dataType>
        </vdm_lustre:variableDeclaration>
        <vdm_lustre:variableDeclaration>
          <vdm_lustre:name>upd_task2</vdm_lustre:name>
          <vdm_lustre:dataType>
            <vdm_data:userDefinedType>Task</vdm_data:userDefinedType>
          </vdm_lustre:dataType>
        </vdm_lustre:variableDeclaration>
        <vdm_lustre:variableDeclaration>
          <vdm_lustre:name>upd_task3</vdm_lustre:name>
          <vdm_lustre:dataType>
            <vdm_data:userDefinedType>Task</vdm_data:userDefinedType>
          </vdm_lustre:dataType>
        </vdm_lustre:variableDeclaration>
        <vdm_lustre:variableDeclaration>
          <vdm_lustre:name>curr_dest_reached</vdm_lustre:name>
          <vdm_lustre:dataType>
            <vdm_data:plainType>bool</vdm_data:plainType>
          </vdm_lustre:dataType>
        </vdm_lustre:variableDeclaration>
        <vdm_lustre:variableDeclaration>
          <vdm_lustre:name>curr_payload_performed</vdm_lustre:name>
          <vdm_lustre:dataType>
            <vdm_data:plainType>bool</vdm_data:plainType>
          </vdm_lustre:dataType>
        </vdm_lustre:variableDeclaration>
        <vdm_lustre:equation>
          <vdm_lustre:lhs>
            <vdm_lustre:identifier>curr_dest_reached</vdm_lustre:identifier>
          </vdm_lustre:lhs>
          <vdm_lustre:rhs>
            <vdm_lustre:arrow>
              <vdm_lustre:lhsOperand>
                <vdm_lustre:boolLiteral>false</vdm_lustre:boolLiteral>
              </vdm_lustre:lhsOperand>
              <vdm_lustre:rhsOperand>
                <vdm_lustre:pre>
                  <vdm_lustre:identifier>dest_reached</vdm_lustre:identifier>
                </vdm_lustre:pre>
              </vdm_lustre:rhsOperand>
            </vdm_lustre:arrow>
          </vdm_lustre:rhs>
        </vdm_lustre:equation>
        <vdm_lustre:equation>
          <vdm_lustre:lhs>
            <vdm_lustre:identifier>curr_payload_performed</vdm_lustre:identifier>
          </vdm_lustre:lhs>
          <vdm_lustre:rhs>
            <vdm_lustre:arrow>
              <vdm_lustre:lhsOperand>
                <vdm_lustre:boolLiteral>false</vdm_lustre:boolLiteral>
              </vdm_lustre:lhsOperand>
              <vdm_lustre:rhsOperand>
                <vdm_lustre:pre>
                  <vdm_lustre:identifier>payload_performed</vdm_lustre:identifier>
                </vdm_lustre:pre>
              </vdm_lustre:rhsOperand>
            </vdm_lustre:arrow>
          </vdm_lustre:rhs>
        </vdm_lustre:equation>
        <vdm_lustre:equation>
          <vdm_lustre:lhs>
            <vdm_lustre:identifier>task1</vdm_lustre:identifier>
          </vdm_lustre:lhs>
          <vdm_lustre:rhs>
            <vdm_lustre:arrow>
              <vdm_lustre:lhsOperand>
                <vdm_lustre:recordProjection>
                  <vdm_lustre:recordReference>
                    <vdm_lustre:identifier>tasks</vdm_lustre:identifier>
                  </vdm_lustre:recordReference>
                  <vdm_lustre:fieldId>task1</vdm_lustre:fieldId>
                </vdm_lustre:recordProjection>
              </vdm_lustre:lhsOperand>
              <vdm_lustre:rhsOperand>
                <vdm_lustre:pre>
                  <vdm_lustre:identifier>upd_task1</vdm_lustre:identifier>
                </vdm_lustre:pre>
              </vdm_lustre:rhsOperand>
            </vdm_lustre:arrow>
          </vdm_lustre:rhs>
        </vdm_lustre:equation>
        <vdm_lustre:equation>
          <vdm_lustre:lhs>
            <vdm_lustre:identifier>task2</vdm_lustre:identifier>
          </vdm_lustre:lhs>
          <vdm_lustre:rhs>
            <vdm_lustre:arrow>
              <vdm_lustre:lhsOperand>
                <vdm_lustre:recordProjection>
                  <vdm_lustre:recordReference>
                    <vdm_lustre:identifier>tasks</vdm_lustre:identifier>
                  </vdm_lustre:recordReference>
                  <vdm_lustre:fieldId>task2</vdm_lustre:fieldId>
                </vdm_lustre:recordProjection>
              </vdm_lustre:lhsOperand>
              <vdm_lustre:rhsOperand>
                <vdm_lustre:pre>
                  <vdm_lustre:identifier>upd_task2</vdm_lustre:identifier>
                </vdm_lustre:pre>
              </vdm_lustre:rhsOperand>
            </vdm_lustre:arrow>
          </vdm_lustre:rhs>
        </vdm_lustre:equation>
        <vdm_lustre:equation>
          <vdm_lustre:lhs>
            <vdm_lustre:identifier>task3</vdm_lustre:identifier>
          </vdm_lustre:lhs>
          <vdm_lustre:rhs>
            <vdm_lustre:arrow>
              <vdm_lustre:lhsOperand>
                <vdm_lustre:recordProjection>
                  <vdm_lustre:recordReference>
                    <vdm_lustre:identifier>tasks</vdm_lustre:identifier>
                  </vdm_lustre:recordReference>
                  <vdm_lustre:fieldId>task3</vdm_lustre:fieldId>
                </vdm_lustre:recordProjection>
              </vdm_lustre:lhsOperand>
              <vdm_lustre:rhsOperand>
                <vdm_lustre:pre>
                  <vdm_lustre:identifier>upd_task3</vdm_lustre:identifier>
                </vdm_lustre:pre>
              </vdm_lustre:rhsOperand>
            </vdm_lustre:arrow>
          </vdm_lustre:rhs>
        </vdm_lustre:equation>
        <vdm_lustre:equation>
          <vdm_lustre:lhs>
            <vdm_lustre:identifier>payloadCMD</vdm_lustre:identifier>
          </vdm_lustre:lhs>
          <vdm_lustre:rhs>
            <vdm_lustre:conditionalExpression>
              <vdm_lustre:condition>
                <vdm_lustre:equal>
                  <vdm_lustre:lhsOperand>
                    <vdm_lustre:identifier>mstate</vdm_lustre:identifier>
                  </vdm_lustre:lhsOperand>
                  <vdm_lustre:rhsOperand>
                    <vdm_lustre:and>
                      <vdm_lustre:lhsOperand>
                        <vdm_lustre:and>
                          <vdm_lustre:lhsOperand>
                            <vdm_lustre:identifier>s_AUTO_FLIGHT_MODE</vdm_lustre:identifier>
                          </vdm_lustre:lhsOperand>
                          <vdm_lustre:rhsOperand>
                            <vdm_lustre:identifier>curr_dest_reached</vdm_lustre:identifier>
                          </vdm_lustre:rhsOperand>
                        </vdm_lustre:and>
                      </vdm_lustre:lhsOperand>
                      <vdm_lustre:rhsOperand>
                        <vdm_lustre:not>
                          <vdm_lustre:identifier>curr_payload_performed</vdm_lustre:identifier>
                        </vdm_lustre:not>
                      </vdm_lustre:rhsOperand>
                    </vdm_lustre:and>
                  </vdm_lustre:rhsOperand>
                </vdm_lustre:equal>
              </vdm_lustre:condition>
              <vdm_lustre:thenBranch>
                <vdm_lustre:expressionList>
                  <vdm_lustre:expression>
                    <vdm_lustre:conditionalExpression>
                      <vdm_lustre:condition>
                        <vdm_lustre:expressionList>
                          <vdm_lustre:expression>
                            <vdm_lustre:equal>
                              <vdm_lustre:lhsOperand>
                                <vdm_lustre:recordProjection>
                                  <vdm_lustre:recordReference>
                                    <vdm_lustre:equal>
                                      <vdm_lustre:lhsOperand>
                                        <vdm_lustre:recordProjection>
                                          <vdm_lustre:recordReference>
                                            <vdm_lustre:identifier>task1</vdm_lustre:identifier>
                                          </vdm_lustre:recordReference>
                                          <vdm_lustre:fieldId>status</vdm_lustre:fieldId>
                                        </vdm_lustre:recordProjection>
                                      </vdm_lustre:lhsOperand>
                                      <vdm_lustre:rhsOperand>
                                        <vdm_lustre:or>
                                          <vdm_lustre:lhsOperand>
                                            <vdm_lustre:identifier>Started</vdm_lustre:identifier>
                                          </vdm_lustre:lhsOperand>
                                          <vdm_lustre:rhsOperand>
                                            <vdm_lustre:identifier>task1</vdm_lustre:identifier>
                                          </vdm_lustre:rhsOperand>
                                        </vdm_lustre:or>
                                      </vdm_lustre:rhsOperand>
                                    </vdm_lustre:equal>
                                  </vdm_lustre:recordReference>
                                  <vdm_lustre:fieldId>status</vdm_lustre:fieldId>
                                </vdm_lustre:recordProjection>
                              </vdm_lustre:lhsOperand>
                              <vdm_lustre:rhsOperand>
                                <vdm_lustre:identifier>InProgress</vdm_lustre:identifier>
                              </vdm_lustre:rhsOperand>
                            </vdm_lustre:equal>
                          </vdm_lustre:expression>
                        </vdm_lustre:expressionList>
                      </vdm_lustre:condition>
                      <vdm_lustre:thenBranch>
                        <vdm_lustre:recordProjection>
                          <vdm_lustre:recordReference>
                            <vdm_lustre:identifier>task1</vdm_lustre:identifier>
                          </vdm_lustre:recordReference>
                          <vdm_lustre:fieldId>action</vdm_lustre:fieldId>
                        </vdm_lustre:recordProjection>
                      </vdm_lustre:thenBranch>
                      <vdm_lustre:elseBranch>
                        <vdm_lustre:conditionalExpression>
                          <vdm_lustre:condition>
                            <vdm_lustre:expressionList>
                              <vdm_lustre:expression>
                                <vdm_lustre:equal>
                                  <vdm_lustre:lhsOperand>
                                    <vdm_lustre:recordProjection>
                                      <vdm_lustre:recordReference>
                                        <vdm_lustre:identifier>task1</vdm_lustre:identifier>
                                      </vdm_lustre:recordReference>
                                      <vdm_lustre:fieldId>status</vdm_lustre:fieldId>
                                    </vdm_lustre:recordProjection>
                                  </vdm_lustre:lhsOperand>
                                  <vdm_lustre:rhsOperand>
                                    <vdm_lustre:and>
                                      <vdm_lustre:lhsOperand>
                                        <vdm_lustre:identifier>Successful</vdm_lustre:identifier>
                                      </vdm_lustre:lhsOperand>
                                      <vdm_lustre:rhsOperand>
                                        <vdm_lustre:expressionList>
                                          <vdm_lustre:expression>
                                            <vdm_lustre:equal>
                                              <vdm_lustre:lhsOperand>
                                                <vdm_lustre:recordProjection>
                                                  <vdm_lustre:recordReference>
                                                    <vdm_lustre:equal>
                                                      <vdm_lustre:lhsOperand>
                                                        <vdm_lustre:recordProjection>
                                                          <vdm_lustre:recordReference>
                                                            <vdm_lustre:identifier>task2</vdm_lustre:identifier>
                                                          </vdm_lustre:recordReference>
                                                          <vdm_lustre:fieldId>status</vdm_lustre:fieldId>
                                                        </vdm_lustre:recordProjection>
                                                      </vdm_lustre:lhsOperand>
                                                      <vdm_lustre:rhsOperand>
                                                        <vdm_lustre:or>
                                                          <vdm_lustre:lhsOperand>
                                                            <vdm_lustre:identifier>Started</vdm_lustre:identifier>
                                                          </vdm_lustre:lhsOperand>
                                                          <vdm_lustre:rhsOperand>
                                                            <vdm_lustre:identifier>task2</vdm_lustre:identifier>
                                                          </vdm_lustre:rhsOperand>
                                                        </vdm_lustre:or>
                                                      </vdm_lustre:rhsOperand>
                                                    </vdm_lustre:equal>
                                                  </vdm_lustre:recordReference>
                                                  <vdm_lustre:fieldId>status</vdm_lustre:fieldId>
                                                </vdm_lustre:recordProjection>
                                              </vdm_lustre:lhsOperand>
                                              <vdm_lustre:rhsOperand>
                                                <vdm_lustre:identifier>InProgress</vdm_lustre:identifier>
                                              </vdm_lustre:rhsOperand>
                                            </vdm_lustre:equal>
                                          </vdm_lustre:expression>
                                        </vdm_lustre:expressionList>
                                      </vdm_lustre:rhsOperand>
                                    </vdm_lustre:and>
                                  </vdm_lustre:rhsOperand>
                                </vdm_lustre:equal>
                              </vdm_lustre:expression>
                            </vdm_lustre:expressionList>
                          </vdm_lustre:condition>
                          <vdm_lustre:thenBranch>
                            <vdm_lustre:recordProjection>
                              <vdm_lustre:recordReference>
                                <vdm_lustre:identifier>task2</vdm_lustre:identifier>
                              </vdm_lustre:recordReference>
                              <vdm_lustre:fieldId>action</vdm_lustre:fieldId>
                            </vdm_lustre:recordProjection>
                          </vdm_lustre:thenBranch>
                          <vdm_lustre:elseBranch>
                            <vdm_lustre:conditionalExpression>
                              <vdm_lustre:condition>
                                <vdm_lustre:expressionList>
                                  <vdm_lustre:expression>
                                    <vdm_lustre:equal>
                                      <vdm_lustre:lhsOperand>
                                        <vdm_lustre:recordProjection>
                                          <vdm_lustre:recordReference>
                                            <vdm_lustre:equal>
                                              <vdm_lustre:lhsOperand>
                                                <vdm_lustre:recordProjection>
                                                  <vdm_lustre:recordReference>
                                                    <vdm_lustre:identifier>task1</vdm_lustre:identifier>
                                                  </vdm_lustre:recordReference>
                                                  <vdm_lustre:fieldId>status</vdm_lustre:fieldId>
                                                </vdm_lustre:recordProjection>
                                              </vdm_lustre:lhsOperand>
                                              <vdm_lustre:rhsOperand>
                                                <vdm_lustre:and>
                                                  <vdm_lustre:lhsOperand>
                                                    <vdm_lustre:identifier>Successful</vdm_lustre:identifier>
                                                  </vdm_lustre:lhsOperand>
                                                  <vdm_lustre:rhsOperand>
                                                    <vdm_lustre:identifier>task2</vdm_lustre:identifier>
                                                  </vdm_lustre:rhsOperand>
                                                </vdm_lustre:and>
                                              </vdm_lustre:rhsOperand>
                                            </vdm_lustre:equal>
                                          </vdm_lustre:recordReference>
                                          <vdm_lustre:fieldId>status</vdm_lustre:fieldId>
                                        </vdm_lustre:recordProjection>
                                      </vdm_lustre:lhsOperand>
                                      <vdm_lustre:rhsOperand>
                                        <vdm_lustre:and>
                                          <vdm_lustre:lhsOperand>
                                            <vdm_lustre:identifier>Successful</vdm_lustre:identifier>
                                          </vdm_lustre:lhsOperand>
                                          <vdm_lustre:rhsOperand>
                                            <vdm_lustre:expressionList>
                                              <vdm_lustre:expression>
                                                <vdm_lustre:equal>
                                                  <vdm_lustre:lhsOperand>
                                                    <vdm_lustre:recordProjection>
                                                      <vdm_lustre:recordReference>
                                                        <vdm_lustre:equal>
                                                          <vdm_lustre:lhsOperand>
                                                            <vdm_lustre:recordProjection>
                                                              <vdm_lustre:recordReference>
                                                                <vdm_lustre:identifier>task3</vdm_lustre:identifier>
                                                              </vdm_lustre:recordReference>
                                                              <vdm_lustre:fieldId>status</vdm_lustre:fieldId>
                                                            </vdm_lustre:recordProjection>
                                                          </vdm_lustre:lhsOperand>
                                                          <vdm_lustre:rhsOperand>
                                                            <vdm_lustre:or>
                                                              <vdm_lustre:lhsOperand>
                                                                <vdm_lustre:identifier>Started</vdm_lustre:identifier>
                                                              </vdm_lustre:lhsOperand>
                                                              <vdm_lustre:rhsOperand>
                                                                <vdm_lustre:identifier>task3</vdm_lustre:identifier>
                                                              </vdm_lustre:rhsOperand>
                                                            </vdm_lustre:or>
                                                          </vdm_lustre:rhsOperand>
                                                        </vdm_lustre:equal>
                                                      </vdm_lustre:recordReference>
                                                      <vdm_lustre:fieldId>status</vdm_lustre:fieldId>
                                                    </vdm_lustre:recordProjection>
                                                  </vdm_lustre:lhsOperand>
                                                  <vdm_lustre:rhsOperand>
                                                    <vdm_lustre:identifier>InProgress</vdm_lustre:identifier>
                                                  </vdm_lustre:rhsOperand>
                                                </vdm_lustre:equal>
                                              </vdm_lustre:expression>
                                            </vdm_lustre:expressionList>
                                          </vdm_lustre:rhsOperand>
                                        </vdm_lustre:and>
                                      </vdm_lustre:rhsOperand>
                                    </vdm_lustre:equal>
                                  </vdm_lustre:expression>
                                </vdm_lustre:expressionList>
                              </vdm_lustre:condition>
                              <vdm_lustre:thenBranch>
                                <vdm_lustre:recordProjection>
                                  <vdm_lustre:recordReference>
                                    <vdm_lustre:identifier>task3</vdm_lustre:identifier>
                                  </vdm_lustre:recordReference>
                                  <vdm_lustre:fieldId>action</vdm_lustre:fieldId>
                                </vdm_lustre:recordProjection>
                              </vdm_lustre:thenBranch>
                              <vdm_lustre:elseBranch>
                                <vdm_lustre:identifier>None</vdm_lustre:identifier>
                              </vdm_lustre:elseBranch>
                            </vdm_lustre:conditionalExpression>
                          </vdm_lustre:elseBranch>
                        </vdm_lustre:conditionalExpression>
                      </vdm_lustre:elseBranch>
                    </vdm_lustre:conditionalExpression>
                  </vdm_lustre:expression>
                </vdm_lustre:expressionList>
              </vdm_lustre:thenBranch>
              <vdm_lustre:elseBranch>
                <vdm_lustre:identifier>None</vdm_lustre:identifier>
              </vdm_lustre:elseBranch>
            </vdm_lustre:conditionalExpression>
          </vdm_lustre:rhs>
        </vdm_lustre:equation>
        <vdm_lustre:equation>
          <vdm_lustre:lhs>
            <vdm_lustre:identifier>waypoint</vdm_lustre:identifier>
            <vdm_lustre:identifier>upd_task1</vdm_lustre:identifier>
            <vdm_lustre:identifier>upd_task2</vdm_lustre:identifier>
            <vdm_lustre:identifier>upd_task3</vdm_lustre:identifier>
          </vdm_lustre:lhs>
          <vdm_lustre:rhs>
            <vdm_lustre:conditionalExpression>
              <vdm_lustre:condition>
                <vdm_lustre:equal>
                  <vdm_lustre:lhsOperand>
                    <vdm_lustre:recordProjection>
                      <vdm_lustre:recordReference>
                        <vdm_lustre:equal>
                          <vdm_lustre:lhsOperand>
                            <vdm_lustre:identifier>mstate</vdm_lustre:identifier>
                          </vdm_lustre:lhsOperand>
                          <vdm_lustre:rhsOperand>
                            <vdm_lustre:and>
                              <vdm_lustre:lhsOperand>
                                <vdm_lustre:identifier>s_AUTO_FLIGHT_MODE</vdm_lustre:identifier>
                              </vdm_lustre:lhsOperand>
                              <vdm_lustre:rhsOperand>
                                <vdm_lustre:identifier>task1</vdm_lustre:identifier>
                              </vdm_lustre:rhsOperand>
                            </vdm_lustre:and>
                          </vdm_lustre:rhsOperand>
                        </vdm_lustre:equal>
                      </vdm_lustre:recordReference>
                      <vdm_lustre:fieldId>status</vdm_lustre:fieldId>
                    </vdm_lustre:recordProjection>
                  </vdm_lustre:lhsOperand>
                  <vdm_lustre:rhsOperand>
                    <vdm_lustre:and>
                      <vdm_lustre:lhsOperand>
                        <vdm_lustre:identifier>Started</vdm_lustre:identifier>
                      </vdm_lustre:lhsOperand>
                      <vdm_lustre:rhsOperand>
                        <vdm_lustre:expressionList>
                          <vdm_lustre:expression>
                            <vdm_lustre:or>
                              <vdm_lustre:lhsOperand>
                                <vdm_lustre:not>
                                  <vdm_lustre:identifier>curr_dest_reached</vdm_lustre:identifier>
                                </vdm_lustre:not>
                              </vdm_lustre:lhsOperand>
                              <vdm_lustre:rhsOperand>
                                <vdm_lustre:not>
                                  <vdm_lustre:identifier>curr_payload_performed</vdm_lustre:identifier>
                                </vdm_lustre:not>
                              </vdm_lustre:rhsOperand>
                            </vdm_lustre:or>
                          </vdm_lustre:expression>
                        </vdm_lustre:expressionList>
                      </vdm_lustre:rhsOperand>
                    </vdm_lustre:and>
                  </vdm_lustre:rhsOperand>
                </vdm_lustre:equal>
              </vdm_lustre:condition>
              <vdm_lustre:thenBranch>
                <vdm_lustre:expressionList>
                  <vdm_lustre:expression>
                    <vdm_lustre:recordProjection>
                      <vdm_lustre:recordReference>
                        <vdm_lustre:identifier>task1</vdm_lustre:identifier>
                      </vdm_lustre:recordReference>
                      <vdm_lustre:fieldId>waypoint</vdm_lustre:fieldId>
                    </vdm_lustre:recordProjection>
                  </vdm_lustre:expression>
                  <vdm_lustre:expression>
                    <vdm_lustre:call
                      vdm_lustre:nodeId="set_task_status">
                      <vdm_lustre:argument>
                        <vdm_lustre:identifier>task1</vdm_lustre:identifier>
                      </vdm_lustre:argument>
                      <vdm_lustre:argument>
                        <vdm_lustre:identifier>InProgress</vdm_lustre:identifier>
                      </vdm_lustre:argument>
                    </vdm_lustre:call>
                  </vdm_lustre:expression>
                  <vdm_lustre:expression>
                    <vdm_lustre:identifier>task2</vdm_lustre:identifier>
                  </vdm_lustre:expression>
                  <vdm_lustre:expression>
                    <vdm_lustre:identifier>task3</vdm_lustre:identifier>
                  </vdm_lustre:expression>
                </vdm_lustre:expressionList>
              </vdm_lustre:thenBranch>
              <vdm_lustre:elseBranch>
                <vdm_lustre:conditionalExpression>
                  <vdm_lustre:condition>
                    <vdm_lustre:equal>
                      <vdm_lustre:lhsOperand>
                        <vdm_lustre:recordProjection>
                          <vdm_lustre:recordReference>
                            <vdm_lustre:equal>
                              <vdm_lustre:lhsOperand>
                                <vdm_lustre:identifier>mstate</vdm_lustre:identifier>
                              </vdm_lustre:lhsOperand>
                              <vdm_lustre:rhsOperand>
                                <vdm_lustre:and>
                                  <vdm_lustre:lhsOperand>
                                    <vdm_lustre:identifier>s_AUTO_FLIGHT_MODE</vdm_lustre:identifier>
                                  </vdm_lustre:lhsOperand>
                                  <vdm_lustre:rhsOperand>
                                    <vdm_lustre:identifier>task1</vdm_lustre:identifier>
                                  </vdm_lustre:rhsOperand>
                                </vdm_lustre:and>
                              </vdm_lustre:rhsOperand>
                            </vdm_lustre:equal>
                          </vdm_lustre:recordReference>
                          <vdm_lustre:fieldId>status</vdm_lustre:fieldId>
                        </vdm_lustre:recordProjection>
                      </vdm_lustre:lhsOperand>
                      <vdm_lustre:rhsOperand>
                        <vdm_lustre:and>
                          <vdm_lustre:lhsOperand>
                            <vdm_lustre:identifier>InProgress</vdm_lustre:identifier>
                          </vdm_lustre:lhsOperand>
                          <vdm_lustre:rhsOperand>
                            <vdm_lustre:expressionList>
                              <vdm_lustre:expression>
                                <vdm_lustre:or>
                                  <vdm_lustre:lhsOperand>
                                    <vdm_lustre:not>
                                      <vdm_lustre:identifier>curr_dest_reached</vdm_lustre:identifier>
                                    </vdm_lustre:not>
                                  </vdm_lustre:lhsOperand>
                                  <vdm_lustre:rhsOperand>
                                    <vdm_lustre:not>
                                      <vdm_lustre:identifier>curr_payload_performed</vdm_lustre:identifier>
                                    </vdm_lustre:not>
                                  </vdm_lustre:rhsOperand>
                                </vdm_lustre:or>
                              </vdm_lustre:expression>
                            </vdm_lustre:expressionList>
                          </vdm_lustre:rhsOperand>
                        </vdm_lustre:and>
                      </vdm_lustre:rhsOperand>
                    </vdm_lustre:equal>
                  </vdm_lustre:condition>
                  <vdm_lustre:thenBranch>
                    <vdm_lustre:expressionList>
                      <vdm_lustre:expression>
                        <vdm_lustre:recordProjection>
                          <vdm_lustre:recordReference>
                            <vdm_lustre:identifier>task1</vdm_lustre:identifier>
                          </vdm_lustre:recordReference>
                          <vdm_lustre:fieldId>waypoint</vdm_lustre:fieldId>
                        </vdm_lustre:recordProjection>
                      </vdm_lustre:expression>
                      <vdm_lustre:expression>
                        <vdm_lustre:identifier>task1</vdm_lustre:identifier>
                      </vdm_lustre:expression>
                      <vdm_lustre:expression>
                        <vdm_lustre:identifier>task2</vdm_lustre:identifier>
                      </vdm_lustre:expression>
                      <vdm_lustre:expression>
                        <vdm_lustre:identifier>task3</vdm_lustre:identifier>
                      </vdm_lustre:expression>
                    </vdm_lustre:expressionList>
                  </vdm_lustre:thenBranch>
                  <vdm_lustre:elseBranch>
                    <vdm_lustre:conditionalExpression>
                      <vdm_lustre:condition>
                        <vdm_lustre:equal>
                          <vdm_lustre:lhsOperand>
                            <vdm_lustre:recordProjection>
                              <vdm_lustre:recordReference>
                                <vdm_lustre:equal>
                                  <vdm_lustre:lhsOperand>
                                    <vdm_lustre:identifier>mstate</vdm_lustre:identifier>
                                  </vdm_lustre:lhsOperand>
                                  <vdm_lustre:rhsOperand>
                                    <vdm_lustre:and>
                                      <vdm_lustre:lhsOperand>
                                        <vdm_lustre:identifier>s_AUTO_FLIGHT_MODE</vdm_lustre:identifier>
                                      </vdm_lustre:lhsOperand>
                                      <vdm_lustre:rhsOperand>
                                        <vdm_lustre:identifier>task1</vdm_lustre:identifier>
                                      </vdm_lustre:rhsOperand>
                                    </vdm_lustre:and>
                                  </vdm_lustre:rhsOperand>
                                </vdm_lustre:equal>
                              </vdm_lustre:recordReference>
                              <vdm_lustre:fieldId>status</vdm_lustre:fieldId>
                            </vdm_lustre:recordProjection>
                          </vdm_lustre:lhsOperand>
                          <vdm_lustre:rhsOperand>
                            <vdm_lustre:and>
                              <vdm_lustre:lhsOperand>
                                <vdm_lustre:and>
                                  <vdm_lustre:lhsOperand>
                                    <vdm_lustre:identifier>InProgress</vdm_lustre:identifier>
                                  </vdm_lustre:lhsOperand>
                                  <vdm_lustre:rhsOperand>
                                    <vdm_lustre:identifier>curr_dest_reached</vdm_lustre:identifier>
                                  </vdm_lustre:rhsOperand>
                                </vdm_lustre:and>
                              </vdm_lustre:lhsOperand>
                              <vdm_lustre:rhsOperand>
                                <vdm_lustre:identifier>curr_payload_performed</vdm_lustre:identifier>
                              </vdm_lustre:rhsOperand>
                            </vdm_lustre:and>
                          </vdm_lustre:rhsOperand>
                        </vdm_lustre:equal>
                      </vdm_lustre:condition>
                      <vdm_lustre:thenBranch>
                        <vdm_lustre:expressionList>
                          <vdm_lustre:expression>
                            <vdm_lustre:recordProjection>
                              <vdm_lustre:recordReference>
                                <vdm_lustre:identifier>task1</vdm_lustre:identifier>
                              </vdm_lustre:recordReference>
                              <vdm_lustre:fieldId>waypoint</vdm_lustre:fieldId>
                            </vdm_lustre:recordProjection>
                          </vdm_lustre:expression>
                          <vdm_lustre:expression>
                            <vdm_lustre:call
                              vdm_lustre:nodeId="set_task_status">
                              <vdm_lustre:argument>
                                <vdm_lustre:identifier>task1</vdm_lustre:identifier>
                              </vdm_lustre:argument>
                              <vdm_lustre:argument>
                                <vdm_lustre:identifier>Successful</vdm_lustre:identifier>
                              </vdm_lustre:argument>
                            </vdm_lustre:call>
                          </vdm_lustre:expression>
                          <vdm_lustre:expression>
                            <vdm_lustre:identifier>task2</vdm_lustre:identifier>
                          </vdm_lustre:expression>
                          <vdm_lustre:expression>
                            <vdm_lustre:identifier>task3</vdm_lustre:identifier>
                          </vdm_lustre:expression>
                        </vdm_lustre:expressionList>
                      </vdm_lustre:thenBranch>
                      <vdm_lustre:elseBranch>
                        <vdm_lustre:conditionalExpression>
                          <vdm_lustre:condition>
                            <vdm_lustre:equal>
                              <vdm_lustre:lhsOperand>
                                <vdm_lustre:recordProjection>
                                  <vdm_lustre:recordReference>
                                    <vdm_lustre:equal>
                                      <vdm_lustre:lhsOperand>
                                        <vdm_lustre:identifier>mstate</vdm_lustre:identifier>
                                      </vdm_lustre:lhsOperand>
                                      <vdm_lustre:rhsOperand>
                                        <vdm_lustre:and>
                                          <vdm_lustre:lhsOperand>
                                            <vdm_lustre:identifier>s_AUTO_FLIGHT_MODE</vdm_lustre:identifier>
                                          </vdm_lustre:lhsOperand>
                                          <vdm_lustre:rhsOperand>
                                            <vdm_lustre:identifier>task1</vdm_lustre:identifier>
                                          </vdm_lustre:rhsOperand>
                                        </vdm_lustre:and>
                                      </vdm_lustre:rhsOperand>
                                    </vdm_lustre:equal>
                                  </vdm_lustre:recordReference>
                                  <vdm_lustre:fieldId>status</vdm_lustre:fieldId>
                                </vdm_lustre:recordProjection>
                              </vdm_lustre:lhsOperand>
                              <vdm_lustre:rhsOperand>
                                <vdm_lustre:and>
                                  <vdm_lustre:lhsOperand>
                                    <vdm_lustre:and>
                                      <vdm_lustre:lhsOperand>
                                        <vdm_lustre:identifier>InProgress</vdm_lustre:identifier>
                                      </vdm_lustre:lhsOperand>
                                      <vdm_lustre:rhsOperand>
                                        <vdm_lustre:identifier>curr_dest_reached</vdm_lustre:identifier>
                                      </vdm_lustre:rhsOperand>
                                    </vdm_lustre:and>
                                  </vdm_lustre:lhsOperand>
                                  <vdm_lustre:rhsOperand>
                                    <vdm_lustre:not>
                                      <vdm_lustre:identifier>curr_payload_performed</vdm_lustre:identifier>
                                    </vdm_lustre:not>
                                  </vdm_lustre:rhsOperand>
                                </vdm_lustre:and>
                              </vdm_lustre:rhsOperand>
                            </vdm_lustre:equal>
                          </vdm_lustre:condition>
                          <vdm_lustre:thenBranch>
                            <vdm_lustre:expressionList>
                              <vdm_lustre:expression>
                                <vdm_lustre:recordProjection>
                                  <vdm_lustre:recordReference>
                                    <vdm_lustre:identifier>task1</vdm_lustre:identifier>
                                  </vdm_lustre:recordReference>
                                  <vdm_lustre:fieldId>waypoint</vdm_lustre:fieldId>
                                </vdm_lustre:recordProjection>
                              </vdm_lustre:expression>
                              <vdm_lustre:expression>
                                <vdm_lustre:call
                                  vdm_lustre:nodeId="set_task_status">
                                  <vdm_lustre:argument>
                                    <vdm_lustre:identifier>task1</vdm_lustre:identifier>
                                  </vdm_lustre:argument>
                                  <vdm_lustre:argument>
                                    <vdm_lustre:identifier>Aborted</vdm_lustre:identifier>
                                  </vdm_lustre:argument>
                                </vdm_lustre:call>
                              </vdm_lustre:expression>
                              <vdm_lustre:expression>
                                <vdm_lustre:identifier>task2</vdm_lustre:identifier>
                              </vdm_lustre:expression>
                              <vdm_lustre:expression>
                                <vdm_lustre:identifier>task3</vdm_lustre:identifier>
                              </vdm_lustre:expression>
                            </vdm_lustre:expressionList>
                          </vdm_lustre:thenBranch>
                          <vdm_lustre:elseBranch>
                            <vdm_lustre:conditionalExpression>
                              <vdm_lustre:condition>
                                <vdm_lustre:equal>
                                  <vdm_lustre:lhsOperand>
                                    <vdm_lustre:recordProjection>
                                      <vdm_lustre:recordReference>
                                        <vdm_lustre:equal>
                                          <vdm_lustre:lhsOperand>
                                            <vdm_lustre:recordProjection>
                                              <vdm_lustre:recordReference>
                                                <vdm_lustre:equal>
                                                  <vdm_lustre:lhsOperand>
                                                    <vdm_lustre:identifier>mstate</vdm_lustre:identifier>
                                                  </vdm_lustre:lhsOperand>
                                                  <vdm_lustre:rhsOperand>
                                                    <vdm_lustre:and>
                                                      <vdm_lustre:lhsOperand>
                                                        <vdm_lustre:identifier>s_AUTO_FLIGHT_MODE</vdm_lustre:identifier>
                                                      </vdm_lustre:lhsOperand>
                                                      <vdm_lustre:rhsOperand>
                                                        <vdm_lustre:identifier>task1</vdm_lustre:identifier>
                                                      </vdm_lustre:rhsOperand>
                                                    </vdm_lustre:and>
                                                  </vdm_lustre:rhsOperand>
                                                </vdm_lustre:equal>
                                              </vdm_lustre:recordReference>
                                              <vdm_lustre:fieldId>status</vdm_lustre:fieldId>
                                            </vdm_lustre:recordProjection>
                                          </vdm_lustre:lhsOperand>
                                          <vdm_lustre:rhsOperand>
                                            <vdm_lustre:and>
                                              <vdm_lustre:lhsOperand>
                                                <vdm_lustre:identifier>Successful</vdm_lustre:identifier>
                                              </vdm_lustre:lhsOperand>
                                              <vdm_lustre:rhsOperand>
                                                <vdm_lustre:identifier>task2</vdm_lustre:identifier>
                                              </vdm_lustre:rhsOperand>
                                            </vdm_lustre:and>
                                          </vdm_lustre:rhsOperand>
                                        </vdm_lustre:equal>
                                      </vdm_lustre:recordReference>
                                      <vdm_lustre:fieldId>status</vdm_lustre:fieldId>
                                    </vdm_lustre:recordProjection>
                                  </vdm_lustre:lhsOperand>
                                  <vdm_lustre:rhsOperand>
                                    <vdm_lustre:and>
                                      <vdm_lustre:lhsOperand>
                                        <vdm_lustre:identifier>Started</vdm_lustre:identifier>
                                      </vdm_lustre:lhsOperand>
                                      <vdm_lustre:rhsOperand>
                                        <vdm_lustre:expressionList>
                                          <vdm_lustre:expression>
                                            <vdm_lustre:or>
                                              <vdm_lustre:lhsOperand>
                                                <vdm_lustre:not>
                                                  <vdm_lustre:identifier>curr_dest_reached</vdm_lustre:identifier>
                                                </vdm_lustre:not>
                                              </vdm_lustre:lhsOperand>
                                              <vdm_lustre:rhsOperand>
                                                <vdm_lustre:not>
                                                  <vdm_lustre:identifier>curr_payload_performed</vdm_lustre:identifier>
                                                </vdm_lustre:not>
                                              </vdm_lustre:rhsOperand>
                                            </vdm_lustre:or>
                                          </vdm_lustre:expression>
                                        </vdm_lustre:expressionList>
                                      </vdm_lustre:rhsOperand>
                                    </vdm_lustre:and>
                                  </vdm_lustre:rhsOperand>
                                </vdm_lustre:equal>
                              </vdm_lustre:condition>
                              <vdm_lustre:thenBranch>
                                <vdm_lustre:expressionList>
                                  <vdm_lustre:expression>
                                    <vdm_lustre:recordProjection>
                                      <vdm_lustre:recordReference>
                                        <vdm_lustre:identifier>task2</vdm_lustre:identifier>
                                      </vdm_lustre:recordReference>
                                      <vdm_lustre:fieldId>waypoint</vdm_lustre:fieldId>
                                    </vdm_lustre:recordProjection>
                                  </vdm_lustre:expression>
                                  <vdm_lustre:expression>
                                    <vdm_lustre:identifier>task1</vdm_lustre:identifier>
                                  </vdm_lustre:expression>
                                  <vdm_lustre:expression>
                                    <vdm_lustre:call
                                      vdm_lustre:nodeId="set_task_status">
                                      <vdm_lustre:argument>
                                        <vdm_lustre:identifier>task2</vdm_lustre:identifier>
                                      </vdm_lustre:argument>
                                      <vdm_lustre:argument>
                                        <vdm_lustre:identifier>InProgress</vdm_lustre:identifier>
                                      </vdm_lustre:argument>
                                    </vdm_lustre:call>
                                  </vdm_lustre:expression>
                                  <vdm_lustre:expression>
                                    <vdm_lustre:identifier>task3</vdm_lustre:identifier>
                                  </vdm_lustre:expression>
                                </vdm_lustre:expressionList>
                              </vdm_lustre:thenBranch>
                              <vdm_lustre:elseBranch>
                                <vdm_lustre:conditionalExpression>
                                  <vdm_lustre:condition>
                                    <vdm_lustre:equal>
                                      <vdm_lustre:lhsOperand>
                                        <vdm_lustre:recordProjection>
                                          <vdm_lustre:recordReference>
                                            <vdm_lustre:equal>
                                              <vdm_lustre:lhsOperand>
                                                <vdm_lustre:recordProjection>
                                                  <vdm_lustre:recordReference>
                                                    <vdm_lustre:equal>
                                                      <vdm_lustre:lhsOperand>
                                                        <vdm_lustre:identifier>mstate</vdm_lustre:identifier>
                                                      </vdm_lustre:lhsOperand>
                                                      <vdm_lustre:rhsOperand>
                                                        <vdm_lustre:and>
                                                          <vdm_lustre:lhsOperand>
                                                            <vdm_lustre:identifier>s_AUTO_FLIGHT_MODE</vdm_lustre:identifier>
                                                          </vdm_lustre:lhsOperand>
                                                          <vdm_lustre:rhsOperand>
                                                            <vdm_lustre:identifier>task1</vdm_lustre:identifier>
                                                          </vdm_lustre:rhsOperand>
                                                        </vdm_lustre:and>
                                                      </vdm_lustre:rhsOperand>
                                                    </vdm_lustre:equal>
                                                  </vdm_lustre:recordReference>
                                                  <vdm_lustre:fieldId>status</vdm_lustre:fieldId>
                                                </vdm_lustre:recordProjection>
                                              </vdm_lustre:lhsOperand>
                                              <vdm_lustre:rhsOperand>
                                                <vdm_lustre:and>
                                                  <vdm_lustre:lhsOperand>
                                                    <vdm_lustre:identifier>Successful</vdm_lustre:identifier>
                                                  </vdm_lustre:lhsOperand>
                                                  <vdm_lustre:rhsOperand>
                                                    <vdm_lustre:identifier>task2</vdm_lustre:identifier>
                                                  </vdm_lustre:rhsOperand>
                                                </vdm_lustre:and>
                                              </vdm_lustre:rhsOperand>
                                            </vdm_lustre:equal>
                                          </vdm_lustre:recordReference>
                                          <vdm_lustre:fieldId>status</vdm_lustre:fieldId>
                                        </vdm_lustre:recordProjection>
                                      </vdm_lustre:lhsOperand>
                                      <vdm_lustre:rhsOperand>
                                        <vdm_lustre:and>
                                          <vdm_lustre:lhsOperand>
                                            <vdm_lustre:identifier>InProgress</vdm_lustre:identifier>
                                          </vdm_lustre:lhsOperand>
                                          <vdm_lustre:rhsOperand>
                                            <vdm_lustre:expressionList>
                                              <vdm_lustre:expression>
                                                <vdm_lustre:or>
                                                  <vdm_lustre:lhsOperand>
                                                    <vdm_lustre:not>
                                                      <vdm_lustre:identifier>curr_dest_reached</vdm_lustre:identifier>
                                                    </vdm_lustre:not>
                                                  </vdm_lustre:lhsOperand>
                                                  <vdm_lustre:rhsOperand>
                                                    <vdm_lustre:not>
                                                      <vdm_lustre:identifier>curr_payload_performed</vdm_lustre:identifier>
                                                    </vdm_lustre:not>
                                                  </vdm_lustre:rhsOperand>
                                                </vdm_lustre:or>
                                              </vdm_lustre:expression>
                                            </vdm_lustre:expressionList>
                                          </vdm_lustre:rhsOperand>
                                        </vdm_lustre:and>
                                      </vdm_lustre:rhsOperand>
                                    </vdm_lustre:equal>
                                  </vdm_lustre:condition>
                                  <vdm_lustre:thenBranch>
                                    <vdm_lustre:expressionList>
                                      <vdm_lustre:expression>
                                        <vdm_lustre:recordProjection>
                                          <vdm_lustre:recordReference>
                                            <vdm_lustre:identifier>task2</vdm_lustre:identifier>
                                          </vdm_lustre:recordReference>
                                          <vdm_lustre:fieldId>waypoint</vdm_lustre:fieldId>
                                        </vdm_lustre:recordProjection>
                                      </vdm_lustre:expression>
                                      <vdm_lustre:expression>
                                        <vdm_lustre:identifier>task1</vdm_lustre:identifier>
                                      </vdm_lustre:expression>
                                      <vdm_lustre:expression>
                                        <vdm_lustre:identifier>task2</vdm_lustre:identifier>
                                      </vdm_lustre:expression>
                                      <vdm_lustre:expression>
                                        <vdm_lustre:identifier>task3</vdm_lustre:identifier>
                                      </vdm_lustre:expression>
                                    </vdm_lustre:expressionList>
                                  </vdm_lustre:thenBranch>
                                  <vdm_lustre:elseBranch>
                                    <vdm_lustre:conditionalExpression>
                                      <vdm_lustre:condition>
                                        <vdm_lustre:equal>
                                          <vdm_lustre:lhsOperand>
                                            <vdm_lustre:recordProjection>
                                              <vdm_lustre:recordReference>
                                                <vdm_lustre:equal>
                                                  <vdm_lustre:lhsOperand>
                                                    <vdm_lustre:recordProjection>
                                                      <vdm_lustre:recordReference>
                                                        <vdm_lustre:equal>
                                                          <vdm_lustre:lhsOperand>
                                                            <vdm_lustre:identifier>mstate</vdm_lustre:identifier>
                                                          </vdm_lustre:lhsOperand>
                                                          <vdm_lustre:rhsOperand>
                                                            <vdm_lustre:and>
                                                              <vdm_lustre:lhsOperand>
                                                                <vdm_lustre:identifier>s_AUTO_FLIGHT_MODE</vdm_lustre:identifier>
                                                              </vdm_lustre:lhsOperand>
                                                              <vdm_lustre:rhsOperand>
                                                                <vdm_lustre:identifier>task1</vdm_lustre:identifier>
                                                              </vdm_lustre:rhsOperand>
                                                            </vdm_lustre:and>
                                                          </vdm_lustre:rhsOperand>
                                                        </vdm_lustre:equal>
                                                      </vdm_lustre:recordReference>
                                                      <vdm_lustre:fieldId>status</vdm_lustre:fieldId>
                                                    </vdm_lustre:recordProjection>
                                                  </vdm_lustre:lhsOperand>
                                                  <vdm_lustre:rhsOperand>
                                                    <vdm_lustre:and>
                                                      <vdm_lustre:lhsOperand>
                                                        <vdm_lustre:identifier>Successful</vdm_lustre:identifier>
                                                      </vdm_lustre:lhsOperand>
                                                      <vdm_lustre:rhsOperand>
                                                        <vdm_lustre:identifier>task2</vdm_lustre:identifier>
                                                      </vdm_lustre:rhsOperand>
                                                    </vdm_lustre:and>
                                                  </vdm_lustre:rhsOperand>
                                                </vdm_lustre:equal>
                                              </vdm_lustre:recordReference>
                                              <vdm_lustre:fieldId>status</vdm_lustre:fieldId>
                                            </vdm_lustre:recordProjection>
                                          </vdm_lustre:lhsOperand>
                                          <vdm_lustre:rhsOperand>
                                            <vdm_lustre:and>
                                              <vdm_lustre:lhsOperand>
                                                <vdm_lustre:and>
                                                  <vdm_lustre:lhsOperand>
                                                    <vdm_lustre:identifier>InProgress</vdm_lustre:identifier>
                                                  </vdm_lustre:lhsOperand>
                                                  <vdm_lustre:rhsOperand>
                                                    <vdm_lustre:identifier>curr_dest_reached</vdm_lustre:identifier>
                                                  </vdm_lustre:rhsOperand>
                                                </vdm_lustre:and>
                                              </vdm_lustre:lhsOperand>
                                              <vdm_lustre:rhsOperand>
                                                <vdm_lustre:identifier>curr_payload_performed</vdm_lustre:identifier>
                                              </vdm_lustre:rhsOperand>
                                            </vdm_lustre:and>
                                          </vdm_lustre:rhsOperand>
                                        </vdm_lustre:equal>
                                      </vdm_lustre:condition>
                                      <vdm_lustre:thenBranch>
                                        <vdm_lustre:expressionList>
                                          <vdm_lustre:expression>
                                            <vdm_lustre:recordProjection>
                                              <vdm_lustre:recordReference>
                                                <vdm_lustre:identifier>task2</vdm_lustre:identifier>
                                              </vdm_lustre:recordReference>
                                              <vdm_lustre:fieldId>waypoint</vdm_lustre:fieldId>
                                            </vdm_lustre:recordProjection>
                                          </vdm_lustre:expression>
                                          <vdm_lustre:expression>
                                            <vdm_lustre:identifier>task1</vdm_lustre:identifier>
                                          </vdm_lustre:expression>
                                          <vdm_lustre:expression>
                                            <vdm_lustre:call
                                              vdm_lustre:nodeId="set_task_status">
                                              <vdm_lustre:argument>
                                                <vdm_lustre:identifier>task2</vdm_lustre:identifier>
                                              </vdm_lustre:argument>
                                              <vdm_lustre:argument>
                                                <vdm_lustre:identifier>Successful</vdm_lustre:identifier>
                                              </vdm_lustre:argument>
                                            </vdm_lustre:call>
                                          </vdm_lustre:expression>
                                          <vdm_lustre:expression>
                                            <vdm_lustre:identifier>task3</vdm_lustre:identifier>
                                          </vdm_lustre:expression>
                                        </vdm_lustre:expressionList>
                                      </vdm_lustre:thenBranch>
                                      <vdm_lustre:elseBranch>
                                        <vdm_lustre:conditionalExpression>
                                          <vdm_lustre:condition>
                                            <vdm_lustre:equal>
                                              <vdm_lustre:lhsOperand>
                                                <vdm_lustre:recordProjection>
                                                  <vdm_lustre:recordReference>
                                                    <vdm_lustre:equal>
                                                      <vdm_lustre:lhsOperand>
                                                        <vdm_lustre:recordProjection>
                                                          <vdm_lustre:recordReference>
                                                            <vdm_lustre:equal>
                                                              <vdm_lustre:lhsOperand>
                                                                <vdm_lustre:identifier>mstate</vdm_lustre:identifier>
                                                              </vdm_lustre:lhsOperand>
                                                              <vdm_lustre:rhsOperand>
                                                                <vdm_lustre:and>
                                                                  <vdm_lustre:lhsOperand>
                                                                    <vdm_lustre:identifier>s_AUTO_FLIGHT_MODE</vdm_lustre:identifier>
                                                                  </vdm_lustre:lhsOperand>
                                                                  <vdm_lustre:rhsOperand>
                                                                    <vdm_lustre:identifier>task1</vdm_lustre:identifier>
                                                                  </vdm_lustre:rhsOperand>
                                                                </vdm_lustre:and>
                                                              </vdm_lustre:rhsOperand>
                                                            </vdm_lustre:equal>
                                                          </vdm_lustre:recordReference>
                                                          <vdm_lustre:fieldId>status</vdm_lustre:fieldId>
                                                        </vdm_lustre:recordProjection>
                                                      </vdm_lustre:lhsOperand>
                                                      <vdm_lustre:rhsOperand>
                                                        <vdm_lustre:and>
                                                          <vdm_lustre:lhsOperand>
                                                            <vdm_lustre:identifier>Successful</vdm_lustre:identifier>
                                                          </vdm_lustre:lhsOperand>
                                                          <vdm_lustre:rhsOperand>
                                                            <vdm_lustre:identifier>task2</vdm_lustre:identifier>
                                                          </vdm_lustre:rhsOperand>
                                                        </vdm_lustre:and>
                                                      </vdm_lustre:rhsOperand>
                                                    </vdm_lustre:equal>
                                                  </vdm_lustre:recordReference>
                                                  <vdm_lustre:fieldId>status</vdm_lustre:fieldId>
                                                </vdm_lustre:recordProjection>
                                              </vdm_lustre:lhsOperand>
                                              <vdm_lustre:rhsOperand>
                                                <vdm_lustre:and>
                                                  <vdm_lustre:lhsOperand>
                                                    <vdm_lustre:and>
                                                      <vdm_lustre:lhsOperand>
                                                        <vdm_lustre:identifier>InProgress</vdm_lustre:identifier>
                                                      </vdm_lustre:lhsOperand>
                                                      <vdm_lustre:rhsOperand>
                                                        <vdm_lustre:identifier>curr_dest_reached</vdm_lustre:identifier>
                                                      </vdm_lustre:rhsOperand>
                                                    </vdm_lustre:and>
                                                  </vdm_lustre:lhsOperand>
                                                  <vdm_lustre:rhsOperand>
                                                    <vdm_lustre:not>
                                                      <vdm_lustre:identifier>curr_payload_performed</vdm_lustre:identifier>
                                                    </vdm_lustre:not>
                                                  </vdm_lustre:rhsOperand>
                                                </vdm_lustre:and>
                                              </vdm_lustre:rhsOperand>
                                            </vdm_lustre:equal>
                                          </vdm_lustre:condition>
                                          <vdm_lustre:thenBranch>
                                            <vdm_lustre:expressionList>
                                              <vdm_lustre:expression>
                                                <vdm_lustre:recordProjection>
                                                  <vdm_lustre:recordReference>
                                                    <vdm_lustre:identifier>task2</vdm_lustre:identifier>
                                                  </vdm_lustre:recordReference>
                                                  <vdm_lustre:fieldId>waypoint</vdm_lustre:fieldId>
                                                </vdm_lustre:recordProjection>
                                              </vdm_lustre:expression>
                                              <vdm_lustre:expression>
                                                <vdm_lustre:identifier>task1</vdm_lustre:identifier>
                                              </vdm_lustre:expression>
                                              <vdm_lustre:expression>
                                                <vdm_lustre:call
                                                  vdm_lustre:nodeId="set_task_status">
                                                  <vdm_lustre:argument>
                                                    <vdm_lustre:identifier>task2</vdm_lustre:identifier>
                                                  </vdm_lustre:argument>
                                                  <vdm_lustre:argument>
                                                    <vdm_lustre:identifier>Aborted</vdm_lustre:identifier>
                                                  </vdm_lustre:argument>
                                                </vdm_lustre:call>
                                              </vdm_lustre:expression>
                                              <vdm_lustre:expression>
                                                <vdm_lustre:identifier>task3</vdm_lustre:identifier>
                                              </vdm_lustre:expression>
                                            </vdm_lustre:expressionList>
                                          </vdm_lustre:thenBranch>
                                          <vdm_lustre:elseBranch>
                                            <vdm_lustre:conditionalExpression>
                                              <vdm_lustre:condition>
                                                <vdm_lustre:equal>
                                                  <vdm_lustre:lhsOperand>
                                                    <vdm_lustre:recordProjection>
                                                      <vdm_lustre:recordReference>
                                                        <vdm_lustre:equal>
                                                          <vdm_lustre:lhsOperand>
                                                            <vdm_lustre:recordProjection>
                                                              <vdm_lustre:recordReference>
                                                                <vdm_lustre:equal>
                                                                  <vdm_lustre:lhsOperand>
                                                                    <vdm_lustre:recordProjection>
                                                                      <vdm_lustre:recordReference>
                                                                        <vdm_lustre:equal>
                                                                          <vdm_lustre:lhsOperand>
                                                                            <vdm_lustre:identifier>mstate</vdm_lustre:identifier>
                                                                          </vdm_lustre:lhsOperand>
                                                                          <vdm_lustre:rhsOperand>
                                                                            <vdm_lustre:and>
                                                                              <vdm_lustre:lhsOperand>
                                                                                <vdm_lustre:identifier>s_AUTO_FLIGHT_MODE</vdm_lustre:identifier>
                                                                              </vdm_lustre:lhsOperand>
                                                                              <vdm_lustre:rhsOperand>
                                                                                <vdm_lustre:identifier>task1</vdm_lustre:identifier>
                                                                              </vdm_lustre:rhsOperand>
                                                                            </vdm_lustre:and>
                                                                          </vdm_lustre:rhsOperand>
                                                                        </vdm_lustre:equal>
                                                                      </vdm_lustre:recordReference>
                                                                      <vdm_lustre:fieldId>status</vdm_lustre:fieldId>
                                                                    </vdm_lustre:recordProjection>
                                                                  </vdm_lustre:lhsOperand>
                                                                  <vdm_lustre:rhsOperand>
                                                                    <vdm_lustre:and>
                                                                      <vdm_lustre:lhsOperand>
                                                                        <vdm_lustre:identifier>Successful</vdm_lustre:identifier>
                                                                      </vdm_lustre:lhsOperand>
                                                                      <vdm_lustre:rhsOperand>
                                                                        <vdm_lustre:identifier>task2</vdm_lustre:identifier>
                                                                      </vdm_lustre:rhsOperand>
                                                                    </vdm_lustre:and>
                                                                  </vdm_lustre:rhsOperand>
                                                                </vdm_lustre:equal>
                                                              </vdm_lustre:recordReference>
                                                              <vdm_lustre:fieldId>status</vdm_lustre:fieldId>
                                                            </vdm_lustre:recordProjection>
                                                          </vdm_lustre:lhsOperand>
                                                          <vdm_lustre:rhsOperand>
                                                            <vdm_lustre:and>
                                                              <vdm_lustre:lhsOperand>
                                                                <vdm_lustre:identifier>Successful</vdm_lustre:identifier>
                                                              </vdm_lustre:lhsOperand>
                                                              <vdm_lustre:rhsOperand>
                                                                <vdm_lustre:identifier>task3</vdm_lustre:identifier>
                                                              </vdm_lustre:rhsOperand>
                                                            </vdm_lustre:and>
                                                          </vdm_lustre:rhsOperand>
                                                        </vdm_lustre:equal>
                                                      </vdm_lustre:recordReference>
                                                      <vdm_lustre:fieldId>status</vdm_lustre:fieldId>
                                                    </vdm_lustre:recordProjection>
                                                  </vdm_lustre:lhsOperand>
                                                  <vdm_lustre:rhsOperand>
                                                    <vdm_lustre:and>
                                                      <vdm_lustre:lhsOperand>
                                                        <vdm_lustre:identifier>Started</vdm_lustre:identifier>
                                                      </vdm_lustre:lhsOperand>
                                                      <vdm_lustre:rhsOperand>
                                                        <vdm_lustre:expressionList>
                                                          <vdm_lustre:expression>
                                                            <vdm_lustre:or>
                                                              <vdm_lustre:lhsOperand>
                                                                <vdm_lustre:not>
                                                                  <vdm_lustre:identifier>curr_dest_reached</vdm_lustre:identifier>
                                                                </vdm_lustre:not>
                                                              </vdm_lustre:lhsOperand>
                                                              <vdm_lustre:rhsOperand>
                                                                <vdm_lustre:not>
                                                                  <vdm_lustre:identifier>curr_payload_performed</vdm_lustre:identifier>
                                                                </vdm_lustre:not>
                                                              </vdm_lustre:rhsOperand>
                                                            </vdm_lustre:or>
                                                          </vdm_lustre:expression>
                                                        </vdm_lustre:expressionList>
                                                      </vdm_lustre:rhsOperand>
                                                    </vdm_lustre:and>
                                                  </vdm_lustre:rhsOperand>
                                                </vdm_lustre:equal>
                                              </vdm_lustre:condition>
                                              <vdm_lustre:thenBranch>
                                                <vdm_lustre:expressionList>
                                                  <vdm_lustre:expression>
                                                    <vdm_lustre:recordProjection>
                                                      <vdm_lustre:recordReference>
                                                        <vdm_lustre:identifier>task3</vdm_lustre:identifier>
                                                      </vdm_lustre:recordReference>
                                                      <vdm_lustre:fieldId>waypoint</vdm_lustre:fieldId>
                                                    </vdm_lustre:recordProjection>
                                                  </vdm_lustre:expression>
                                                  <vdm_lustre:expression>
                                                    <vdm_lustre:identifier>task1</vdm_lustre:identifier>
                                                  </vdm_lustre:expression>
                                                  <vdm_lustre:expression>
                                                    <vdm_lustre:identifier>task2</vdm_lustre:identifier>
                                                  </vdm_lustre:expression>
                                                  <vdm_lustre:expression>
                                                    <vdm_lustre:call
                                                      vdm_lustre:nodeId="set_task_status">
                                                      <vdm_lustre:argument>
                                                        <vdm_lustre:identifier>task3</vdm_lustre:identifier>
                                                      </vdm_lustre:argument>
                                                      <vdm_lustre:argument>
                                                        <vdm_lustre:identifier>InProgress</vdm_lustre:identifier>
                                                      </vdm_lustre:argument>
                                                    </vdm_lustre:call>
                                                  </vdm_lustre:expression>
                                                </vdm_lustre:expressionList>
                                              </vdm_lustre:thenBranch>
                                              <vdm_lustre:elseBranch>
                                                <vdm_lustre:conditionalExpression>
                                                  <vdm_lustre:condition>
                                                    <vdm_lustre:equal>
                                                      <vdm_lustre:lhsOperand>
                                                        <vdm_lustre:recordProjection>
                                                          <vdm_lustre:recordReference>
                                                            <vdm_lustre:equal>
                                                              <vdm_lustre:lhsOperand>
                                                                <vdm_lustre:recordProjection>
                                                                  <vdm_lustre:recordReference>
                                                                    <vdm_lustre:equal>
                                                                      <vdm_lustre:lhsOperand>
                                                                        <vdm_lustre:recordProjection>
                                                                          <vdm_lustre:recordReference>
                                                                            <vdm_lustre:equal>
                                                                              <vdm_lustre:lhsOperand>
                                                                                <vdm_lustre:identifier>mstate</vdm_lustre:identifier>
                                                                              </vdm_lustre:lhsOperand>
                                                                              <vdm_lustre:rhsOperand>
                                                                                <vdm_lustre:and>
                                                                                  <vdm_lustre:lhsOperand>
                                                                                    <vdm_lustre:identifier>s_AUTO_FLIGHT_MODE</vdm_lustre:identifier>
                                                                                  </vdm_lustre:lhsOperand>
                                                                                  <vdm_lustre:rhsOperand>
                                                                                    <vdm_lustre:identifier>task1</vdm_lustre:identifier>
                                                                                  </vdm_lustre:rhsOperand>
                                                                                </vdm_lustre:and>
                                                                              </vdm_lustre:rhsOperand>
                                                                            </vdm_lustre:equal>
                                                                          </vdm_lustre:recordReference>
                                                                          <vdm_lustre:fieldId>status</vdm_lustre:fieldId>
                                                                        </vdm_lustre:recordProjection>
                                                                      </vdm_lustre:lhsOperand>
                                                                      <vdm_lustre:rhsOperand>
                                                                        <vdm_lustre:and>
                                                                          <vdm_lustre:lhsOperand>
                                                                            <vdm_lustre:identifier>Successful</vdm_lustre:identifier>
                                                                          </vdm_lustre:lhsOperand>
                                                                          <vdm_lustre:rhsOperand>
                                                                            <vdm_lustre:identifier>task2</vdm_lustre:identifier>
                                                                          </vdm_lustre:rhsOperand>
                                                                        </vdm_lustre:and>
                                                                      </vdm_lustre:rhsOperand>
                                                                    </vdm_lustre:equal>
                                                                  </vdm_lustre:recordReference>
                                                                  <vdm_lustre:fieldId>status</vdm_lustre:fieldId>
                                                                </vdm_lustre:recordProjection>
                                                              </vdm_lustre:lhsOperand>
                                                              <vdm_lustre:rhsOperand>
                                                                <vdm_lustre:and>
                                                                  <vdm_lustre:lhsOperand>
                                                                    <vdm_lustre:identifier>Successful</vdm_lustre:identifier>
                                                                  </vdm_lustre:lhsOperand>
                                                                  <vdm_lustre:rhsOperand>
                                                                    <vdm_lustre:identifier>task3</vdm_lustre:identifier>
                                                                  </vdm_lustre:rhsOperand>
                                                                </vdm_lustre:and>
                                                              </vdm_lustre:rhsOperand>
                                                            </vdm_lustre:equal>
                                                          </vdm_lustre:recordReference>
                                                          <vdm_lustre:fieldId>status</vdm_lustre:fieldId>
                                                        </vdm_lustre:recordProjection>
                                                      </vdm_lustre:lhsOperand>
                                                      <vdm_lustre:rhsOperand>
                                                        <vdm_lustre:and>
                                                          <vdm_lustre:lhsOperand>
                                                            <vdm_lustre:identifier>InProgress</vdm_lustre:identifier>
                                                          </vdm_lustre:lhsOperand>
                                                          <vdm_lustre:rhsOperand>
                                                            <vdm_lustre:expressionList>
                                                              <vdm_lustre:expression>
                                                                <vdm_lustre:or>
                                                                  <vdm_lustre:lhsOperand>
                                                                    <vdm_lustre:not>
                                                                      <vdm_lustre:identifier>curr_dest_reached</vdm_lustre:identifier>
                                                                    </vdm_lustre:not>
                                                                  </vdm_lustre:lhsOperand>
                                                                  <vdm_lustre:rhsOperand>
                                                                    <vdm_lustre:not>
                                                                      <vdm_lustre:identifier>curr_payload_performed</vdm_lustre:identifier>
                                                                    </vdm_lustre:not>
                                                                  </vdm_lustre:rhsOperand>
                                                                </vdm_lustre:or>
                                                              </vdm_lustre:expression>
                                                            </vdm_lustre:expressionList>
                                                          </vdm_lustre:rhsOperand>
                                                        </vdm_lustre:and>
                                                      </vdm_lustre:rhsOperand>
                                                    </vdm_lustre:equal>
                                                  </vdm_lustre:condition>
                                                  <vdm_lustre:thenBranch>
                                                    <vdm_lustre:expressionList>
                                                      <vdm_lustre:expression>
                                                        <vdm_lustre:recordProjection>
                                                          <vdm_lustre:recordReference>
                                                            <vdm_lustre:identifier>task3</vdm_lustre:identifier>
                                                          </vdm_lustre:recordReference>
                                                          <vdm_lustre:fieldId>waypoint</vdm_lustre:fieldId>
                                                        </vdm_lustre:recordProjection>
                                                      </vdm_lustre:expression>
                                                      <vdm_lustre:expression>
                                                        <vdm_lustre:identifier>task1</vdm_lustre:identifier>
                                                      </vdm_lustre:expression>
                                                      <vdm_lustre:expression>
                                                        <vdm_lustre:identifier>task2</vdm_lustre:identifier>
                                                      </vdm_lustre:expression>
                                                      <vdm_lustre:expression>
                                                        <vdm_lustre:identifier>task3</vdm_lustre:identifier>
                                                      </vdm_lustre:expression>
                                                    </vdm_lustre:expressionList>
                                                  </vdm_lustre:thenBranch>
                                                  <vdm_lustre:elseBranch>
                                                    <vdm_lustre:conditionalExpression>
                                                      <vdm_lustre:condition>
                                                        <vdm_lustre:equal>
                                                          <vdm_lustre:lhsOperand>
                                                            <vdm_lustre:recordProjection>
                                                              <vdm_lustre:recordReference>
                                                                <vdm_lustre:equal>
                                                                  <vdm_lustre:lhsOperand>
                                                                    <vdm_lustre:recordProjection>
                                                                      <vdm_lustre:recordReference>
                                                                        <vdm_lustre:equal>
                                                                          <vdm_lustre:lhsOperand>
                                                                            <vdm_lustre:recordProjection>
                                                                              <vdm_lustre:recordReference>
                                                                                <vdm_lustre:equal>
                                                                                  <vdm_lustre:lhsOperand>
                                                                                    <vdm_lustre:identifier>mstate</vdm_lustre:identifier>
                                                                                  </vdm_lustre:lhsOperand>
                                                                                  <vdm_lustre:rhsOperand>
                                                                                    <vdm_lustre:and>
                                                                                      <vdm_lustre:lhsOperand>
                                                                                        <vdm_lustre:identifier>s_AUTO_FLIGHT_MODE</vdm_lustre:identifier>
                                                                                      </vdm_lustre:lhsOperand>
                                                                                      <vdm_lustre:rhsOperand>
                                                                                        <vdm_lustre:identifier>task1</vdm_lustre:identifier>
                                                                                      </vdm_lustre:rhsOperand>
                                                                                    </vdm_lustre:and>
                                                                                  </vdm_lustre:rhsOperand>
                                                                                </vdm_lustre:equal>
                                                                              </vdm_lustre:recordReference>
                                                                              <vdm_lustre:fieldId>status</vdm_lustre:fieldId>
                                                                            </vdm_lustre:recordProjection>
                                                                          </vdm_lustre:lhsOperand>
                                                                          <vdm_lustre:rhsOperand>
                                                                            <vdm_lustre:and>
                                                                              <vdm_lustre:lhsOperand>
                                                                                <vdm_lustre:identifier>Successful</vdm_lustre:identifier>
                                                                              </vdm_lustre:lhsOperand>
                                                                              <vdm_lustre:rhsOperand>
                                                                                <vdm_lustre:identifier>task2</vdm_lustre:identifier>
                                                                              </vdm_lustre:rhsOperand>
                                                                            </vdm_lustre:and>
                                                                          </vdm_lustre:rhsOperand>
                                                                        </vdm_lustre:equal>
                                                                      </vdm_lustre:recordReference>
                                                                      <vdm_lustre:fieldId>status</vdm_lustre:fieldId>
                                                                    </vdm_lustre:recordProjection>
                                                                  </vdm_lustre:lhsOperand>
                                                                  <vdm_lustre:rhsOperand>
                                                                    <vdm_lustre:and>
                                                                      <vdm_lustre:lhsOperand>
                                                                        <vdm_lustre:identifier>Successful</vdm_lustre:identifier>
                                                                      </vdm_lustre:lhsOperand>
                                                                      <vdm_lustre:rhsOperand>
                                                                        <vdm_lustre:identifier>task3</vdm_lustre:identifier>
                                                                      </vdm_lustre:rhsOperand>
                                                                    </vdm_lustre:and>
                                                                  </vdm_lustre:rhsOperand>
                                                                </vdm_lustre:equal>
                                                              </vdm_lustre:recordReference>
                                                              <vdm_lustre:fieldId>status</vdm_lustre:fieldId>
                                                            </vdm_lustre:recordProjection>
                                                          </vdm_lustre:lhsOperand>
                                                          <vdm_lustre:rhsOperand>
                                                            <vdm_lustre:and>
                                                              <vdm_lustre:lhsOperand>
                                                                <vdm_lustre:and>
                                                                  <vdm_lustre:lhsOperand>
                                                                    <vdm_lustre:identifier>InProgress</vdm_lustre:identifier>
                                                                  </vdm_lustre:lhsOperand>
                                                                  <vdm_lustre:rhsOperand>
                                                                    <vdm_lustre:identifier>curr_dest_reached</vdm_lustre:identifier>
                                                                  </vdm_lustre:rhsOperand>
                                                                </vdm_lustre:and>
                                                              </vdm_lustre:lhsOperand>
                                                              <vdm_lustre:rhsOperand>
                                                                <vdm_lustre:identifier>curr_payload_performed</vdm_lustre:identifier>
                                                              </vdm_lustre:rhsOperand>
                                                            </vdm_lustre:and>
                                                          </vdm_lustre:rhsOperand>
                                                        </vdm_lustre:equal>
                                                      </vdm_lustre:condition>
                                                      <vdm_lustre:thenBranch>
                                                        <vdm_lustre:expressionList>
                                                          <vdm_lustre:expression>
                                                            <vdm_lustre:recordProjection>
                                                              <vdm_lustre:recordReference>
                                                                <vdm_lustre:identifier>task3</vdm_lustre:identifier>
                                                              </vdm_lustre:recordReference>
                                                              <vdm_lustre:fieldId>waypoint</vdm_lustre:fieldId>
                                                            </vdm_lustre:recordProjection>
                                                          </vdm_lustre:expression>
                                                          <vdm_lustre:expression>
                                                            <vdm_lustre:identifier>task1</vdm_lustre:identifier>
                                                          </vdm_lustre:expression>
                                                          <vdm_lustre:expression>
                                                            <vdm_lustre:identifier>task2</vdm_lustre:identifier>
                                                          </vdm_lustre:expression>
                                                          <vdm_lustre:expression>
                                                            <vdm_lustre:call
                                                              vdm_lustre:nodeId="set_task_status">
                                                              <vdm_lustre:argument>
                                                                <vdm_lustre:identifier>task3</vdm_lustre:identifier>
                                                              </vdm_lustre:argument>
                                                              <vdm_lustre:argument>
                                                                <vdm_lustre:identifier>Successful</vdm_lustre:identifier>
                                                              </vdm_lustre:argument>
                                                            </vdm_lustre:call>
                                                          </vdm_lustre:expression>
                                                        </vdm_lustre:expressionList>
                                                      </vdm_lustre:thenBranch>
                                                      <vdm_lustre:elseBranch>
                                                        <vdm_lustre:conditionalExpression>
                                                          <vdm_lustre:condition>
                                                            <vdm_lustre:equal>
                                                              <vdm_lustre:lhsOperand>
                                                                <vdm_lustre:recordProjection>
                                                                  <vdm_lustre:recordReference>
                                                                    <vdm_lustre:equal>
                                                                      <vdm_lustre:lhsOperand>
                                                                        <vdm_lustre:recordProjection>
                                                                          <vdm_lustre:recordReference>
                                                                            <vdm_lustre:equal>
                                                                              <vdm_lustre:lhsOperand>
                                                                                <vdm_lustre:recordProjection>
                                                                                  <vdm_lustre:recordReference>
                                                                                    <vdm_lustre:equal>
                                                                                      <vdm_lustre:lhsOperand>
                                                                                        <vdm_lustre:identifier>mstate</vdm_lustre:identifier>
                                                                                      </vdm_lustre:lhsOperand>
                                                                                      <vdm_lustre:rhsOperand>
                                                                                        <vdm_lustre:and>
                                                                                          <vdm_lustre:lhsOperand>
                                                                                            <vdm_lustre:identifier>s_AUTO_FLIGHT_MODE</vdm_lustre:identifier>
                                                                                          </vdm_lustre:lhsOperand>
                                                                                          <vdm_lustre:rhsOperand>
                                                                                            <vdm_lustre:identifier>task1</vdm_lustre:identifier>
                                                                                          </vdm_lustre:rhsOperand>
                                                                                        </vdm_lustre:and>
                                                                                      </vdm_lustre:rhsOperand>
                                                                                    </vdm_lustre:equal>
                                                                                  </vdm_lustre:recordReference>
                                                                                  <vdm_lustre:fieldId>status</vdm_lustre:fieldId>
                                                                                </vdm_lustre:recordProjection>
                                                                              </vdm_lustre:lhsOperand>
                                                                              <vdm_lustre:rhsOperand>
                                                                                <vdm_lustre:and>
                                                                                  <vdm_lustre:lhsOperand>
                                                                                    <vdm_lustre:identifier>Successful</vdm_lustre:identifier>
                                                                                  </vdm_lustre:lhsOperand>
                                                                                  <vdm_lustre:rhsOperand>
                                                                                    <vdm_lustre:identifier>task2</vdm_lustre:identifier>
                                                                                  </vdm_lustre:rhsOperand>
                                                                                </vdm_lustre:and>
                                                                              </vdm_lustre:rhsOperand>
                                                                            </vdm_lustre:equal>
                                                                          </vdm_lustre:recordReference>
                                                                          <vdm_lustre:fieldId>status</vdm_lustre:fieldId>
                                                                        </vdm_lustre:recordProjection>
                                                                      </vdm_lustre:lhsOperand>
                                                                      <vdm_lustre:rhsOperand>
                                                                        <vdm_lustre:and>
                                                                          <vdm_lustre:lhsOperand>
                                                                            <vdm_lustre:identifier>Successful</vdm_lustre:identifier>
                                                                          </vdm_lustre:lhsOperand>
                                                                          <vdm_lustre:rhsOperand>
                                                                            <vdm_lustre:identifier>task3</vdm_lustre:identifier>
                                                                          </vdm_lustre:rhsOperand>
                                                                        </vdm_lustre:and>
                                                                      </vdm_lustre:rhsOperand>
                                                                    </vdm_lustre:equal>
                                                                  </vdm_lustre:recordReference>
                                                                  <vdm_lustre:fieldId>status</vdm_lustre:fieldId>
                                                                </vdm_lustre:recordProjection>
                                                              </vdm_lustre:lhsOperand>
                                                              <vdm_lustre:rhsOperand>
                                                                <vdm_lustre:and>
                                                                  <vdm_lustre:lhsOperand>
                                                                    <vdm_lustre:and>
                                                                      <vdm_lustre:lhsOperand>
                                                                        <vdm_lustre:identifier>InProgress</vdm_lustre:identifier>
                                                                      </vdm_lustre:lhsOperand>
                                                                      <vdm_lustre:rhsOperand>
                                                                        <vdm_lustre:identifier>curr_dest_reached</vdm_lustre:identifier>
                                                                      </vdm_lustre:rhsOperand>
                                                                    </vdm_lustre:and>
                                                                  </vdm_lustre:lhsOperand>
                                                                  <vdm_lustre:rhsOperand>
                                                                    <vdm_lustre:not>
                                                                      <vdm_lustre:identifier>curr_payload_performed</vdm_lustre:identifier>
                                                                    </vdm_lustre:not>
                                                                  </vdm_lustre:rhsOperand>
                                                                </vdm_lustre:and>
                                                              </vdm_lustre:rhsOperand>
                                                            </vdm_lustre:equal>
                                                          </vdm_lustre:condition>
                                                          <vdm_lustre:thenBranch>
                                                            <vdm_lustre:expressionList>
                                                              <vdm_lustre:expression>
                                                                <vdm_lustre:recordProjection>
                                                                  <vdm_lustre:recordReference>
                                                                    <vdm_lustre:identifier>task3</vdm_lustre:identifier>
                                                                  </vdm_lustre:recordReference>
                                                                  <vdm_lustre:fieldId>waypoint</vdm_lustre:fieldId>
                                                                </vdm_lustre:recordProjection>
                                                              </vdm_lustre:expression>
                                                              <vdm_lustre:expression>
                                                                <vdm_lustre:identifier>task1</vdm_lustre:identifier>
                                                              </vdm_lustre:expression>
                                                              <vdm_lustre:expression>
                                                                <vdm_lustre:identifier>task2</vdm_lustre:identifier>
                                                              </vdm_lustre:expression>
                                                              <vdm_lustre:expression>
                                                                <vdm_lustre:call
                                                                  vdm_lustre:nodeId="set_task_status">
                                                                  <vdm_lustre:argument>
                                                                    <vdm_lustre:identifier>task3</vdm_lustre:identifier>
                                                                  </vdm_lustre:argument>
                                                                  <vdm_lustre:argument>
                                                                    <vdm_lustre:identifier>Aborted</vdm_lustre:identifier>
                                                                  </vdm_lustre:argument>
                                                                </vdm_lustre:call>
                                                              </vdm_lustre:expression>
                                                            </vdm_lustre:expressionList>
                                                          </vdm_lustre:thenBranch>
                                                          <vdm_lustre:elseBranch>
                                                            <vdm_lustre:conditionalExpression>
                                                              <vdm_lustre:condition>
                                                                <vdm_lustre:equal>
                                                                  <vdm_lustre:lhsOperand>
                                                                    <vdm_lustre:identifier>mstate</vdm_lustre:identifier>
                                                                  </vdm_lustre:lhsOperand>
                                                                  <vdm_lustre:rhsOperand>
                                                                    <vdm_lustre:identifier>s_RETURN_TO_LAUNCH</vdm_lustre:identifier>
                                                                  </vdm_lustre:rhsOperand>
                                                                </vdm_lustre:equal>
                                                              </vdm_lustre:condition>
                                                              <vdm_lustre:thenBranch>
                                                                <vdm_lustre:conditionalExpression>
                                                                  <vdm_lustre:condition>
                                                                    <vdm_lustre:equal>
                                                                      <vdm_lustre:lhsOperand>
                                                                        <vdm_lustre:recordProjection>
                                                                          <vdm_lustre:recordReference>
                                                                            <vdm_lustre:identifier>task1</vdm_lustre:identifier>
                                                                          </vdm_lustre:recordReference>
                                                                          <vdm_lustre:fieldId>status</vdm_lustre:fieldId>
                                                                        </vdm_lustre:recordProjection>
                                                                      </vdm_lustre:lhsOperand>
                                                                      <vdm_lustre:rhsOperand>
                                                                        <vdm_lustre:identifier>InProgress</vdm_lustre:identifier>
                                                                      </vdm_lustre:rhsOperand>
                                                                    </vdm_lustre:equal>
                                                                  </vdm_lustre:condition>
                                                                  <vdm_lustre:thenBranch>
                                                                    <vdm_lustre:expressionList>
                                                                      <vdm_lustre:expression>
                                                                        <vdm_lustre:identifier>LAUNCH_POS</vdm_lustre:identifier>
                                                                      </vdm_lustre:expression>
                                                                      <vdm_lustre:expression>
                                                                        <vdm_lustre:call
                                                                          vdm_lustre:nodeId="set_task_status">
                                                                          <vdm_lustre:argument>
                                                                            <vdm_lustre:identifier>task1</vdm_lustre:identifier>
                                                                          </vdm_lustre:argument>
                                                                          <vdm_lustre:argument>
                                                                            <vdm_lustre:identifier>Aborted</vdm_lustre:identifier>
                                                                          </vdm_lustre:argument>
                                                                        </vdm_lustre:call>
                                                                      </vdm_lustre:expression>
                                                                      <vdm_lustre:expression>
                                                                        <vdm_lustre:identifier>task2</vdm_lustre:identifier>
                                                                      </vdm_lustre:expression>
                                                                      <vdm_lustre:expression>
                                                                        <vdm_lustre:identifier>task3</vdm_lustre:identifier>
                                                                      </vdm_lustre:expression>
                                                                    </vdm_lustre:expressionList>
                                                                  </vdm_lustre:thenBranch>
                                                                  <vdm_lustre:elseBranch>
                                                                    <vdm_lustre:conditionalExpression>
                                                                      <vdm_lustre:condition>
                                                                        <vdm_lustre:equal>
                                                                          <vdm_lustre:lhsOperand>
                                                                            <vdm_lustre:recordProjection>
                                                                              <vdm_lustre:recordReference>
                                                                                <vdm_lustre:identifier>task2</vdm_lustre:identifier>
                                                                              </vdm_lustre:recordReference>
                                                                              <vdm_lustre:fieldId>status</vdm_lustre:fieldId>
                                                                            </vdm_lustre:recordProjection>
                                                                          </vdm_lustre:lhsOperand>
                                                                          <vdm_lustre:rhsOperand>
                                                                            <vdm_lustre:identifier>InProgress</vdm_lustre:identifier>
                                                                          </vdm_lustre:rhsOperand>
                                                                        </vdm_lustre:equal>
                                                                      </vdm_lustre:condition>
                                                                      <vdm_lustre:thenBranch>
                                                                        <vdm_lustre:expressionList>
                                                                          <vdm_lustre:expression>
                                                                            <vdm_lustre:identifier>LAUNCH_POS</vdm_lustre:identifier>
                                                                          </vdm_lustre:expression>
                                                                          <vdm_lustre:expression>
                                                                            <vdm_lustre:identifier>task1</vdm_lustre:identifier>
                                                                          </vdm_lustre:expression>
                                                                          <vdm_lustre:expression>
                                                                            <vdm_lustre:call
                                                                              vdm_lustre:nodeId="set_task_status">
                                                                              <vdm_lustre:argument>
                                                                                <vdm_lustre:identifier>task2</vdm_lustre:identifier>
                                                                              </vdm_lustre:argument>
                                                                              <vdm_lustre:argument>
                                                                                <vdm_lustre:identifier>Aborted</vdm_lustre:identifier>
                                                                              </vdm_lustre:argument>
                                                                            </vdm_lustre:call>
                                                                          </vdm_lustre:expression>
                                                                          <vdm_lustre:expression>
                                                                            <vdm_lustre:identifier>task3</vdm_lustre:identifier>
                                                                          </vdm_lustre:expression>
                                                                        </vdm_lustre:expressionList>
                                                                      </vdm_lustre:thenBranch>
                                                                      <vdm_lustre:elseBranch>
                                                                        <vdm_lustre:conditionalExpression>
                                                                          <vdm_lustre:condition>
                                                                            <vdm_lustre:equal>
                                                                              <vdm_lustre:lhsOperand>
                                                                                <vdm_lustre:recordProjection>
                                                                                  <vdm_lustre:recordReference>
                                                                                    <vdm_lustre:identifier>task3</vdm_lustre:identifier>
                                                                                  </vdm_lustre:recordReference>
                                                                                  <vdm_lustre:fieldId>status</vdm_lustre:fieldId>
                                                                                </vdm_lustre:recordProjection>
                                                                              </vdm_lustre:lhsOperand>
                                                                              <vdm_lustre:rhsOperand>
                                                                                <vdm_lustre:identifier>InProgress</vdm_lustre:identifier>
                                                                              </vdm_lustre:rhsOperand>
                                                                            </vdm_lustre:equal>
                                                                          </vdm_lustre:condition>
                                                                          <vdm_lustre:thenBranch>
                                                                            <vdm_lustre:expressionList>
                                                                              <vdm_lustre:expression>
                                                                                <vdm_lustre:identifier>LAUNCH_POS</vdm_lustre:identifier>
                                                                              </vdm_lustre:expression>
                                                                              <vdm_lustre:expression>
                                                                                <vdm_lustre:identifier>task1</vdm_lustre:identifier>
                                                                              </vdm_lustre:expression>
                                                                              <vdm_lustre:expression>
                                                                                <vdm_lustre:identifier>task2</vdm_lustre:identifier>
                                                                              </vdm_lustre:expression>
                                                                              <vdm_lustre:expression>
                                                                                <vdm_lustre:call
                                                                                  vdm_lustre:nodeId="set_task_status">
                                                                                  <vdm_lustre:argument>
                                                                                    <vdm_lustre:identifier>task3</vdm_lustre:identifier>
                                                                                  </vdm_lustre:argument>
                                                                                  <vdm_lustre:argument>
                                                                                    <vdm_lustre:identifier>Aborted</vdm_lustre:identifier>
                                                                                  </vdm_lustre:argument>
                                                                                </vdm_lustre:call>
                                                                              </vdm_lustre:expression>
                                                                            </vdm_lustre:expressionList>
                                                                          </vdm_lustre:thenBranch>
                                                                          <vdm_lustre:elseBranch>
                                                                            <vdm_lustre:expressionList>
                                                                              <vdm_lustre:expression>
                                                                                <vdm_lustre:identifier>LAUNCH_POS</vdm_lustre:identifier>
                                                                              </vdm_lustre:expression>
                                                                              <vdm_lustre:expression>
                                                                                <vdm_lustre:identifier>task1</vdm_lustre:identifier>
                                                                              </vdm_lustre:expression>
                                                                              <vdm_lustre:expression>
                                                                                <vdm_lustre:identifier>task2</vdm_lustre:identifier>
                                                                              </vdm_lustre:expression>
                                                                              <vdm_lustre:expression>
                                                                                <vdm_lustre:identifier>task3</vdm_lustre:identifier>
                                                                              </vdm_lustre:expression>
                                                                            </vdm_lustre:expressionList>
                                                                          </vdm_lustre:elseBranch>
                                                                        </vdm_lustre:conditionalExpression>
                                                                      </vdm_lustre:elseBranch>
                                                                    </vdm_lustre:conditionalExpression>
                                                                  </vdm_lustre:elseBranch>
                                                                </vdm_lustre:conditionalExpression>
                                                              </vdm_lustre:thenBranch>
                                                              <vdm_lustre:elseBranch>
                                                                <vdm_lustre:conditionalExpression>
                                                                  <vdm_lustre:condition>
                                                                    <vdm_lustre:equal>
                                                                      <vdm_lustre:lhsOperand>
                                                                        <vdm_lustre:identifier>mstate</vdm_lustre:identifier>
                                                                      </vdm_lustre:lhsOperand>
                                                                      <vdm_lustre:rhsOperand>
                                                                        <vdm_lustre:identifier>s_MANUAL_FLIGHT_MODE</vdm_lustre:identifier>
                                                                      </vdm_lustre:rhsOperand>
                                                                    </vdm_lustre:equal>
                                                                  </vdm_lustre:condition>
                                                                  <vdm_lustre:thenBranch>
                                                                    <vdm_lustre:expressionList>
                                                                      <vdm_lustre:expression>
                                                                        <vdm_lustre:arrow>
                                                                          <vdm_lustre:lhsOperand>
                                                                            <vdm_lustre:identifier>LAUNCH_POS</vdm_lustre:identifier>
                                                                          </vdm_lustre:lhsOperand>
                                                                          <vdm_lustre:rhsOperand>
                                                                            <vdm_lustre:pre>
                                                                              <vdm_lustre:identifier>waypoint</vdm_lustre:identifier>
                                                                            </vdm_lustre:pre>
                                                                          </vdm_lustre:rhsOperand>
                                                                        </vdm_lustre:arrow>
                                                                      </vdm_lustre:expression>
                                                                      <vdm_lustre:expression>
                                                                        <vdm_lustre:identifier>task1</vdm_lustre:identifier>
                                                                      </vdm_lustre:expression>
                                                                      <vdm_lustre:expression>
                                                                        <vdm_lustre:identifier>task2</vdm_lustre:identifier>
                                                                      </vdm_lustre:expression>
                                                                      <vdm_lustre:expression>
                                                                        <vdm_lustre:identifier>task3</vdm_lustre:identifier>
                                                                      </vdm_lustre:expression>
                                                                    </vdm_lustre:expressionList>
                                                                  </vdm_lustre:thenBranch>
                                                                  <vdm_lustre:elseBranch>
                                                                    <vdm_lustre:expressionList>
                                                                      <vdm_lustre:expression>
                                                                        <vdm_lustre:arrow>
                                                                          <vdm_lustre:lhsOperand>
                                                                            <vdm_lustre:identifier>LAUNCH_POS</vdm_lustre:identifier>
                                                                          </vdm_lustre:lhsOperand>
                                                                          <vdm_lustre:rhsOperand>
                                                                            <vdm_lustre:pre>
                                                                              <vdm_lustre:identifier>waypoint</vdm_lustre:identifier>
                                                                            </vdm_lustre:pre>
                                                                          </vdm_lustre:rhsOperand>
                                                                        </vdm_lustre:arrow>
                                                                      </vdm_lustre:expression>
                                                                      <vdm_lustre:expression>
                                                                        <vdm_lustre:call
                                                                          vdm_lustre:nodeId="set_task_status">
                                                                          <vdm_lustre:argument>
                                                                            <vdm_lustre:identifier>task1</vdm_lustre:identifier>
                                                                          </vdm_lustre:argument>
                                                                          <vdm_lustre:argument>
                                                                            <vdm_lustre:identifier>Aborted</vdm_lustre:identifier>
                                                                          </vdm_lustre:argument>
                                                                        </vdm_lustre:call>
                                                                      </vdm_lustre:expression>
                                                                      <vdm_lustre:expression>
                                                                        <vdm_lustre:call
                                                                          vdm_lustre:nodeId="set_task_status">
                                                                          <vdm_lustre:argument>
                                                                            <vdm_lustre:identifier>task2</vdm_lustre:identifier>
                                                                          </vdm_lustre:argument>
                                                                          <vdm_lustre:argument>
                                                                            <vdm_lustre:identifier>Aborted</vdm_lustre:identifier>
                                                                          </vdm_lustre:argument>
                                                                        </vdm_lustre:call>
                                                                      </vdm_lustre:expression>
                                                                      <vdm_lustre:expression>
                                                                        <vdm_lustre:call
                                                                          vdm_lustre:nodeId="set_task_status">
                                                                          <vdm_lustre:argument>
                                                                            <vdm_lustre:identifier>task3</vdm_lustre:identifier>
                                                                          </vdm_lustre:argument>
                                                                          <vdm_lustre:argument>
                                                                            <vdm_lustre:identifier>Aborted</vdm_lustre:identifier>
                                                                          </vdm_lustre:argument>
                                                                        </vdm_lustre:call>
                                                                      </vdm_lustre:expression>
                                                                    </vdm_lustre:expressionList>
                                                                  </vdm_lustre:elseBranch>
                                                                </vdm_lustre:conditionalExpression>
                                                              </vdm_lustre:elseBranch>
                                                            </vdm_lustre:conditionalExpression>
                                                          </vdm_lustre:elseBranch>
                                                        </vdm_lustre:conditionalExpression>
                                                      </vdm_lustre:elseBranch>
                                                    </vdm_lustre:conditionalExpression>
                                                  </vdm_lustre:elseBranch>
                                                </vdm_lustre:conditionalExpression>
                                              </vdm_lustre:elseBranch>
                                            </vdm_lustre:conditionalExpression>
                                          </vdm_lustre:elseBranch>
                                        </vdm_lustre:conditionalExpression>
                                      </vdm_lustre:elseBranch>
                                    </vdm_lustre:conditionalExpression>
                                  </vdm_lustre:elseBranch>
                                </vdm_lustre:conditionalExpression>
                              </vdm_lustre:elseBranch>
                            </vdm_lustre:conditionalExpression>
                          </vdm_lustre:elseBranch>
                        </vdm_lustre:conditionalExpression>
                      </vdm_lustre:elseBranch>
                    </vdm_lustre:conditionalExpression>
                  </vdm_lustre:elseBranch>
                </vdm_lustre:conditionalExpression>
              </vdm_lustre:elseBranch>
            </vdm_lustre:conditionalExpression>
          </vdm_lustre:rhs>
        </vdm_lustre:equation>
      </vdm_lustre:body>
    </vdm_lustre:nodeDeclaration>
    <vdm_lustre:nodeDeclaration>
      <vdm_lustre:name>LocationSource</vdm_lustre:name>
      <vdm_lustre:inputParameter>
        <vdm_lustre:name>cmd</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>MotorCommand</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:inputParameter>
      <vdm_lustre:outputParameter>
        <vdm_lustre:name>pos</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>Position</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:outputParameter>
      <vdm_lustre:outputParameter>
        <vdm_lustre:name>dir</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>Direction</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:outputParameter>
      <vdm_lustre:body>
        <vdm_lustre:variableDeclaration>
          <vdm_lustre:name>nextPos</vdm_lustre:name>
          <vdm_lustre:dataType>
            <vdm_data:userDefinedType>Position</vdm_data:userDefinedType>
          </vdm_lustre:dataType>
        </vdm_lustre:variableDeclaration>
        <vdm_lustre:variableDeclaration>
          <vdm_lustre:name>nextDir</vdm_lustre:name>
          <vdm_lustre:dataType>
            <vdm_data:userDefinedType>Direction</vdm_data:userDefinedType>
          </vdm_lustre:dataType>
        </vdm_lustre:variableDeclaration>
        <vdm_lustre:variableDeclaration>
          <vdm_lustre:name>x</vdm_lustre:name>
          <vdm_lustre:dataType>
            <vdm_data:plainType>int</vdm_data:plainType>
          </vdm_lustre:dataType>
        </vdm_lustre:variableDeclaration>
        <vdm_lustre:variableDeclaration>
          <vdm_lustre:name>y</vdm_lustre:name>
          <vdm_lustre:dataType>
            <vdm_data:plainType>int</vdm_data:plainType>
          </vdm_lustre:dataType>
        </vdm_lustre:variableDeclaration>
        <vdm_lustre:variableDeclaration>
          <vdm_lustre:name>yaw</vdm_lustre:name>
          <vdm_lustre:dataType>
            <vdm_data:userDefinedType>YawAngle</vdm_data:userDefinedType>
          </vdm_lustre:dataType>
        </vdm_lustre:variableDeclaration>
        <vdm_lustre:equation>
          <vdm_lustre:lhs>
            <vdm_lustre:identifier>pos</vdm_lustre:identifier>
          </vdm_lustre:lhs>
          <vdm_lustre:rhs>
            <vdm_lustre:arrow>
              <vdm_lustre:lhsOperand>
                <vdm_lustre:identifier>LAUNCH_POS</vdm_lustre:identifier>
              </vdm_lustre:lhsOperand>
              <vdm_lustre:rhsOperand>
                <vdm_lustre:pre>
                  <vdm_lustre:identifier>nextPos</vdm_lustre:identifier>
                </vdm_lustre:pre>
              </vdm_lustre:rhsOperand>
            </vdm_lustre:arrow>
          </vdm_lustre:rhs>
        </vdm_lustre:equation>
        <vdm_lustre:equation>
          <vdm_lustre:lhs>
            <vdm_lustre:identifier>dir</vdm_lustre:identifier>
          </vdm_lustre:lhs>
          <vdm_lustre:rhs>
            <vdm_lustre:arrow>
              <vdm_lustre:lhsOperand>
                <vdm_lustre:identifier>LAUNCH_DIR</vdm_lustre:identifier>
              </vdm_lustre:lhsOperand>
              <vdm_lustre:rhsOperand>
                <vdm_lustre:pre>
                  <vdm_lustre:identifier>nextDir</vdm_lustre:identifier>
                </vdm_lustre:pre>
              </vdm_lustre:rhsOperand>
            </vdm_lustre:arrow>
          </vdm_lustre:rhs>
        </vdm_lustre:equation>
        <vdm_lustre:equation>
          <vdm_lustre:lhs>
            <vdm_lustre:identifier>x</vdm_lustre:identifier>
          </vdm_lustre:lhs>
          <vdm_lustre:rhs>
            <vdm_lustre:recordProjection>
              <vdm_lustre:recordReference>
                <vdm_lustre:conditionalExpression>
                  <vdm_lustre:condition>
                    <vdm_lustre:equal>
                      <vdm_lustre:lhsOperand>
                        <vdm_lustre:identifier>cmd</vdm_lustre:identifier>
                      </vdm_lustre:lhsOperand>
                      <vdm_lustre:rhsOperand>
                        <vdm_lustre:identifier>IncreaseX</vdm_lustre:identifier>
                      </vdm_lustre:rhsOperand>
                    </vdm_lustre:equal>
                  </vdm_lustre:condition>
                  <vdm_lustre:thenBranch>
                    <vdm_lustre:plus>
                      <vdm_lustre:lhsOperand>
                        <vdm_lustre:recordProjection>
                          <vdm_lustre:recordReference>
                            <vdm_lustre:identifier>pos</vdm_lustre:identifier>
                          </vdm_lustre:recordReference>
                          <vdm_lustre:fieldId>x</vdm_lustre:fieldId>
                        </vdm_lustre:recordProjection>
                      </vdm_lustre:lhsOperand>
                      <vdm_lustre:rhsOperand>
                        <vdm_lustre:intLiteral>1</vdm_lustre:intLiteral>
                      </vdm_lustre:rhsOperand>
                    </vdm_lustre:plus>
                  </vdm_lustre:thenBranch>
                  <vdm_lustre:elseBranch>
                    <vdm_lustre:conditionalExpression>
                      <vdm_lustre:condition>
                        <vdm_lustre:equal>
                          <vdm_lustre:lhsOperand>
                            <vdm_lustre:identifier>cmd</vdm_lustre:identifier>
                          </vdm_lustre:lhsOperand>
                          <vdm_lustre:rhsOperand>
                            <vdm_lustre:identifier>DecreaseX</vdm_lustre:identifier>
                          </vdm_lustre:rhsOperand>
                        </vdm_lustre:equal>
                      </vdm_lustre:condition>
                      <vdm_lustre:thenBranch>
                        <vdm_lustre:minus>
                          <vdm_lustre:lhsOperand>
                            <vdm_lustre:recordProjection>
                              <vdm_lustre:recordReference>
                                <vdm_lustre:identifier>pos</vdm_lustre:identifier>
                              </vdm_lustre:recordReference>
                              <vdm_lustre:fieldId>x</vdm_lustre:fieldId>
                            </vdm_lustre:recordProjection>
                          </vdm_lustre:lhsOperand>
                          <vdm_lustre:rhsOperand>
                            <vdm_lustre:intLiteral>1</vdm_lustre:intLiteral>
                          </vdm_lustre:rhsOperand>
                        </vdm_lustre:minus>
                      </vdm_lustre:thenBranch>
                      <vdm_lustre:elseBranch>
                        <vdm_lustre:identifier>pos</vdm_lustre:identifier>
                      </vdm_lustre:elseBranch>
                    </vdm_lustre:conditionalExpression>
                  </vdm_lustre:elseBranch>
                </vdm_lustre:conditionalExpression>
              </vdm_lustre:recordReference>
              <vdm_lustre:fieldId>x</vdm_lustre:fieldId>
            </vdm_lustre:recordProjection>
          </vdm_lustre:rhs>
        </vdm_lustre:equation>
        <vdm_lustre:equation>
          <vdm_lustre:lhs>
            <vdm_lustre:identifier>y</vdm_lustre:identifier>
          </vdm_lustre:lhs>
          <vdm_lustre:rhs>
            <vdm_lustre:recordProjection>
              <vdm_lustre:recordReference>
                <vdm_lustre:conditionalExpression>
                  <vdm_lustre:condition>
                    <vdm_lustre:equal>
                      <vdm_lustre:lhsOperand>
                        <vdm_lustre:identifier>cmd</vdm_lustre:identifier>
                      </vdm_lustre:lhsOperand>
                      <vdm_lustre:rhsOperand>
                        <vdm_lustre:identifier>IncreaseY</vdm_lustre:identifier>
                      </vdm_lustre:rhsOperand>
                    </vdm_lustre:equal>
                  </vdm_lustre:condition>
                  <vdm_lustre:thenBranch>
                    <vdm_lustre:plus>
                      <vdm_lustre:lhsOperand>
                        <vdm_lustre:recordProjection>
                          <vdm_lustre:recordReference>
                            <vdm_lustre:identifier>pos</vdm_lustre:identifier>
                          </vdm_lustre:recordReference>
                          <vdm_lustre:fieldId>y</vdm_lustre:fieldId>
                        </vdm_lustre:recordProjection>
                      </vdm_lustre:lhsOperand>
                      <vdm_lustre:rhsOperand>
                        <vdm_lustre:intLiteral>1</vdm_lustre:intLiteral>
                      </vdm_lustre:rhsOperand>
                    </vdm_lustre:plus>
                  </vdm_lustre:thenBranch>
                  <vdm_lustre:elseBranch>
                    <vdm_lustre:conditionalExpression>
                      <vdm_lustre:condition>
                        <vdm_lustre:equal>
                          <vdm_lustre:lhsOperand>
                            <vdm_lustre:identifier>cmd</vdm_lustre:identifier>
                          </vdm_lustre:lhsOperand>
                          <vdm_lustre:rhsOperand>
                            <vdm_lustre:identifier>DecreaseY</vdm_lustre:identifier>
                          </vdm_lustre:rhsOperand>
                        </vdm_lustre:equal>
                      </vdm_lustre:condition>
                      <vdm_lustre:thenBranch>
                        <vdm_lustre:minus>
                          <vdm_lustre:lhsOperand>
                            <vdm_lustre:recordProjection>
                              <vdm_lustre:recordReference>
                                <vdm_lustre:identifier>pos</vdm_lustre:identifier>
                              </vdm_lustre:recordReference>
                              <vdm_lustre:fieldId>y</vdm_lustre:fieldId>
                            </vdm_lustre:recordProjection>
                          </vdm_lustre:lhsOperand>
                          <vdm_lustre:rhsOperand>
                            <vdm_lustre:intLiteral>1</vdm_lustre:intLiteral>
                          </vdm_lustre:rhsOperand>
                        </vdm_lustre:minus>
                      </vdm_lustre:thenBranch>
                      <vdm_lustre:elseBranch>
                        <vdm_lustre:identifier>pos</vdm_lustre:identifier>
                      </vdm_lustre:elseBranch>
                    </vdm_lustre:conditionalExpression>
                  </vdm_lustre:elseBranch>
                </vdm_lustre:conditionalExpression>
              </vdm_lustre:recordReference>
              <vdm_lustre:fieldId>y</vdm_lustre:fieldId>
            </vdm_lustre:recordProjection>
          </vdm_lustre:rhs>
        </vdm_lustre:equation>
        <vdm_lustre:equation>
          <vdm_lustre:lhs>
            <vdm_lustre:identifier>yaw</vdm_lustre:identifier>
          </vdm_lustre:lhs>
          <vdm_lustre:rhs>
            <vdm_lustre:conditionalExpression>
              <vdm_lustre:condition>
                <vdm_lustre:equal>
                  <vdm_lustre:lhsOperand>
                    <vdm_lustre:identifier>cmd</vdm_lustre:identifier>
                  </vdm_lustre:lhsOperand>
                  <vdm_lustre:rhsOperand>
                    <vdm_lustre:identifier>IncreaseYaw</vdm_lustre:identifier>
                  </vdm_lustre:rhsOperand>
                </vdm_lustre:equal>
              </vdm_lustre:condition>
              <vdm_lustre:thenBranch>
                <vdm_lustre:expressionList>
                  <vdm_lustre:expression>
                    <vdm_lustre:arrow>
                      <vdm_lustre:lhsOperand>
                        <vdm_lustre:identifier>Y_90</vdm_lustre:identifier>
                      </vdm_lustre:lhsOperand>
                      <vdm_lustre:rhsOperand>
                        <vdm_lustre:conditionalExpression>
                          <vdm_lustre:condition>
                            <vdm_lustre:equal>
                              <vdm_lustre:lhsOperand>
                                <vdm_lustre:pre>
                                  <vdm_lustre:identifier>yaw</vdm_lustre:identifier>
                                </vdm_lustre:pre>
                              </vdm_lustre:lhsOperand>
                              <vdm_lustre:rhsOperand>
                                <vdm_lustre:identifier>Y_0</vdm_lustre:identifier>
                              </vdm_lustre:rhsOperand>
                            </vdm_lustre:equal>
                          </vdm_lustre:condition>
                          <vdm_lustre:thenBranch>
                            <vdm_lustre:identifier>Y_90</vdm_lustre:identifier>
                          </vdm_lustre:thenBranch>
                          <vdm_lustre:elseBranch>
                            <vdm_lustre:conditionalExpression>
                              <vdm_lustre:condition>
                                <vdm_lustre:equal>
                                  <vdm_lustre:lhsOperand>
                                    <vdm_lustre:pre>
                                      <vdm_lustre:identifier>yaw</vdm_lustre:identifier>
                                    </vdm_lustre:pre>
                                  </vdm_lustre:lhsOperand>
                                  <vdm_lustre:rhsOperand>
                                    <vdm_lustre:identifier>Y_90</vdm_lustre:identifier>
                                  </vdm_lustre:rhsOperand>
                                </vdm_lustre:equal>
                              </vdm_lustre:condition>
                              <vdm_lustre:thenBranch>
                                <vdm_lustre:identifier>Y_180</vdm_lustre:identifier>
                              </vdm_lustre:thenBranch>
                              <vdm_lustre:elseBranch>
                                <vdm_lustre:conditionalExpression>
                                  <vdm_lustre:condition>
                                    <vdm_lustre:equal>
                                      <vdm_lustre:lhsOperand>
                                        <vdm_lustre:pre>
                                          <vdm_lustre:identifier>yaw</vdm_lustre:identifier>
                                        </vdm_lustre:pre>
                                      </vdm_lustre:lhsOperand>
                                      <vdm_lustre:rhsOperand>
                                        <vdm_lustre:identifier>Y_180</vdm_lustre:identifier>
                                      </vdm_lustre:rhsOperand>
                                    </vdm_lustre:equal>
                                  </vdm_lustre:condition>
                                  <vdm_lustre:thenBranch>
                                    <vdm_lustre:identifier>Y_270</vdm_lustre:identifier>
                                  </vdm_lustre:thenBranch>
                                  <vdm_lustre:elseBranch>
                                    <vdm_lustre:identifier>Y_0</vdm_lustre:identifier>
                                  </vdm_lustre:elseBranch>
                                </vdm_lustre:conditionalExpression>
                              </vdm_lustre:elseBranch>
                            </vdm_lustre:conditionalExpression>
                          </vdm_lustre:elseBranch>
                        </vdm_lustre:conditionalExpression>
                      </vdm_lustre:rhsOperand>
                    </vdm_lustre:arrow>
                  </vdm_lustre:expression>
                </vdm_lustre:expressionList>
              </vdm_lustre:thenBranch>
              <vdm_lustre:elseBranch>
                <vdm_lustre:conditionalExpression>
                  <vdm_lustre:condition>
                    <vdm_lustre:equal>
                      <vdm_lustre:lhsOperand>
                        <vdm_lustre:identifier>cmd</vdm_lustre:identifier>
                      </vdm_lustre:lhsOperand>
                      <vdm_lustre:rhsOperand>
                        <vdm_lustre:identifier>DecreaseYaw</vdm_lustre:identifier>
                      </vdm_lustre:rhsOperand>
                    </vdm_lustre:equal>
                  </vdm_lustre:condition>
                  <vdm_lustre:thenBranch>
                    <vdm_lustre:expressionList>
                      <vdm_lustre:expression>
                        <vdm_lustre:arrow>
                          <vdm_lustre:lhsOperand>
                            <vdm_lustre:identifier>Y_270</vdm_lustre:identifier>
                          </vdm_lustre:lhsOperand>
                          <vdm_lustre:rhsOperand>
                            <vdm_lustre:conditionalExpression>
                              <vdm_lustre:condition>
                                <vdm_lustre:equal>
                                  <vdm_lustre:lhsOperand>
                                    <vdm_lustre:pre>
                                      <vdm_lustre:identifier>yaw</vdm_lustre:identifier>
                                    </vdm_lustre:pre>
                                  </vdm_lustre:lhsOperand>
                                  <vdm_lustre:rhsOperand>
                                    <vdm_lustre:identifier>Y_0</vdm_lustre:identifier>
                                  </vdm_lustre:rhsOperand>
                                </vdm_lustre:equal>
                              </vdm_lustre:condition>
                              <vdm_lustre:thenBranch>
                                <vdm_lustre:identifier>Y_270</vdm_lustre:identifier>
                              </vdm_lustre:thenBranch>
                              <vdm_lustre:elseBranch>
                                <vdm_lustre:conditionalExpression>
                                  <vdm_lustre:condition>
                                    <vdm_lustre:equal>
                                      <vdm_lustre:lhsOperand>
                                        <vdm_lustre:pre>
                                          <vdm_lustre:identifier>yaw</vdm_lustre:identifier>
                                        </vdm_lustre:pre>
                                      </vdm_lustre:lhsOperand>
                                      <vdm_lustre:rhsOperand>
                                        <vdm_lustre:identifier>Y_90</vdm_lustre:identifier>
                                      </vdm_lustre:rhsOperand>
                                    </vdm_lustre:equal>
                                  </vdm_lustre:condition>
                                  <vdm_lustre:thenBranch>
                                    <vdm_lustre:identifier>Y_0</vdm_lustre:identifier>
                                  </vdm_lustre:thenBranch>
                                  <vdm_lustre:elseBranch>
                                    <vdm_lustre:conditionalExpression>
                                      <vdm_lustre:condition>
                                        <vdm_lustre:equal>
                                          <vdm_lustre:lhsOperand>
                                            <vdm_lustre:pre>
                                              <vdm_lustre:identifier>yaw</vdm_lustre:identifier>
                                            </vdm_lustre:pre>
                                          </vdm_lustre:lhsOperand>
                                          <vdm_lustre:rhsOperand>
                                            <vdm_lustre:identifier>Y_180</vdm_lustre:identifier>
                                          </vdm_lustre:rhsOperand>
                                        </vdm_lustre:equal>
                                      </vdm_lustre:condition>
                                      <vdm_lustre:thenBranch>
                                        <vdm_lustre:identifier>Y_90</vdm_lustre:identifier>
                                      </vdm_lustre:thenBranch>
                                      <vdm_lustre:elseBranch>
                                        <vdm_lustre:identifier>Y_180</vdm_lustre:identifier>
                                      </vdm_lustre:elseBranch>
                                    </vdm_lustre:conditionalExpression>
                                  </vdm_lustre:elseBranch>
                                </vdm_lustre:conditionalExpression>
                              </vdm_lustre:elseBranch>
                            </vdm_lustre:conditionalExpression>
                          </vdm_lustre:rhsOperand>
                        </vdm_lustre:arrow>
                      </vdm_lustre:expression>
                    </vdm_lustre:expressionList>
                  </vdm_lustre:thenBranch>
                  <vdm_lustre:elseBranch>
                    <vdm_lustre:arrow>
                      <vdm_lustre:lhsOperand>
                        <vdm_lustre:identifier>Y_0</vdm_lustre:identifier>
                      </vdm_lustre:lhsOperand>
                      <vdm_lustre:rhsOperand>
                        <vdm_lustre:pre>
                          <vdm_lustre:identifier>yaw</vdm_lustre:identifier>
                        </vdm_lustre:pre>
                      </vdm_lustre:rhsOperand>
                    </vdm_lustre:arrow>
                  </vdm_lustre:elseBranch>
                </vdm_lustre:conditionalExpression>
              </vdm_lustre:elseBranch>
            </vdm_lustre:conditionalExpression>
          </vdm_lustre:rhs>
        </vdm_lustre:equation>
        <vdm_lustre:equation>
          <vdm_lustre:lhs>
            <vdm_lustre:identifier>nextPos</vdm_lustre:identifier>
          </vdm_lustre:lhs>
          <vdm_lustre:rhs>
            <vdm_lustre:recordLiteral
              vdm_lustre:recordType="Position">
              <vdm_lustre:fieldDefinition>
                <vdm_lustre:fieldIdentifier>x</vdm_lustre:fieldIdentifier>
                <vdm_lustre:fieldValue>
                  <vdm_lustre:identifier>x</vdm_lustre:identifier>
                </vdm_lustre:fieldValue>
              </vdm_lustre:fieldDefinition>
              <vdm_lustre:fieldDefinition>
                <vdm_lustre:fieldIdentifier>y</vdm_lustre:fieldIdentifier>
                <vdm_lustre:fieldValue>
                  <vdm_lustre:identifier>y</vdm_lustre:identifier>
                </vdm_lustre:fieldValue>
              </vdm_lustre:fieldDefinition>
            </vdm_lustre:recordLiteral>
          </vdm_lustre:rhs>
        </vdm_lustre:equation>
        <vdm_lustre:equation>
          <vdm_lustre:lhs>
            <vdm_lustre:identifier>nextDir</vdm_lustre:identifier>
          </vdm_lustre:lhs>
          <vdm_lustre:rhs>
            <vdm_lustre:call vdm_lustre:nodeId="yaw2dir">
              <vdm_lustre:argument>
                <vdm_lustre:identifier>yaw</vdm_lustre:identifier>
              </vdm_lustre:argument>
            </vdm_lustre:call>
          </vdm_lustre:rhs>
        </vdm_lustre:equation>
      </vdm_lustre:body>
    </vdm_lustre:nodeDeclaration>
    <vdm_lustre:nodeDeclaration>
      <vdm_lustre:name>DME_VOR</vdm_lustre:name>
      <vdm_lustre:inputParameter>
        <vdm_lustre:name>location_source_pos</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>Position</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:inputParameter>
      <vdm_lustre:inputParameter>
        <vdm_lustre:name>location_source_dir</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>Direction</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:inputParameter>
      <vdm_lustre:outputParameter>
        <vdm_lustre:name>pos</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>Position</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:outputParameter>
      <vdm_lustre:outputParameter>
        <vdm_lustre:name>dir</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>Direction</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:outputParameter>
      <vdm_lustre:body>
        <vdm_lustre:equation>
          <vdm_lustre:lhs>
            <vdm_lustre:identifier>pos</vdm_lustre:identifier>
          </vdm_lustre:lhs>
          <vdm_lustre:rhs>
            <vdm_lustre:identifier>location_source_pos</vdm_lustre:identifier>
          </vdm_lustre:rhs>
        </vdm_lustre:equation>
        <vdm_lustre:equation>
          <vdm_lustre:lhs>
            <vdm_lustre:identifier>dir</vdm_lustre:identifier>
          </vdm_lustre:lhs>
          <vdm_lustre:rhs>
            <vdm_lustre:identifier>location_source_dir</vdm_lustre:identifier>
          </vdm_lustre:rhs>
        </vdm_lustre:equation>
      </vdm_lustre:body>
    </vdm_lustre:nodeDeclaration>
    <vdm_lustre:nodeDeclaration>
      <vdm_lustre:name>GPS</vdm_lustre:name>
      <vdm_lustre:inputParameter>
        <vdm_lustre:name>location_source_pos</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>Position</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:inputParameter>
      <vdm_lustre:inputParameter>
        <vdm_lustre:name>location_source_dir</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>Direction</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:inputParameter>
      <vdm_lustre:outputParameter>
        <vdm_lustre:name>pos</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>Position</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:outputParameter>
      <vdm_lustre:outputParameter>
        <vdm_lustre:name>dir</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>Direction</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:outputParameter>
      <vdm_lustre:body>
        <vdm_lustre:equation>
          <vdm_lustre:lhs>
            <vdm_lustre:identifier>pos</vdm_lustre:identifier>
          </vdm_lustre:lhs>
          <vdm_lustre:rhs>
            <vdm_lustre:identifier>location_source_pos</vdm_lustre:identifier>
          </vdm_lustre:rhs>
        </vdm_lustre:equation>
        <vdm_lustre:equation>
          <vdm_lustre:lhs>
            <vdm_lustre:identifier>dir</vdm_lustre:identifier>
          </vdm_lustre:lhs>
          <vdm_lustre:rhs>
            <vdm_lustre:identifier>location_source_dir</vdm_lustre:identifier>
          </vdm_lustre:rhs>
        </vdm_lustre:equation>
      </vdm_lustre:body>
    </vdm_lustre:nodeDeclaration>
    <vdm_lustre:nodeDeclaration>
      <vdm_lustre:name>IRU</vdm_lustre:name>
      <vdm_lustre:inputParameter>
        <vdm_lustre:name>location_source_pos</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>Position</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:inputParameter>
      <vdm_lustre:inputParameter>
        <vdm_lustre:name>location_source_dir</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>Direction</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:inputParameter>
      <vdm_lustre:outputParameter>
        <vdm_lustre:name>pos</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>Position</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:outputParameter>
      <vdm_lustre:outputParameter>
        <vdm_lustre:name>dir</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>Direction</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:outputParameter>
      <vdm_lustre:body>
        <vdm_lustre:equation>
          <vdm_lustre:lhs>
            <vdm_lustre:identifier>pos</vdm_lustre:identifier>
          </vdm_lustre:lhs>
          <vdm_lustre:rhs>
            <vdm_lustre:identifier>location_source_pos</vdm_lustre:identifier>
          </vdm_lustre:rhs>
        </vdm_lustre:equation>
        <vdm_lustre:equation>
          <vdm_lustre:lhs>
            <vdm_lustre:identifier>dir</vdm_lustre:identifier>
          </vdm_lustre:lhs>
          <vdm_lustre:rhs>
            <vdm_lustre:identifier>location_source_dir</vdm_lustre:identifier>
          </vdm_lustre:rhs>
        </vdm_lustre:equation>
      </vdm_lustre:body>
    </vdm_lustre:nodeDeclaration>
    <vdm_lustre:nodeDeclaration>
      <vdm_lustre:name>MissionPlanner</vdm_lustre:name>
      <vdm_lustre:outputParameter>
        <vdm_lustre:name>tasks</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>Tasks</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:outputParameter>
      <vdm_lustre:body>
        <vdm_lustre:variableDeclaration>
          <vdm_lustre:name>t1</vdm_lustre:name>
          <vdm_lustre:dataType>
            <vdm_data:userDefinedType>Task</vdm_data:userDefinedType>
          </vdm_lustre:dataType>
        </vdm_lustre:variableDeclaration>
        <vdm_lustre:variableDeclaration>
          <vdm_lustre:name>t2</vdm_lustre:name>
          <vdm_lustre:dataType>
            <vdm_data:userDefinedType>Task</vdm_data:userDefinedType>
          </vdm_lustre:dataType>
        </vdm_lustre:variableDeclaration>
        <vdm_lustre:variableDeclaration>
          <vdm_lustre:name>t3</vdm_lustre:name>
          <vdm_lustre:dataType>
            <vdm_data:userDefinedType>Task</vdm_data:userDefinedType>
          </vdm_lustre:dataType>
        </vdm_lustre:variableDeclaration>
        <vdm_lustre:equation>
          <vdm_lustre:lhs>
            <vdm_lustre:identifier>t1</vdm_lustre:identifier>
          </vdm_lustre:lhs>
          <vdm_lustre:rhs>
            <vdm_lustre:recordLiteral
              vdm_lustre:recordType="Task">
              <vdm_lustre:fieldDefinition>
                <vdm_lustre:fieldIdentifier>waypoint</vdm_lustre:fieldIdentifier>
                <vdm_lustre:fieldValue>
                  <vdm_lustre:recordLiteral
                    vdm_lustre:recordType="Position">
                    <vdm_lustre:fieldDefinition>
                      <vdm_lustre:fieldIdentifier>x</vdm_lustre:fieldIdentifier>
                      <vdm_lustre:fieldValue>
                        <vdm_lustre:intLiteral>1</vdm_lustre:intLiteral>
                      </vdm_lustre:fieldValue>
                    </vdm_lustre:fieldDefinition>
                    <vdm_lustre:fieldDefinition>
                      <vdm_lustre:fieldIdentifier>y</vdm_lustre:fieldIdentifier>
                      <vdm_lustre:fieldValue>
                        <vdm_lustre:intLiteral>1</vdm_lustre:intLiteral>
                      </vdm_lustre:fieldValue>
                    </vdm_lustre:fieldDefinition>
                  </vdm_lustre:recordLiteral>
                </vdm_lustre:fieldValue>
              </vdm_lustre:fieldDefinition>
              <vdm_lustre:fieldDefinition>
                <vdm_lustre:fieldIdentifier>action</vdm_lustre:fieldIdentifier>
                <vdm_lustre:fieldValue>
                  <vdm_lustre:identifier>Camera</vdm_lustre:identifier>
                </vdm_lustre:fieldValue>
              </vdm_lustre:fieldDefinition>
              <vdm_lustre:fieldDefinition>
                <vdm_lustre:fieldIdentifier>status</vdm_lustre:fieldIdentifier>
                <vdm_lustre:fieldValue>
                  <vdm_lustre:identifier>Started</vdm_lustre:identifier>
                </vdm_lustre:fieldValue>
              </vdm_lustre:fieldDefinition>
            </vdm_lustre:recordLiteral>
          </vdm_lustre:rhs>
        </vdm_lustre:equation>
        <vdm_lustre:equation>
          <vdm_lustre:lhs>
            <vdm_lustre:identifier>t2</vdm_lustre:identifier>
          </vdm_lustre:lhs>
          <vdm_lustre:rhs>
            <vdm_lustre:recordLiteral
              vdm_lustre:recordType="Task">
              <vdm_lustre:fieldDefinition>
                <vdm_lustre:fieldIdentifier>waypoint</vdm_lustre:fieldIdentifier>
                <vdm_lustre:fieldValue>
                  <vdm_lustre:recordLiteral
                    vdm_lustre:recordType="Position">
                    <vdm_lustre:fieldDefinition>
                      <vdm_lustre:fieldIdentifier>x</vdm_lustre:fieldIdentifier>
                      <vdm_lustre:fieldValue>
                        <vdm_lustre:intLiteral>1</vdm_lustre:intLiteral>
                      </vdm_lustre:fieldValue>
                    </vdm_lustre:fieldDefinition>
                    <vdm_lustre:fieldDefinition>
                      <vdm_lustre:fieldIdentifier>y</vdm_lustre:fieldIdentifier>
                      <vdm_lustre:fieldValue>
                        <vdm_lustre:intLiteral>2</vdm_lustre:intLiteral>
                      </vdm_lustre:fieldValue>
                    </vdm_lustre:fieldDefinition>
                  </vdm_lustre:recordLiteral>
                </vdm_lustre:fieldValue>
              </vdm_lustre:fieldDefinition>
              <vdm_lustre:fieldDefinition>
                <vdm_lustre:fieldIdentifier>action</vdm_lustre:fieldIdentifier>
                <vdm_lustre:fieldValue>
                  <vdm_lustre:identifier>Weapon</vdm_lustre:identifier>
                </vdm_lustre:fieldValue>
              </vdm_lustre:fieldDefinition>
              <vdm_lustre:fieldDefinition>
                <vdm_lustre:fieldIdentifier>status</vdm_lustre:fieldIdentifier>
                <vdm_lustre:fieldValue>
                  <vdm_lustre:identifier>Started</vdm_lustre:identifier>
                </vdm_lustre:fieldValue>
              </vdm_lustre:fieldDefinition>
            </vdm_lustre:recordLiteral>
          </vdm_lustre:rhs>
        </vdm_lustre:equation>
        <vdm_lustre:equation>
          <vdm_lustre:lhs>
            <vdm_lustre:identifier>t3</vdm_lustre:identifier>
          </vdm_lustre:lhs>
          <vdm_lustre:rhs>
            <vdm_lustre:recordLiteral
              vdm_lustre:recordType="Task">
              <vdm_lustre:fieldDefinition>
                <vdm_lustre:fieldIdentifier>waypoint</vdm_lustre:fieldIdentifier>
                <vdm_lustre:fieldValue>
                  <vdm_lustre:recordLiteral
                    vdm_lustre:recordType="Position">
                    <vdm_lustre:fieldDefinition>
                      <vdm_lustre:fieldIdentifier>x</vdm_lustre:fieldIdentifier>
                      <vdm_lustre:fieldValue>
                        <vdm_lustre:intLiteral>2</vdm_lustre:intLiteral>
                      </vdm_lustre:fieldValue>
                    </vdm_lustre:fieldDefinition>
                    <vdm_lustre:fieldDefinition>
                      <vdm_lustre:fieldIdentifier>y</vdm_lustre:fieldIdentifier>
                      <vdm_lustre:fieldValue>
                        <vdm_lustre:intLiteral>2</vdm_lustre:intLiteral>
                      </vdm_lustre:fieldValue>
                    </vdm_lustre:fieldDefinition>
                  </vdm_lustre:recordLiteral>
                </vdm_lustre:fieldValue>
              </vdm_lustre:fieldDefinition>
              <vdm_lustre:fieldDefinition>
                <vdm_lustre:fieldIdentifier>action</vdm_lustre:fieldIdentifier>
                <vdm_lustre:fieldValue>
                  <vdm_lustre:identifier>Land</vdm_lustre:identifier>
                </vdm_lustre:fieldValue>
              </vdm_lustre:fieldDefinition>
              <vdm_lustre:fieldDefinition>
                <vdm_lustre:fieldIdentifier>status</vdm_lustre:fieldIdentifier>
                <vdm_lustre:fieldValue>
                  <vdm_lustre:identifier>Started</vdm_lustre:identifier>
                </vdm_lustre:fieldValue>
              </vdm_lustre:fieldDefinition>
            </vdm_lustre:recordLiteral>
          </vdm_lustre:rhs>
        </vdm_lustre:equation>
        <vdm_lustre:equation>
          <vdm_lustre:lhs>
            <vdm_lustre:identifier>tasks</vdm_lustre:identifier>
          </vdm_lustre:lhs>
          <vdm_lustre:rhs>
            <vdm_lustre:recordLiteral
              vdm_lustre:recordType="Tasks">
              <vdm_lustre:fieldDefinition>
                <vdm_lustre:fieldIdentifier>task1</vdm_lustre:fieldIdentifier>
                <vdm_lustre:fieldValue>
                  <vdm_lustre:identifier>t1</vdm_lustre:identifier>
                </vdm_lustre:fieldValue>
              </vdm_lustre:fieldDefinition>
              <vdm_lustre:fieldDefinition>
                <vdm_lustre:fieldIdentifier>task2</vdm_lustre:fieldIdentifier>
                <vdm_lustre:fieldValue>
                  <vdm_lustre:identifier>t2</vdm_lustre:identifier>
                </vdm_lustre:fieldValue>
              </vdm_lustre:fieldDefinition>
              <vdm_lustre:fieldDefinition>
                <vdm_lustre:fieldIdentifier>task3</vdm_lustre:fieldIdentifier>
                <vdm_lustre:fieldValue>
                  <vdm_lustre:identifier>t3</vdm_lustre:identifier>
                </vdm_lustre:fieldValue>
              </vdm_lustre:fieldDefinition>
            </vdm_lustre:recordLiteral>
          </vdm_lustre:rhs>
        </vdm_lustre:equation>
      </vdm_lustre:body>
    </vdm_lustre:nodeDeclaration>
    <vdm_lustre:nodeDeclaration>
      <vdm_lustre:name>Mixer</vdm_lustre:name>
      <vdm_lustre:inputParameter>
        <vdm_lustre:name>mstate</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>UAVState</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:inputParameter>
      <vdm_lustre:inputParameter>
        <vdm_lustre:name>moveRC</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>Movement</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:inputParameter>
      <vdm_lustre:inputParameter>
        <vdm_lustre:name>moveNav</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>Movement</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:inputParameter>
      <vdm_lustre:inputParameter>
        <vdm_lustre:name>currentDir</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>Direction</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:inputParameter>
      <vdm_lustre:outputParameter>
        <vdm_lustre:name>cmd</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>MotorCommand</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:outputParameter>
      <vdm_lustre:body>
        <vdm_lustre:variableDeclaration>
          <vdm_lustre:name>move</vdm_lustre:name>
          <vdm_lustre:dataType>
            <vdm_data:userDefinedType>Movement</vdm_data:userDefinedType>
          </vdm_lustre:dataType>
        </vdm_lustre:variableDeclaration>
        <vdm_lustre:equation>
          <vdm_lustre:lhs>
            <vdm_lustre:identifier>move</vdm_lustre:identifier>
          </vdm_lustre:lhs>
          <vdm_lustre:rhs>
            <vdm_lustre:conditionalExpression>
              <vdm_lustre:condition>
                <vdm_lustre:equal>
                  <vdm_lustre:lhsOperand>
                    <vdm_lustre:identifier>mstate</vdm_lustre:identifier>
                  </vdm_lustre:lhsOperand>
                  <vdm_lustre:rhsOperand>
                    <vdm_lustre:identifier>s_MANUAL_FLIGHT_MODE</vdm_lustre:identifier>
                  </vdm_lustre:rhsOperand>
                </vdm_lustre:equal>
              </vdm_lustre:condition>
              <vdm_lustre:thenBranch>
                <vdm_lustre:identifier>moveRC</vdm_lustre:identifier>
              </vdm_lustre:thenBranch>
              <vdm_lustre:elseBranch>
                <vdm_lustre:identifier>moveNav</vdm_lustre:identifier>
              </vdm_lustre:elseBranch>
            </vdm_lustre:conditionalExpression>
          </vdm_lustre:rhs>
        </vdm_lustre:equation>
        <vdm_lustre:equation>
          <vdm_lustre:lhs>
            <vdm_lustre:identifier>cmd</vdm_lustre:identifier>
          </vdm_lustre:lhs>
          <vdm_lustre:rhs>
            <vdm_lustre:conditionalExpression>
              <vdm_lustre:condition>
                <vdm_lustre:equal>
                  <vdm_lustre:lhsOperand>
                    <vdm_lustre:equal>
                      <vdm_lustre:lhsOperand>
                        <vdm_lustre:identifier>move</vdm_lustre:identifier>
                      </vdm_lustre:lhsOperand>
                      <vdm_lustre:rhsOperand>
                        <vdm_lustre:and>
                          <vdm_lustre:lhsOperand>
                            <vdm_lustre:identifier>Move_Forward</vdm_lustre:identifier>
                          </vdm_lustre:lhsOperand>
                          <vdm_lustre:rhsOperand>
                            <vdm_lustre:identifier>currentDir</vdm_lustre:identifier>
                          </vdm_lustre:rhsOperand>
                        </vdm_lustre:and>
                      </vdm_lustre:rhsOperand>
                    </vdm_lustre:equal>
                  </vdm_lustre:lhsOperand>
                  <vdm_lustre:rhsOperand>
                    <vdm_lustre:identifier>North</vdm_lustre:identifier>
                  </vdm_lustre:rhsOperand>
                </vdm_lustre:equal>
              </vdm_lustre:condition>
              <vdm_lustre:thenBranch>
                <vdm_lustre:identifier>IncreaseY</vdm_lustre:identifier>
              </vdm_lustre:thenBranch>
              <vdm_lustre:elseBranch>
                <vdm_lustre:conditionalExpression>
                  <vdm_lustre:condition>
                    <vdm_lustre:equal>
                      <vdm_lustre:lhsOperand>
                        <vdm_lustre:equal>
                          <vdm_lustre:lhsOperand>
                            <vdm_lustre:identifier>move</vdm_lustre:identifier>
                          </vdm_lustre:lhsOperand>
                          <vdm_lustre:rhsOperand>
                            <vdm_lustre:and>
                              <vdm_lustre:lhsOperand>
                                <vdm_lustre:identifier>Move_Forward</vdm_lustre:identifier>
                              </vdm_lustre:lhsOperand>
                              <vdm_lustre:rhsOperand>
                                <vdm_lustre:identifier>currentDir</vdm_lustre:identifier>
                              </vdm_lustre:rhsOperand>
                            </vdm_lustre:and>
                          </vdm_lustre:rhsOperand>
                        </vdm_lustre:equal>
                      </vdm_lustre:lhsOperand>
                      <vdm_lustre:rhsOperand>
                        <vdm_lustre:identifier>South</vdm_lustre:identifier>
                      </vdm_lustre:rhsOperand>
                    </vdm_lustre:equal>
                  </vdm_lustre:condition>
                  <vdm_lustre:thenBranch>
                    <vdm_lustre:identifier>DecreaseY</vdm_lustre:identifier>
                  </vdm_lustre:thenBranch>
                  <vdm_lustre:elseBranch>
                    <vdm_lustre:conditionalExpression>
                      <vdm_lustre:condition>
                        <vdm_lustre:equal>
                          <vdm_lustre:lhsOperand>
                            <vdm_lustre:equal>
                              <vdm_lustre:lhsOperand>
                                <vdm_lustre:identifier>move</vdm_lustre:identifier>
                              </vdm_lustre:lhsOperand>
                              <vdm_lustre:rhsOperand>
                                <vdm_lustre:and>
                                  <vdm_lustre:lhsOperand>
                                    <vdm_lustre:identifier>Move_Forward</vdm_lustre:identifier>
                                  </vdm_lustre:lhsOperand>
                                  <vdm_lustre:rhsOperand>
                                    <vdm_lustre:identifier>currentDir</vdm_lustre:identifier>
                                  </vdm_lustre:rhsOperand>
                                </vdm_lustre:and>
                              </vdm_lustre:rhsOperand>
                            </vdm_lustre:equal>
                          </vdm_lustre:lhsOperand>
                          <vdm_lustre:rhsOperand>
                            <vdm_lustre:identifier>East</vdm_lustre:identifier>
                          </vdm_lustre:rhsOperand>
                        </vdm_lustre:equal>
                      </vdm_lustre:condition>
                      <vdm_lustre:thenBranch>
                        <vdm_lustre:identifier>IncreaseX</vdm_lustre:identifier>
                      </vdm_lustre:thenBranch>
                      <vdm_lustre:elseBranch>
                        <vdm_lustre:conditionalExpression>
                          <vdm_lustre:condition>
                            <vdm_lustre:equal>
                              <vdm_lustre:lhsOperand>
                                <vdm_lustre:equal>
                                  <vdm_lustre:lhsOperand>
                                    <vdm_lustre:identifier>move</vdm_lustre:identifier>
                                  </vdm_lustre:lhsOperand>
                                  <vdm_lustre:rhsOperand>
                                    <vdm_lustre:and>
                                      <vdm_lustre:lhsOperand>
                                        <vdm_lustre:identifier>Move_Forward</vdm_lustre:identifier>
                                      </vdm_lustre:lhsOperand>
                                      <vdm_lustre:rhsOperand>
                                        <vdm_lustre:identifier>currentDir</vdm_lustre:identifier>
                                      </vdm_lustre:rhsOperand>
                                    </vdm_lustre:and>
                                  </vdm_lustre:rhsOperand>
                                </vdm_lustre:equal>
                              </vdm_lustre:lhsOperand>
                              <vdm_lustre:rhsOperand>
                                <vdm_lustre:identifier>West</vdm_lustre:identifier>
                              </vdm_lustre:rhsOperand>
                            </vdm_lustre:equal>
                          </vdm_lustre:condition>
                          <vdm_lustre:thenBranch>
                            <vdm_lustre:identifier>DecreaseX</vdm_lustre:identifier>
                          </vdm_lustre:thenBranch>
                          <vdm_lustre:elseBranch>
                            <vdm_lustre:conditionalExpression>
                              <vdm_lustre:condition>
                                <vdm_lustre:equal>
                                  <vdm_lustre:lhsOperand>
                                    <vdm_lustre:equal>
                                      <vdm_lustre:lhsOperand>
                                        <vdm_lustre:identifier>move</vdm_lustre:identifier>
                                      </vdm_lustre:lhsOperand>
                                      <vdm_lustre:rhsOperand>
                                        <vdm_lustre:and>
                                          <vdm_lustre:lhsOperand>
                                            <vdm_lustre:identifier>Turn_Right</vdm_lustre:identifier>
                                          </vdm_lustre:lhsOperand>
                                          <vdm_lustre:rhsOperand>
                                            <vdm_lustre:identifier>currentDir</vdm_lustre:identifier>
                                          </vdm_lustre:rhsOperand>
                                        </vdm_lustre:and>
                                      </vdm_lustre:rhsOperand>
                                    </vdm_lustre:equal>
                                  </vdm_lustre:lhsOperand>
                                  <vdm_lustre:rhsOperand>
                                    <vdm_lustre:identifier>North</vdm_lustre:identifier>
                                  </vdm_lustre:rhsOperand>
                                </vdm_lustre:equal>
                              </vdm_lustre:condition>
                              <vdm_lustre:thenBranch>
                                <vdm_lustre:identifier>IncreaseYaw</vdm_lustre:identifier>
                              </vdm_lustre:thenBranch>
                              <vdm_lustre:elseBranch>
                                <vdm_lustre:conditionalExpression>
                                  <vdm_lustre:condition>
                                    <vdm_lustre:equal>
                                      <vdm_lustre:lhsOperand>
                                        <vdm_lustre:equal>
                                          <vdm_lustre:lhsOperand>
                                            <vdm_lustre:identifier>move</vdm_lustre:identifier>
                                          </vdm_lustre:lhsOperand>
                                          <vdm_lustre:rhsOperand>
                                            <vdm_lustre:and>
                                              <vdm_lustre:lhsOperand>
                                                <vdm_lustre:identifier>Turn_Right</vdm_lustre:identifier>
                                              </vdm_lustre:lhsOperand>
                                              <vdm_lustre:rhsOperand>
                                                <vdm_lustre:identifier>currentDir</vdm_lustre:identifier>
                                              </vdm_lustre:rhsOperand>
                                            </vdm_lustre:and>
                                          </vdm_lustre:rhsOperand>
                                        </vdm_lustre:equal>
                                      </vdm_lustre:lhsOperand>
                                      <vdm_lustre:rhsOperand>
                                        <vdm_lustre:identifier>East</vdm_lustre:identifier>
                                      </vdm_lustre:rhsOperand>
                                    </vdm_lustre:equal>
                                  </vdm_lustre:condition>
                                  <vdm_lustre:thenBranch>
                                    <vdm_lustre:identifier>IncreaseYaw</vdm_lustre:identifier>
                                  </vdm_lustre:thenBranch>
                                  <vdm_lustre:elseBranch>
                                    <vdm_lustre:conditionalExpression>
                                      <vdm_lustre:condition>
                                        <vdm_lustre:equal>
                                          <vdm_lustre:lhsOperand>
                                            <vdm_lustre:equal>
                                              <vdm_lustre:lhsOperand>
                                                <vdm_lustre:identifier>move</vdm_lustre:identifier>
                                              </vdm_lustre:lhsOperand>
                                              <vdm_lustre:rhsOperand>
                                                <vdm_lustre:and>
                                                  <vdm_lustre:lhsOperand>
                                                    <vdm_lustre:identifier>Turn_Right</vdm_lustre:identifier>
                                                  </vdm_lustre:lhsOperand>
                                                  <vdm_lustre:rhsOperand>
                                                    <vdm_lustre:identifier>currentDir</vdm_lustre:identifier>
                                                  </vdm_lustre:rhsOperand>
                                                </vdm_lustre:and>
                                              </vdm_lustre:rhsOperand>
                                            </vdm_lustre:equal>
                                          </vdm_lustre:lhsOperand>
                                          <vdm_lustre:rhsOperand>
                                            <vdm_lustre:identifier>South</vdm_lustre:identifier>
                                          </vdm_lustre:rhsOperand>
                                        </vdm_lustre:equal>
                                      </vdm_lustre:condition>
                                      <vdm_lustre:thenBranch>
                                        <vdm_lustre:identifier>IncreaseYaw</vdm_lustre:identifier>
                                      </vdm_lustre:thenBranch>
                                      <vdm_lustre:elseBranch>
                                        <vdm_lustre:conditionalExpression>
                                          <vdm_lustre:condition>
                                            <vdm_lustre:equal>
                                              <vdm_lustre:lhsOperand>
                                                <vdm_lustre:equal>
                                                  <vdm_lustre:lhsOperand>
                                                    <vdm_lustre:identifier>move</vdm_lustre:identifier>
                                                  </vdm_lustre:lhsOperand>
                                                  <vdm_lustre:rhsOperand>
                                                    <vdm_lustre:and>
                                                      <vdm_lustre:lhsOperand>
                                                        <vdm_lustre:identifier>Turn_Right</vdm_lustre:identifier>
                                                      </vdm_lustre:lhsOperand>
                                                      <vdm_lustre:rhsOperand>
                                                        <vdm_lustre:identifier>currentDir</vdm_lustre:identifier>
                                                      </vdm_lustre:rhsOperand>
                                                    </vdm_lustre:and>
                                                  </vdm_lustre:rhsOperand>
                                                </vdm_lustre:equal>
                                              </vdm_lustre:lhsOperand>
                                              <vdm_lustre:rhsOperand>
                                                <vdm_lustre:identifier>West</vdm_lustre:identifier>
                                              </vdm_lustre:rhsOperand>
                                            </vdm_lustre:equal>
                                          </vdm_lustre:condition>
                                          <vdm_lustre:thenBranch>
                                            <vdm_lustre:identifier>IncreaseYaw</vdm_lustre:identifier>
                                          </vdm_lustre:thenBranch>
                                          <vdm_lustre:elseBranch>
                                            <vdm_lustre:conditionalExpression>
                                              <vdm_lustre:condition>
                                                <vdm_lustre:equal>
                                                  <vdm_lustre:lhsOperand>
                                                    <vdm_lustre:equal>
                                                      <vdm_lustre:lhsOperand>
                                                        <vdm_lustre:identifier>move</vdm_lustre:identifier>
                                                      </vdm_lustre:lhsOperand>
                                                      <vdm_lustre:rhsOperand>
                                                        <vdm_lustre:and>
                                                          <vdm_lustre:lhsOperand>
                                                            <vdm_lustre:identifier>Turn_Left</vdm_lustre:identifier>
                                                          </vdm_lustre:lhsOperand>
                                                          <vdm_lustre:rhsOperand>
                                                            <vdm_lustre:identifier>currentDir</vdm_lustre:identifier>
                                                          </vdm_lustre:rhsOperand>
                                                        </vdm_lustre:and>
                                                      </vdm_lustre:rhsOperand>
                                                    </vdm_lustre:equal>
                                                  </vdm_lustre:lhsOperand>
                                                  <vdm_lustre:rhsOperand>
                                                    <vdm_lustre:identifier>North</vdm_lustre:identifier>
                                                  </vdm_lustre:rhsOperand>
                                                </vdm_lustre:equal>
                                              </vdm_lustre:condition>
                                              <vdm_lustre:thenBranch>
                                                <vdm_lustre:identifier>DecreaseYaw</vdm_lustre:identifier>
                                              </vdm_lustre:thenBranch>
                                              <vdm_lustre:elseBranch>
                                                <vdm_lustre:conditionalExpression>
                                                  <vdm_lustre:condition>
                                                    <vdm_lustre:equal>
                                                      <vdm_lustre:lhsOperand>
                                                        <vdm_lustre:equal>
                                                          <vdm_lustre:lhsOperand>
                                                            <vdm_lustre:identifier>move</vdm_lustre:identifier>
                                                          </vdm_lustre:lhsOperand>
                                                          <vdm_lustre:rhsOperand>
                                                            <vdm_lustre:and>
                                                              <vdm_lustre:lhsOperand>
                                                                <vdm_lustre:identifier>Turn_Left</vdm_lustre:identifier>
                                                              </vdm_lustre:lhsOperand>
                                                              <vdm_lustre:rhsOperand>
                                                                <vdm_lustre:identifier>currentDir</vdm_lustre:identifier>
                                                              </vdm_lustre:rhsOperand>
                                                            </vdm_lustre:and>
                                                          </vdm_lustre:rhsOperand>
                                                        </vdm_lustre:equal>
                                                      </vdm_lustre:lhsOperand>
                                                      <vdm_lustre:rhsOperand>
                                                        <vdm_lustre:identifier>West</vdm_lustre:identifier>
                                                      </vdm_lustre:rhsOperand>
                                                    </vdm_lustre:equal>
                                                  </vdm_lustre:condition>
                                                  <vdm_lustre:thenBranch>
                                                    <vdm_lustre:identifier>DecreaseYaw</vdm_lustre:identifier>
                                                  </vdm_lustre:thenBranch>
                                                  <vdm_lustre:elseBranch>
                                                    <vdm_lustre:conditionalExpression>
                                                      <vdm_lustre:condition>
                                                        <vdm_lustre:equal>
                                                          <vdm_lustre:lhsOperand>
                                                            <vdm_lustre:equal>
                                                              <vdm_lustre:lhsOperand>
                                                                <vdm_lustre:identifier>move</vdm_lustre:identifier>
                                                              </vdm_lustre:lhsOperand>
                                                              <vdm_lustre:rhsOperand>
                                                                <vdm_lustre:and>
                                                                  <vdm_lustre:lhsOperand>
                                                                    <vdm_lustre:identifier>Turn_Left</vdm_lustre:identifier>
                                                                  </vdm_lustre:lhsOperand>
                                                                  <vdm_lustre:rhsOperand>
                                                                    <vdm_lustre:identifier>currentDir</vdm_lustre:identifier>
                                                                  </vdm_lustre:rhsOperand>
                                                                </vdm_lustre:and>
                                                              </vdm_lustre:rhsOperand>
                                                            </vdm_lustre:equal>
                                                          </vdm_lustre:lhsOperand>
                                                          <vdm_lustre:rhsOperand>
                                                            <vdm_lustre:identifier>South</vdm_lustre:identifier>
                                                          </vdm_lustre:rhsOperand>
                                                        </vdm_lustre:equal>
                                                      </vdm_lustre:condition>
                                                      <vdm_lustre:thenBranch>
                                                        <vdm_lustre:identifier>DecreaseYaw</vdm_lustre:identifier>
                                                      </vdm_lustre:thenBranch>
                                                      <vdm_lustre:elseBranch>
                                                        <vdm_lustre:conditionalExpression>
                                                          <vdm_lustre:condition>
                                                            <vdm_lustre:equal>
                                                              <vdm_lustre:lhsOperand>
                                                                <vdm_lustre:equal>
                                                                  <vdm_lustre:lhsOperand>
                                                                    <vdm_lustre:identifier>move</vdm_lustre:identifier>
                                                                  </vdm_lustre:lhsOperand>
                                                                  <vdm_lustre:rhsOperand>
                                                                    <vdm_lustre:and>
                                                                      <vdm_lustre:lhsOperand>
                                                                        <vdm_lustre:identifier>Turn_Left</vdm_lustre:identifier>
                                                                      </vdm_lustre:lhsOperand>
                                                                      <vdm_lustre:rhsOperand>
                                                                        <vdm_lustre:identifier>currentDir</vdm_lustre:identifier>
                                                                      </vdm_lustre:rhsOperand>
                                                                    </vdm_lustre:and>
                                                                  </vdm_lustre:rhsOperand>
                                                                </vdm_lustre:equal>
                                                              </vdm_lustre:lhsOperand>
                                                              <vdm_lustre:rhsOperand>
                                                                <vdm_lustre:identifier>East</vdm_lustre:identifier>
                                                              </vdm_lustre:rhsOperand>
                                                            </vdm_lustre:equal>
                                                          </vdm_lustre:condition>
                                                          <vdm_lustre:thenBranch>
                                                            <vdm_lustre:identifier>DecreaseYaw</vdm_lustre:identifier>
                                                          </vdm_lustre:thenBranch>
                                                          <vdm_lustre:elseBranch>
                                                            <vdm_lustre:identifier>NoChange</vdm_lustre:identifier>
                                                          </vdm_lustre:elseBranch>
                                                        </vdm_lustre:conditionalExpression>
                                                      </vdm_lustre:elseBranch>
                                                    </vdm_lustre:conditionalExpression>
                                                  </vdm_lustre:elseBranch>
                                                </vdm_lustre:conditionalExpression>
                                              </vdm_lustre:elseBranch>
                                            </vdm_lustre:conditionalExpression>
                                          </vdm_lustre:elseBranch>
                                        </vdm_lustre:conditionalExpression>
                                      </vdm_lustre:elseBranch>
                                    </vdm_lustre:conditionalExpression>
                                  </vdm_lustre:elseBranch>
                                </vdm_lustre:conditionalExpression>
                              </vdm_lustre:elseBranch>
                            </vdm_lustre:conditionalExpression>
                          </vdm_lustre:elseBranch>
                        </vdm_lustre:conditionalExpression>
                      </vdm_lustre:elseBranch>
                    </vdm_lustre:conditionalExpression>
                  </vdm_lustre:elseBranch>
                </vdm_lustre:conditionalExpression>
              </vdm_lustre:elseBranch>
            </vdm_lustre:conditionalExpression>
          </vdm_lustre:rhs>
        </vdm_lustre:equation>
      </vdm_lustre:body>
    </vdm_lustre:nodeDeclaration>
    <vdm_lustre:nodeDeclaration>
      <vdm_lustre:name>Navigator</vdm_lustre:name>
      <vdm_lustre:inputParameter>
        <vdm_lustre:name>currentPos</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>Position</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:inputParameter>
      <vdm_lustre:inputParameter>
        <vdm_lustre:name>waypointPos</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>Position</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:inputParameter>
      <vdm_lustre:inputParameter>
        <vdm_lustre:name>currentDir</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>Direction</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:inputParameter>
      <vdm_lustre:outputParameter>
        <vdm_lustre:name>move</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>Movement</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:outputParameter>
      <vdm_lustre:outputParameter>
        <vdm_lustre:name>desReached</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:plainType>bool</vdm_data:plainType>
        </vdm_lustre:dataType>
      </vdm_lustre:outputParameter>
      <vdm_lustre:body>
        <vdm_lustre:equation>
          <vdm_lustre:lhs>
            <vdm_lustre:identifier>move</vdm_lustre:identifier>
          </vdm_lustre:lhs>
          <vdm_lustre:rhs>
            <vdm_lustre:conditionalExpression>
              <vdm_lustre:condition>
                <vdm_lustre:expressionList>
                  <vdm_lustre:expression>
                    <vdm_lustre:recordProjection>
                      <vdm_lustre:recordReference>
                        <vdm_lustre:greaterThan>
                          <vdm_lustre:lhsOperand>
                            <vdm_lustre:recordProjection>
                              <vdm_lustre:recordReference>
                                <vdm_lustre:equal>
                                  <vdm_lustre:lhsOperand>
                                    <vdm_lustre:identifier>currentDir</vdm_lustre:identifier>
                                  </vdm_lustre:lhsOperand>
                                  <vdm_lustre:rhsOperand>
                                    <vdm_lustre:and>
                                      <vdm_lustre:lhsOperand>
                                        <vdm_lustre:identifier>North</vdm_lustre:identifier>
                                      </vdm_lustre:lhsOperand>
                                      <vdm_lustre:rhsOperand>
                                        <vdm_lustre:identifier>waypointPos</vdm_lustre:identifier>
                                      </vdm_lustre:rhsOperand>
                                    </vdm_lustre:and>
                                  </vdm_lustre:rhsOperand>
                                </vdm_lustre:equal>
                              </vdm_lustre:recordReference>
                              <vdm_lustre:fieldId>y</vdm_lustre:fieldId>
                            </vdm_lustre:recordProjection>
                          </vdm_lustre:lhsOperand>
                          <vdm_lustre:rhsOperand>
                            <vdm_lustre:identifier>currentPos</vdm_lustre:identifier>
                          </vdm_lustre:rhsOperand>
                        </vdm_lustre:greaterThan>
                      </vdm_lustre:recordReference>
                      <vdm_lustre:fieldId>y</vdm_lustre:fieldId>
                    </vdm_lustre:recordProjection>
                  </vdm_lustre:expression>
                </vdm_lustre:expressionList>
              </vdm_lustre:condition>
              <vdm_lustre:thenBranch>
                <vdm_lustre:identifier>Move_Forward</vdm_lustre:identifier>
              </vdm_lustre:thenBranch>
              <vdm_lustre:elseBranch>
                <vdm_lustre:conditionalExpression>
                  <vdm_lustre:condition>
                    <vdm_lustre:expressionList>
                      <vdm_lustre:expression>
                        <vdm_lustre:recordProjection>
                          <vdm_lustre:recordReference>
                            <vdm_lustre:lessThan>
                              <vdm_lustre:lhsOperand>
                                <vdm_lustre:recordProjection>
                                  <vdm_lustre:recordReference>
                                    <vdm_lustre:equal>
                                      <vdm_lustre:lhsOperand>
                                        <vdm_lustre:identifier>currentDir</vdm_lustre:identifier>
                                      </vdm_lustre:lhsOperand>
                                      <vdm_lustre:rhsOperand>
                                        <vdm_lustre:and>
                                          <vdm_lustre:lhsOperand>
                                            <vdm_lustre:identifier>South</vdm_lustre:identifier>
                                          </vdm_lustre:lhsOperand>
                                          <vdm_lustre:rhsOperand>
                                            <vdm_lustre:identifier>waypointPos</vdm_lustre:identifier>
                                          </vdm_lustre:rhsOperand>
                                        </vdm_lustre:and>
                                      </vdm_lustre:rhsOperand>
                                    </vdm_lustre:equal>
                                  </vdm_lustre:recordReference>
                                  <vdm_lustre:fieldId>y</vdm_lustre:fieldId>
                                </vdm_lustre:recordProjection>
                              </vdm_lustre:lhsOperand>
                              <vdm_lustre:rhsOperand>
                                <vdm_lustre:identifier>currentPos</vdm_lustre:identifier>
                              </vdm_lustre:rhsOperand>
                            </vdm_lustre:lessThan>
                          </vdm_lustre:recordReference>
                          <vdm_lustre:fieldId>y</vdm_lustre:fieldId>
                        </vdm_lustre:recordProjection>
                      </vdm_lustre:expression>
                    </vdm_lustre:expressionList>
                  </vdm_lustre:condition>
                  <vdm_lustre:thenBranch>
                    <vdm_lustre:identifier>Move_Forward</vdm_lustre:identifier>
                  </vdm_lustre:thenBranch>
                  <vdm_lustre:elseBranch>
                    <vdm_lustre:conditionalExpression>
                      <vdm_lustre:condition>
                        <vdm_lustre:expressionList>
                          <vdm_lustre:expression>
                            <vdm_lustre:recordProjection>
                              <vdm_lustre:recordReference>
                                <vdm_lustre:greaterThan>
                                  <vdm_lustre:lhsOperand>
                                    <vdm_lustre:recordProjection>
                                      <vdm_lustre:recordReference>
                                        <vdm_lustre:equal>
                                          <vdm_lustre:lhsOperand>
                                            <vdm_lustre:identifier>currentDir</vdm_lustre:identifier>
                                          </vdm_lustre:lhsOperand>
                                          <vdm_lustre:rhsOperand>
                                            <vdm_lustre:and>
                                              <vdm_lustre:lhsOperand>
                                                <vdm_lustre:identifier>East</vdm_lustre:identifier>
                                              </vdm_lustre:lhsOperand>
                                              <vdm_lustre:rhsOperand>
                                                <vdm_lustre:identifier>waypointPos</vdm_lustre:identifier>
                                              </vdm_lustre:rhsOperand>
                                            </vdm_lustre:and>
                                          </vdm_lustre:rhsOperand>
                                        </vdm_lustre:equal>
                                      </vdm_lustre:recordReference>
                                      <vdm_lustre:fieldId>x</vdm_lustre:fieldId>
                                    </vdm_lustre:recordProjection>
                                  </vdm_lustre:lhsOperand>
                                  <vdm_lustre:rhsOperand>
                                    <vdm_lustre:identifier>currentPos</vdm_lustre:identifier>
                                  </vdm_lustre:rhsOperand>
                                </vdm_lustre:greaterThan>
                              </vdm_lustre:recordReference>
                              <vdm_lustre:fieldId>x</vdm_lustre:fieldId>
                            </vdm_lustre:recordProjection>
                          </vdm_lustre:expression>
                        </vdm_lustre:expressionList>
                      </vdm_lustre:condition>
                      <vdm_lustre:thenBranch>
                        <vdm_lustre:identifier>Move_Forward</vdm_lustre:identifier>
                      </vdm_lustre:thenBranch>
                      <vdm_lustre:elseBranch>
                        <vdm_lustre:conditionalExpression>
                          <vdm_lustre:condition>
                            <vdm_lustre:expressionList>
                              <vdm_lustre:expression>
                                <vdm_lustre:recordProjection>
                                  <vdm_lustre:recordReference>
                                    <vdm_lustre:lessThan>
                                      <vdm_lustre:lhsOperand>
                                        <vdm_lustre:recordProjection>
                                          <vdm_lustre:recordReference>
                                            <vdm_lustre:equal>
                                              <vdm_lustre:lhsOperand>
                                                <vdm_lustre:identifier>currentDir</vdm_lustre:identifier>
                                              </vdm_lustre:lhsOperand>
                                              <vdm_lustre:rhsOperand>
                                                <vdm_lustre:and>
                                                  <vdm_lustre:lhsOperand>
                                                    <vdm_lustre:identifier>West</vdm_lustre:identifier>
                                                  </vdm_lustre:lhsOperand>
                                                  <vdm_lustre:rhsOperand>
                                                    <vdm_lustre:identifier>waypointPos</vdm_lustre:identifier>
                                                  </vdm_lustre:rhsOperand>
                                                </vdm_lustre:and>
                                              </vdm_lustre:rhsOperand>
                                            </vdm_lustre:equal>
                                          </vdm_lustre:recordReference>
                                          <vdm_lustre:fieldId>x</vdm_lustre:fieldId>
                                        </vdm_lustre:recordProjection>
                                      </vdm_lustre:lhsOperand>
                                      <vdm_lustre:rhsOperand>
                                        <vdm_lustre:identifier>currentPos</vdm_lustre:identifier>
                                      </vdm_lustre:rhsOperand>
                                    </vdm_lustre:lessThan>
                                  </vdm_lustre:recordReference>
                                  <vdm_lustre:fieldId>x</vdm_lustre:fieldId>
                                </vdm_lustre:recordProjection>
                              </vdm_lustre:expression>
                            </vdm_lustre:expressionList>
                          </vdm_lustre:condition>
                          <vdm_lustre:thenBranch>
                            <vdm_lustre:identifier>Move_Forward</vdm_lustre:identifier>
                          </vdm_lustre:thenBranch>
                          <vdm_lustre:elseBranch>
                            <vdm_lustre:conditionalExpression>
                              <vdm_lustre:condition>
                                <vdm_lustre:expressionList>
                                  <vdm_lustre:expression>
                                    <vdm_lustre:recordProjection>
                                      <vdm_lustre:recordReference>
                                        <vdm_lustre:greaterThan>
                                          <vdm_lustre:lhsOperand>
                                            <vdm_lustre:recordProjection>
                                              <vdm_lustre:recordReference>
                                                <vdm_lustre:and>
                                                  <vdm_lustre:lhsOperand>
                                                    <vdm_lustre:recordProjection>
                                                      <vdm_lustre:recordReference>
                                                        <vdm_lustre:equal>
                                                          <vdm_lustre:lhsOperand>
                                                            <vdm_lustre:recordProjection>
                                                              <vdm_lustre:recordReference>
                                                                <vdm_lustre:equal>
                                                                  <vdm_lustre:lhsOperand>
                                                                    <vdm_lustre:identifier>currentDir</vdm_lustre:identifier>
                                                                  </vdm_lustre:lhsOperand>
                                                                  <vdm_lustre:rhsOperand>
                                                                    <vdm_lustre:and>
                                                                      <vdm_lustre:lhsOperand>
                                                                        <vdm_lustre:identifier>North</vdm_lustre:identifier>
                                                                      </vdm_lustre:lhsOperand>
                                                                      <vdm_lustre:rhsOperand>
                                                                        <vdm_lustre:identifier>waypointPos</vdm_lustre:identifier>
                                                                      </vdm_lustre:rhsOperand>
                                                                    </vdm_lustre:and>
                                                                  </vdm_lustre:rhsOperand>
                                                                </vdm_lustre:equal>
                                                              </vdm_lustre:recordReference>
                                                              <vdm_lustre:fieldId>y</vdm_lustre:fieldId>
                                                            </vdm_lustre:recordProjection>
                                                          </vdm_lustre:lhsOperand>
                                                          <vdm_lustre:rhsOperand>
                                                            <vdm_lustre:identifier>currentPos</vdm_lustre:identifier>
                                                          </vdm_lustre:rhsOperand>
                                                        </vdm_lustre:equal>
                                                      </vdm_lustre:recordReference>
                                                      <vdm_lustre:fieldId>y</vdm_lustre:fieldId>
                                                    </vdm_lustre:recordProjection>
                                                  </vdm_lustre:lhsOperand>
                                                  <vdm_lustre:rhsOperand>
                                                    <vdm_lustre:identifier>waypointPos</vdm_lustre:identifier>
                                                  </vdm_lustre:rhsOperand>
                                                </vdm_lustre:and>
                                              </vdm_lustre:recordReference>
                                              <vdm_lustre:fieldId>x</vdm_lustre:fieldId>
                                            </vdm_lustre:recordProjection>
                                          </vdm_lustre:lhsOperand>
                                          <vdm_lustre:rhsOperand>
                                            <vdm_lustre:identifier>currentPos</vdm_lustre:identifier>
                                          </vdm_lustre:rhsOperand>
                                        </vdm_lustre:greaterThan>
                                      </vdm_lustre:recordReference>
                                      <vdm_lustre:fieldId>x</vdm_lustre:fieldId>
                                    </vdm_lustre:recordProjection>
                                  </vdm_lustre:expression>
                                </vdm_lustre:expressionList>
                              </vdm_lustre:condition>
                              <vdm_lustre:thenBranch>
                                <vdm_lustre:identifier>Turn_Right</vdm_lustre:identifier>
                              </vdm_lustre:thenBranch>
                              <vdm_lustre:elseBranch>
                                <vdm_lustre:conditionalExpression>
                                  <vdm_lustre:condition>
                                    <vdm_lustre:expressionList>
                                      <vdm_lustre:expression>
                                        <vdm_lustre:recordProjection>
                                          <vdm_lustre:recordReference>
                                            <vdm_lustre:greaterThan>
                                              <vdm_lustre:lhsOperand>
                                                <vdm_lustre:recordProjection>
                                                  <vdm_lustre:recordReference>
                                                    <vdm_lustre:and>
                                                      <vdm_lustre:lhsOperand>
                                                        <vdm_lustre:recordProjection>
                                                          <vdm_lustre:recordReference>
                                                            <vdm_lustre:equal>
                                                              <vdm_lustre:lhsOperand>
                                                                <vdm_lustre:recordProjection>
                                                                  <vdm_lustre:recordReference>
                                                                    <vdm_lustre:equal>
                                                                      <vdm_lustre:lhsOperand>
                                                                        <vdm_lustre:identifier>currentDir</vdm_lustre:identifier>
                                                                      </vdm_lustre:lhsOperand>
                                                                      <vdm_lustre:rhsOperand>
                                                                        <vdm_lustre:and>
                                                                          <vdm_lustre:lhsOperand>
                                                                            <vdm_lustre:identifier>South</vdm_lustre:identifier>
                                                                          </vdm_lustre:lhsOperand>
                                                                          <vdm_lustre:rhsOperand>
                                                                            <vdm_lustre:identifier>waypointPos</vdm_lustre:identifier>
                                                                          </vdm_lustre:rhsOperand>
                                                                        </vdm_lustre:and>
                                                                      </vdm_lustre:rhsOperand>
                                                                    </vdm_lustre:equal>
                                                                  </vdm_lustre:recordReference>
                                                                  <vdm_lustre:fieldId>y</vdm_lustre:fieldId>
                                                                </vdm_lustre:recordProjection>
                                                              </vdm_lustre:lhsOperand>
                                                              <vdm_lustre:rhsOperand>
                                                                <vdm_lustre:identifier>currentPos</vdm_lustre:identifier>
                                                              </vdm_lustre:rhsOperand>
                                                            </vdm_lustre:equal>
                                                          </vdm_lustre:recordReference>
                                                          <vdm_lustre:fieldId>y</vdm_lustre:fieldId>
                                                        </vdm_lustre:recordProjection>
                                                      </vdm_lustre:lhsOperand>
                                                      <vdm_lustre:rhsOperand>
                                                        <vdm_lustre:identifier>waypointPos</vdm_lustre:identifier>
                                                      </vdm_lustre:rhsOperand>
                                                    </vdm_lustre:and>
                                                  </vdm_lustre:recordReference>
                                                  <vdm_lustre:fieldId>x</vdm_lustre:fieldId>
                                                </vdm_lustre:recordProjection>
                                              </vdm_lustre:lhsOperand>
                                              <vdm_lustre:rhsOperand>
                                                <vdm_lustre:identifier>currentPos</vdm_lustre:identifier>
                                              </vdm_lustre:rhsOperand>
                                            </vdm_lustre:greaterThan>
                                          </vdm_lustre:recordReference>
                                          <vdm_lustre:fieldId>x</vdm_lustre:fieldId>
                                        </vdm_lustre:recordProjection>
                                      </vdm_lustre:expression>
                                    </vdm_lustre:expressionList>
                                  </vdm_lustre:condition>
                                  <vdm_lustre:thenBranch>
                                    <vdm_lustre:identifier>Turn_Left</vdm_lustre:identifier>
                                  </vdm_lustre:thenBranch>
                                  <vdm_lustre:elseBranch>
                                    <vdm_lustre:conditionalExpression>
                                      <vdm_lustre:condition>
                                        <vdm_lustre:expressionList>
                                          <vdm_lustre:expression>
                                            <vdm_lustre:recordProjection>
                                              <vdm_lustre:recordReference>
                                                <vdm_lustre:greaterThan>
                                                  <vdm_lustre:lhsOperand>
                                                    <vdm_lustre:recordProjection>
                                                      <vdm_lustre:recordReference>
                                                        <vdm_lustre:and>
                                                          <vdm_lustre:lhsOperand>
                                                            <vdm_lustre:recordProjection>
                                                              <vdm_lustre:recordReference>
                                                                <vdm_lustre:equal>
                                                                  <vdm_lustre:lhsOperand>
                                                                    <vdm_lustre:recordProjection>
                                                                      <vdm_lustre:recordReference>
                                                                        <vdm_lustre:equal>
                                                                          <vdm_lustre:lhsOperand>
                                                                            <vdm_lustre:identifier>currentDir</vdm_lustre:identifier>
                                                                          </vdm_lustre:lhsOperand>
                                                                          <vdm_lustre:rhsOperand>
                                                                            <vdm_lustre:and>
                                                                              <vdm_lustre:lhsOperand>
                                                                                <vdm_lustre:identifier>West</vdm_lustre:identifier>
                                                                              </vdm_lustre:lhsOperand>
                                                                              <vdm_lustre:rhsOperand>
                                                                                <vdm_lustre:identifier>waypointPos</vdm_lustre:identifier>
                                                                              </vdm_lustre:rhsOperand>
                                                                            </vdm_lustre:and>
                                                                          </vdm_lustre:rhsOperand>
                                                                        </vdm_lustre:equal>
                                                                      </vdm_lustre:recordReference>
                                                                      <vdm_lustre:fieldId>y</vdm_lustre:fieldId>
                                                                    </vdm_lustre:recordProjection>
                                                                  </vdm_lustre:lhsOperand>
                                                                  <vdm_lustre:rhsOperand>
                                                                    <vdm_lustre:identifier>currentPos</vdm_lustre:identifier>
                                                                  </vdm_lustre:rhsOperand>
                                                                </vdm_lustre:equal>
                                                              </vdm_lustre:recordReference>
                                                              <vdm_lustre:fieldId>y</vdm_lustre:fieldId>
                                                            </vdm_lustre:recordProjection>
                                                          </vdm_lustre:lhsOperand>
                                                          <vdm_lustre:rhsOperand>
                                                            <vdm_lustre:identifier>waypointPos</vdm_lustre:identifier>
                                                          </vdm_lustre:rhsOperand>
                                                        </vdm_lustre:and>
                                                      </vdm_lustre:recordReference>
                                                      <vdm_lustre:fieldId>x</vdm_lustre:fieldId>
                                                    </vdm_lustre:recordProjection>
                                                  </vdm_lustre:lhsOperand>
                                                  <vdm_lustre:rhsOperand>
                                                    <vdm_lustre:identifier>currentPos</vdm_lustre:identifier>
                                                  </vdm_lustre:rhsOperand>
                                                </vdm_lustre:greaterThan>
                                              </vdm_lustre:recordReference>
                                              <vdm_lustre:fieldId>x</vdm_lustre:fieldId>
                                            </vdm_lustre:recordProjection>
                                          </vdm_lustre:expression>
                                        </vdm_lustre:expressionList>
                                      </vdm_lustre:condition>
                                      <vdm_lustre:thenBranch>
                                        <vdm_lustre:identifier>Turn_Right</vdm_lustre:identifier>
                                      </vdm_lustre:thenBranch>
                                      <vdm_lustre:elseBranch>
                                        <vdm_lustre:conditionalExpression>
                                          <vdm_lustre:condition>
                                            <vdm_lustre:expressionList>
                                              <vdm_lustre:expression>
                                                <vdm_lustre:recordProjection>
                                                  <vdm_lustre:recordReference>
                                                    <vdm_lustre:lessThan>
                                                      <vdm_lustre:lhsOperand>
                                                        <vdm_lustre:recordProjection>
                                                          <vdm_lustre:recordReference>
                                                            <vdm_lustre:and>
                                                              <vdm_lustre:lhsOperand>
                                                                <vdm_lustre:recordProjection>
                                                                  <vdm_lustre:recordReference>
                                                                    <vdm_lustre:equal>
                                                                      <vdm_lustre:lhsOperand>
                                                                        <vdm_lustre:recordProjection>
                                                                          <vdm_lustre:recordReference>
                                                                            <vdm_lustre:equal>
                                                                              <vdm_lustre:lhsOperand>
                                                                                <vdm_lustre:identifier>currentDir</vdm_lustre:identifier>
                                                                              </vdm_lustre:lhsOperand>
                                                                              <vdm_lustre:rhsOperand>
                                                                                <vdm_lustre:and>
                                                                                  <vdm_lustre:lhsOperand>
                                                                                    <vdm_lustre:identifier>North</vdm_lustre:identifier>
                                                                                  </vdm_lustre:lhsOperand>
                                                                                  <vdm_lustre:rhsOperand>
                                                                                    <vdm_lustre:identifier>waypointPos</vdm_lustre:identifier>
                                                                                  </vdm_lustre:rhsOperand>
                                                                                </vdm_lustre:and>
                                                                              </vdm_lustre:rhsOperand>
                                                                            </vdm_lustre:equal>
                                                                          </vdm_lustre:recordReference>
                                                                          <vdm_lustre:fieldId>y</vdm_lustre:fieldId>
                                                                        </vdm_lustre:recordProjection>
                                                                      </vdm_lustre:lhsOperand>
                                                                      <vdm_lustre:rhsOperand>
                                                                        <vdm_lustre:identifier>currentPos</vdm_lustre:identifier>
                                                                      </vdm_lustre:rhsOperand>
                                                                    </vdm_lustre:equal>
                                                                  </vdm_lustre:recordReference>
                                                                  <vdm_lustre:fieldId>y</vdm_lustre:fieldId>
                                                                </vdm_lustre:recordProjection>
                                                              </vdm_lustre:lhsOperand>
                                                              <vdm_lustre:rhsOperand>
                                                                <vdm_lustre:identifier>waypointPos</vdm_lustre:identifier>
                                                              </vdm_lustre:rhsOperand>
                                                            </vdm_lustre:and>
                                                          </vdm_lustre:recordReference>
                                                          <vdm_lustre:fieldId>x</vdm_lustre:fieldId>
                                                        </vdm_lustre:recordProjection>
                                                      </vdm_lustre:lhsOperand>
                                                      <vdm_lustre:rhsOperand>
                                                        <vdm_lustre:identifier>currentPos</vdm_lustre:identifier>
                                                      </vdm_lustre:rhsOperand>
                                                    </vdm_lustre:lessThan>
                                                  </vdm_lustre:recordReference>
                                                  <vdm_lustre:fieldId>x</vdm_lustre:fieldId>
                                                </vdm_lustre:recordProjection>
                                              </vdm_lustre:expression>
                                            </vdm_lustre:expressionList>
                                          </vdm_lustre:condition>
                                          <vdm_lustre:thenBranch>
                                            <vdm_lustre:identifier>Turn_Left</vdm_lustre:identifier>
                                          </vdm_lustre:thenBranch>
                                          <vdm_lustre:elseBranch>
                                            <vdm_lustre:conditionalExpression>
                                              <vdm_lustre:condition>
                                                <vdm_lustre:expressionList>
                                                  <vdm_lustre:expression>
                                                    <vdm_lustre:recordProjection>
                                                      <vdm_lustre:recordReference>
                                                        <vdm_lustre:lessThan>
                                                          <vdm_lustre:lhsOperand>
                                                            <vdm_lustre:recordProjection>
                                                              <vdm_lustre:recordReference>
                                                                <vdm_lustre:and>
                                                                  <vdm_lustre:lhsOperand>
                                                                    <vdm_lustre:recordProjection>
                                                                      <vdm_lustre:recordReference>
                                                                        <vdm_lustre:equal>
                                                                          <vdm_lustre:lhsOperand>
                                                                            <vdm_lustre:recordProjection>
                                                                              <vdm_lustre:recordReference>
                                                                                <vdm_lustre:equal>
                                                                                  <vdm_lustre:lhsOperand>
                                                                                    <vdm_lustre:identifier>currentDir</vdm_lustre:identifier>
                                                                                  </vdm_lustre:lhsOperand>
                                                                                  <vdm_lustre:rhsOperand>
                                                                                    <vdm_lustre:and>
                                                                                      <vdm_lustre:lhsOperand>
                                                                                        <vdm_lustre:identifier>South</vdm_lustre:identifier>
                                                                                      </vdm_lustre:lhsOperand>
                                                                                      <vdm_lustre:rhsOperand>
                                                                                        <vdm_lustre:identifier>waypointPos</vdm_lustre:identifier>
                                                                                      </vdm_lustre:rhsOperand>
                                                                                    </vdm_lustre:and>
                                                                                  </vdm_lustre:rhsOperand>
                                                                                </vdm_lustre:equal>
                                                                              </vdm_lustre:recordReference>
                                                                              <vdm_lustre:fieldId>y</vdm_lustre:fieldId>
                                                                            </vdm_lustre:recordProjection>
                                                                          </vdm_lustre:lhsOperand>
                                                                          <vdm_lustre:rhsOperand>
                                                                            <vdm_lustre:identifier>currentPos</vdm_lustre:identifier>
                                                                          </vdm_lustre:rhsOperand>
                                                                        </vdm_lustre:equal>
                                                                      </vdm_lustre:recordReference>
                                                                      <vdm_lustre:fieldId>y</vdm_lustre:fieldId>
                                                                    </vdm_lustre:recordProjection>
                                                                  </vdm_lustre:lhsOperand>
                                                                  <vdm_lustre:rhsOperand>
                                                                    <vdm_lustre:identifier>waypointPos</vdm_lustre:identifier>
                                                                  </vdm_lustre:rhsOperand>
                                                                </vdm_lustre:and>
                                                              </vdm_lustre:recordReference>
                                                              <vdm_lustre:fieldId>x</vdm_lustre:fieldId>
                                                            </vdm_lustre:recordProjection>
                                                          </vdm_lustre:lhsOperand>
                                                          <vdm_lustre:rhsOperand>
                                                            <vdm_lustre:identifier>currentPos</vdm_lustre:identifier>
                                                          </vdm_lustre:rhsOperand>
                                                        </vdm_lustre:lessThan>
                                                      </vdm_lustre:recordReference>
                                                      <vdm_lustre:fieldId>x</vdm_lustre:fieldId>
                                                    </vdm_lustre:recordProjection>
                                                  </vdm_lustre:expression>
                                                </vdm_lustre:expressionList>
                                              </vdm_lustre:condition>
                                              <vdm_lustre:thenBranch>
                                                <vdm_lustre:identifier>Turn_Right</vdm_lustre:identifier>
                                              </vdm_lustre:thenBranch>
                                              <vdm_lustre:elseBranch>
                                                <vdm_lustre:conditionalExpression>
                                                  <vdm_lustre:condition>
                                                    <vdm_lustre:expressionList>
                                                      <vdm_lustre:expression>
                                                        <vdm_lustre:recordProjection>
                                                          <vdm_lustre:recordReference>
                                                            <vdm_lustre:lessThan>
                                                              <vdm_lustre:lhsOperand>
                                                                <vdm_lustre:recordProjection>
                                                                  <vdm_lustre:recordReference>
                                                                    <vdm_lustre:and>
                                                                      <vdm_lustre:lhsOperand>
                                                                        <vdm_lustre:recordProjection>
                                                                          <vdm_lustre:recordReference>
                                                                            <vdm_lustre:equal>
                                                                              <vdm_lustre:lhsOperand>
                                                                                <vdm_lustre:recordProjection>
                                                                                  <vdm_lustre:recordReference>
                                                                                    <vdm_lustre:equal>
                                                                                      <vdm_lustre:lhsOperand>
                                                                                        <vdm_lustre:identifier>currentDir</vdm_lustre:identifier>
                                                                                      </vdm_lustre:lhsOperand>
                                                                                      <vdm_lustre:rhsOperand>
                                                                                        <vdm_lustre:and>
                                                                                          <vdm_lustre:lhsOperand>
                                                                                            <vdm_lustre:identifier>East</vdm_lustre:identifier>
                                                                                          </vdm_lustre:lhsOperand>
                                                                                          <vdm_lustre:rhsOperand>
                                                                                            <vdm_lustre:identifier>waypointPos</vdm_lustre:identifier>
                                                                                          </vdm_lustre:rhsOperand>
                                                                                        </vdm_lustre:and>
                                                                                      </vdm_lustre:rhsOperand>
                                                                                    </vdm_lustre:equal>
                                                                                  </vdm_lustre:recordReference>
                                                                                  <vdm_lustre:fieldId>y</vdm_lustre:fieldId>
                                                                                </vdm_lustre:recordProjection>
                                                                              </vdm_lustre:lhsOperand>
                                                                              <vdm_lustre:rhsOperand>
                                                                                <vdm_lustre:identifier>currentPos</vdm_lustre:identifier>
                                                                              </vdm_lustre:rhsOperand>
                                                                            </vdm_lustre:equal>
                                                                          </vdm_lustre:recordReference>
                                                                          <vdm_lustre:fieldId>y</vdm_lustre:fieldId>
                                                                        </vdm_lustre:recordProjection>
                                                                      </vdm_lustre:lhsOperand>
                                                                      <vdm_lustre:rhsOperand>
                                                                        <vdm_lustre:identifier>waypointPos</vdm_lustre:identifier>
                                                                      </vdm_lustre:rhsOperand>
                                                                    </vdm_lustre:and>
                                                                  </vdm_lustre:recordReference>
                                                                  <vdm_lustre:fieldId>x</vdm_lustre:fieldId>
                                                                </vdm_lustre:recordProjection>
                                                              </vdm_lustre:lhsOperand>
                                                              <vdm_lustre:rhsOperand>
                                                                <vdm_lustre:identifier>currentPos</vdm_lustre:identifier>
                                                              </vdm_lustre:rhsOperand>
                                                            </vdm_lustre:lessThan>
                                                          </vdm_lustre:recordReference>
                                                          <vdm_lustre:fieldId>x</vdm_lustre:fieldId>
                                                        </vdm_lustre:recordProjection>
                                                      </vdm_lustre:expression>
                                                    </vdm_lustre:expressionList>
                                                  </vdm_lustre:condition>
                                                  <vdm_lustre:thenBranch>
                                                    <vdm_lustre:identifier>Turn_Left</vdm_lustre:identifier>
                                                  </vdm_lustre:thenBranch>
                                                  <vdm_lustre:elseBranch>
                                                    <vdm_lustre:conditionalExpression>
                                                      <vdm_lustre:condition>
                                                        <vdm_lustre:expressionList>
                                                          <vdm_lustre:expression>
                                                            <vdm_lustre:recordProjection>
                                                              <vdm_lustre:recordReference>
                                                                <vdm_lustre:greaterThan>
                                                                  <vdm_lustre:lhsOperand>
                                                                    <vdm_lustre:recordProjection>
                                                                      <vdm_lustre:recordReference>
                                                                        <vdm_lustre:and>
                                                                          <vdm_lustre:lhsOperand>
                                                                            <vdm_lustre:recordProjection>
                                                                              <vdm_lustre:recordReference>
                                                                                <vdm_lustre:equal>
                                                                                  <vdm_lustre:lhsOperand>
                                                                                    <vdm_lustre:recordProjection>
                                                                                      <vdm_lustre:recordReference>
                                                                                        <vdm_lustre:equal>
                                                                                          <vdm_lustre:lhsOperand>
                                                                                            <vdm_lustre:identifier>currentDir</vdm_lustre:identifier>
                                                                                          </vdm_lustre:lhsOperand>
                                                                                          <vdm_lustre:rhsOperand>
                                                                                            <vdm_lustre:and>
                                                                                              <vdm_lustre:lhsOperand>
                                                                                                <vdm_lustre:identifier>South</vdm_lustre:identifier>
                                                                                              </vdm_lustre:lhsOperand>
                                                                                              <vdm_lustre:rhsOperand>
                                                                                                <vdm_lustre:identifier>waypointPos</vdm_lustre:identifier>
                                                                                              </vdm_lustre:rhsOperand>
                                                                                            </vdm_lustre:and>
                                                                                          </vdm_lustre:rhsOperand>
                                                                                        </vdm_lustre:equal>
                                                                                      </vdm_lustre:recordReference>
                                                                                      <vdm_lustre:fieldId>x</vdm_lustre:fieldId>
                                                                                    </vdm_lustre:recordProjection>
                                                                                  </vdm_lustre:lhsOperand>
                                                                                  <vdm_lustre:rhsOperand>
                                                                                    <vdm_lustre:identifier>currentPos</vdm_lustre:identifier>
                                                                                  </vdm_lustre:rhsOperand>
                                                                                </vdm_lustre:equal>
                                                                              </vdm_lustre:recordReference>
                                                                              <vdm_lustre:fieldId>x</vdm_lustre:fieldId>
                                                                            </vdm_lustre:recordProjection>
                                                                          </vdm_lustre:lhsOperand>
                                                                          <vdm_lustre:rhsOperand>
                                                                            <vdm_lustre:identifier>waypointPos</vdm_lustre:identifier>
                                                                          </vdm_lustre:rhsOperand>
                                                                        </vdm_lustre:and>
                                                                      </vdm_lustre:recordReference>
                                                                      <vdm_lustre:fieldId>y</vdm_lustre:fieldId>
                                                                    </vdm_lustre:recordProjection>
                                                                  </vdm_lustre:lhsOperand>
                                                                  <vdm_lustre:rhsOperand>
                                                                    <vdm_lustre:identifier>currentPos</vdm_lustre:identifier>
                                                                  </vdm_lustre:rhsOperand>
                                                                </vdm_lustre:greaterThan>
                                                              </vdm_lustre:recordReference>
                                                              <vdm_lustre:fieldId>y</vdm_lustre:fieldId>
                                                            </vdm_lustre:recordProjection>
                                                          </vdm_lustre:expression>
                                                        </vdm_lustre:expressionList>
                                                      </vdm_lustre:condition>
                                                      <vdm_lustre:thenBranch>
                                                        <vdm_lustre:identifier>Turn_Right</vdm_lustre:identifier>
                                                      </vdm_lustre:thenBranch>
                                                      <vdm_lustre:elseBranch>
                                                        <vdm_lustre:conditionalExpression>
                                                          <vdm_lustre:condition>
                                                            <vdm_lustre:expressionList>
                                                              <vdm_lustre:expression>
                                                                <vdm_lustre:recordProjection>
                                                                  <vdm_lustre:recordReference>
                                                                    <vdm_lustre:greaterThan>
                                                                      <vdm_lustre:lhsOperand>
                                                                        <vdm_lustre:recordProjection>
                                                                          <vdm_lustre:recordReference>
                                                                            <vdm_lustre:and>
                                                                              <vdm_lustre:lhsOperand>
                                                                                <vdm_lustre:recordProjection>
                                                                                  <vdm_lustre:recordReference>
                                                                                    <vdm_lustre:equal>
                                                                                      <vdm_lustre:lhsOperand>
                                                                                        <vdm_lustre:recordProjection>
                                                                                          <vdm_lustre:recordReference>
                                                                                            <vdm_lustre:equal>
                                                                                              <vdm_lustre:lhsOperand>
                                                                                                <vdm_lustre:identifier>currentDir</vdm_lustre:identifier>
                                                                                              </vdm_lustre:lhsOperand>
                                                                                              <vdm_lustre:rhsOperand>
                                                                                                <vdm_lustre:and>
                                                                                                  <vdm_lustre:lhsOperand>
                                                                                                    <vdm_lustre:identifier>West</vdm_lustre:identifier>
                                                                                                  </vdm_lustre:lhsOperand>
                                                                                                  <vdm_lustre:rhsOperand>
                                                                                                    <vdm_lustre:identifier>waypointPos</vdm_lustre:identifier>
                                                                                                  </vdm_lustre:rhsOperand>
                                                                                                </vdm_lustre:and>
                                                                                              </vdm_lustre:rhsOperand>
                                                                                            </vdm_lustre:equal>
                                                                                          </vdm_lustre:recordReference>
                                                                                          <vdm_lustre:fieldId>x</vdm_lustre:fieldId>
                                                                                        </vdm_lustre:recordProjection>
                                                                                      </vdm_lustre:lhsOperand>
                                                                                      <vdm_lustre:rhsOperand>
                                                                                        <vdm_lustre:identifier>currentPos</vdm_lustre:identifier>
                                                                                      </vdm_lustre:rhsOperand>
                                                                                    </vdm_lustre:equal>
                                                                                  </vdm_lustre:recordReference>
                                                                                  <vdm_lustre:fieldId>x</vdm_lustre:fieldId>
                                                                                </vdm_lustre:recordProjection>
                                                                              </vdm_lustre:lhsOperand>
                                                                              <vdm_lustre:rhsOperand>
                                                                                <vdm_lustre:identifier>waypointPos</vdm_lustre:identifier>
                                                                              </vdm_lustre:rhsOperand>
                                                                            </vdm_lustre:and>
                                                                          </vdm_lustre:recordReference>
                                                                          <vdm_lustre:fieldId>y</vdm_lustre:fieldId>
                                                                        </vdm_lustre:recordProjection>
                                                                      </vdm_lustre:lhsOperand>
                                                                      <vdm_lustre:rhsOperand>
                                                                        <vdm_lustre:identifier>currentPos</vdm_lustre:identifier>
                                                                      </vdm_lustre:rhsOperand>
                                                                    </vdm_lustre:greaterThan>
                                                                  </vdm_lustre:recordReference>
                                                                  <vdm_lustre:fieldId>y</vdm_lustre:fieldId>
                                                                </vdm_lustre:recordProjection>
                                                              </vdm_lustre:expression>
                                                            </vdm_lustre:expressionList>
                                                          </vdm_lustre:condition>
                                                          <vdm_lustre:thenBranch>
                                                            <vdm_lustre:identifier>Turn_Right</vdm_lustre:identifier>
                                                          </vdm_lustre:thenBranch>
                                                          <vdm_lustre:elseBranch>
                                                            <vdm_lustre:conditionalExpression>
                                                              <vdm_lustre:condition>
                                                                <vdm_lustre:expressionList>
                                                                  <vdm_lustre:expression>
                                                                    <vdm_lustre:recordProjection>
                                                                      <vdm_lustre:recordReference>
                                                                        <vdm_lustre:greaterThan>
                                                                          <vdm_lustre:lhsOperand>
                                                                            <vdm_lustre:recordProjection>
                                                                              <vdm_lustre:recordReference>
                                                                                <vdm_lustre:and>
                                                                                  <vdm_lustre:lhsOperand>
                                                                                    <vdm_lustre:recordProjection>
                                                                                      <vdm_lustre:recordReference>
                                                                                        <vdm_lustre:equal>
                                                                                          <vdm_lustre:lhsOperand>
                                                                                            <vdm_lustre:recordProjection>
                                                                                              <vdm_lustre:recordReference>
                                                                                                <vdm_lustre:equal>
                                                                                                  <vdm_lustre:lhsOperand>
                                                                                                    <vdm_lustre:identifier>currentDir</vdm_lustre:identifier>
                                                                                                  </vdm_lustre:lhsOperand>
                                                                                                  <vdm_lustre:rhsOperand>
                                                                                                    <vdm_lustre:and>
                                                                                                      <vdm_lustre:lhsOperand>
                                                                                                        <vdm_lustre:identifier>East</vdm_lustre:identifier>
                                                                                                      </vdm_lustre:lhsOperand>
                                                                                                      <vdm_lustre:rhsOperand>
                                                                                                        <vdm_lustre:identifier>waypointPos</vdm_lustre:identifier>
                                                                                                      </vdm_lustre:rhsOperand>
                                                                                                    </vdm_lustre:and>
                                                                                                  </vdm_lustre:rhsOperand>
                                                                                                </vdm_lustre:equal>
                                                                                              </vdm_lustre:recordReference>
                                                                                              <vdm_lustre:fieldId>x</vdm_lustre:fieldId>
                                                                                            </vdm_lustre:recordProjection>
                                                                                          </vdm_lustre:lhsOperand>
                                                                                          <vdm_lustre:rhsOperand>
                                                                                            <vdm_lustre:identifier>currentPos</vdm_lustre:identifier>
                                                                                          </vdm_lustre:rhsOperand>
                                                                                        </vdm_lustre:equal>
                                                                                      </vdm_lustre:recordReference>
                                                                                      <vdm_lustre:fieldId>x</vdm_lustre:fieldId>
                                                                                    </vdm_lustre:recordProjection>
                                                                                  </vdm_lustre:lhsOperand>
                                                                                  <vdm_lustre:rhsOperand>
                                                                                    <vdm_lustre:identifier>waypointPos</vdm_lustre:identifier>
                                                                                  </vdm_lustre:rhsOperand>
                                                                                </vdm_lustre:and>
                                                                              </vdm_lustre:recordReference>
                                                                              <vdm_lustre:fieldId>y</vdm_lustre:fieldId>
                                                                            </vdm_lustre:recordProjection>
                                                                          </vdm_lustre:lhsOperand>
                                                                          <vdm_lustre:rhsOperand>
                                                                            <vdm_lustre:identifier>currentPos</vdm_lustre:identifier>
                                                                          </vdm_lustre:rhsOperand>
                                                                        </vdm_lustre:greaterThan>
                                                                      </vdm_lustre:recordReference>
                                                                      <vdm_lustre:fieldId>y</vdm_lustre:fieldId>
                                                                    </vdm_lustre:recordProjection>
                                                                  </vdm_lustre:expression>
                                                                </vdm_lustre:expressionList>
                                                              </vdm_lustre:condition>
                                                              <vdm_lustre:thenBranch>
                                                                <vdm_lustre:identifier>Turn_Left</vdm_lustre:identifier>
                                                              </vdm_lustre:thenBranch>
                                                              <vdm_lustre:elseBranch>
                                                                <vdm_lustre:conditionalExpression>
                                                                  <vdm_lustre:condition>
                                                                    <vdm_lustre:expressionList>
                                                                      <vdm_lustre:expression>
                                                                        <vdm_lustre:recordProjection>
                                                                          <vdm_lustre:recordReference>
                                                                            <vdm_lustre:lessThan>
                                                                              <vdm_lustre:lhsOperand>
                                                                                <vdm_lustre:recordProjection>
                                                                                  <vdm_lustre:recordReference>
                                                                                    <vdm_lustre:and>
                                                                                      <vdm_lustre:lhsOperand>
                                                                                        <vdm_lustre:recordProjection>
                                                                                          <vdm_lustre:recordReference>
                                                                                            <vdm_lustre:equal>
                                                                                              <vdm_lustre:lhsOperand>
                                                                                                <vdm_lustre:recordProjection>
                                                                                                  <vdm_lustre:recordReference>
                                                                                                    <vdm_lustre:equal>
                                                                                                      <vdm_lustre:lhsOperand>
                                                                                                        <vdm_lustre:identifier>currentDir</vdm_lustre:identifier>
                                                                                                      </vdm_lustre:lhsOperand>
                                                                                                      <vdm_lustre:rhsOperand>
                                                                                                        <vdm_lustre:and>
                                                                                                          <vdm_lustre:lhsOperand>
                                                                                                            <vdm_lustre:identifier>North</vdm_lustre:identifier>
                                                                                                          </vdm_lustre:lhsOperand>
                                                                                                          <vdm_lustre:rhsOperand>
                                                                                                            <vdm_lustre:identifier>waypointPos</vdm_lustre:identifier>
                                                                                                          </vdm_lustre:rhsOperand>
                                                                                                        </vdm_lustre:and>
                                                                                                      </vdm_lustre:rhsOperand>
                                                                                                    </vdm_lustre:equal>
                                                                                                  </vdm_lustre:recordReference>
                                                                                                  <vdm_lustre:fieldId>x</vdm_lustre:fieldId>
                                                                                                </vdm_lustre:recordProjection>
                                                                                              </vdm_lustre:lhsOperand>
                                                                                              <vdm_lustre:rhsOperand>
                                                                                                <vdm_lustre:identifier>currentPos</vdm_lustre:identifier>
                                                                                              </vdm_lustre:rhsOperand>
                                                                                            </vdm_lustre:equal>
                                                                                          </vdm_lustre:recordReference>
                                                                                          <vdm_lustre:fieldId>x</vdm_lustre:fieldId>
                                                                                        </vdm_lustre:recordProjection>
                                                                                      </vdm_lustre:lhsOperand>
                                                                                      <vdm_lustre:rhsOperand>
                                                                                        <vdm_lustre:identifier>waypointPos</vdm_lustre:identifier>
                                                                                      </vdm_lustre:rhsOperand>
                                                                                    </vdm_lustre:and>
                                                                                  </vdm_lustre:recordReference>
                                                                                  <vdm_lustre:fieldId>y</vdm_lustre:fieldId>
                                                                                </vdm_lustre:recordProjection>
                                                                              </vdm_lustre:lhsOperand>
                                                                              <vdm_lustre:rhsOperand>
                                                                                <vdm_lustre:identifier>currentPos</vdm_lustre:identifier>
                                                                              </vdm_lustre:rhsOperand>
                                                                            </vdm_lustre:lessThan>
                                                                          </vdm_lustre:recordReference>
                                                                          <vdm_lustre:fieldId>y</vdm_lustre:fieldId>
                                                                        </vdm_lustre:recordProjection>
                                                                      </vdm_lustre:expression>
                                                                    </vdm_lustre:expressionList>
                                                                  </vdm_lustre:condition>
                                                                  <vdm_lustre:thenBranch>
                                                                    <vdm_lustre:identifier>Turn_Right</vdm_lustre:identifier>
                                                                  </vdm_lustre:thenBranch>
                                                                  <vdm_lustre:elseBranch>
                                                                    <vdm_lustre:conditionalExpression>
                                                                      <vdm_lustre:condition>
                                                                        <vdm_lustre:expressionList>
                                                                          <vdm_lustre:expression>
                                                                            <vdm_lustre:recordProjection>
                                                                              <vdm_lustre:recordReference>
                                                                                <vdm_lustre:lessThan>
                                                                                  <vdm_lustre:lhsOperand>
                                                                                    <vdm_lustre:recordProjection>
                                                                                      <vdm_lustre:recordReference>
                                                                                        <vdm_lustre:and>
                                                                                          <vdm_lustre:lhsOperand>
                                                                                            <vdm_lustre:recordProjection>
                                                                                              <vdm_lustre:recordReference>
                                                                                                <vdm_lustre:equal>
                                                                                                  <vdm_lustre:lhsOperand>
                                                                                                    <vdm_lustre:recordProjection>
                                                                                                      <vdm_lustre:recordReference>
                                                                                                        <vdm_lustre:equal>
                                                                                                          <vdm_lustre:lhsOperand>
                                                                                                            <vdm_lustre:identifier>currentDir</vdm_lustre:identifier>
                                                                                                          </vdm_lustre:lhsOperand>
                                                                                                          <vdm_lustre:rhsOperand>
                                                                                                            <vdm_lustre:and>
                                                                                                              <vdm_lustre:lhsOperand>
                                                                                                                <vdm_lustre:identifier>West</vdm_lustre:identifier>
                                                                                                              </vdm_lustre:lhsOperand>
                                                                                                              <vdm_lustre:rhsOperand>
                                                                                                                <vdm_lustre:identifier>waypointPos</vdm_lustre:identifier>
                                                                                                              </vdm_lustre:rhsOperand>
                                                                                                            </vdm_lustre:and>
                                                                                                          </vdm_lustre:rhsOperand>
                                                                                                        </vdm_lustre:equal>
                                                                                                      </vdm_lustre:recordReference>
                                                                                                      <vdm_lustre:fieldId>x</vdm_lustre:fieldId>
                                                                                                    </vdm_lustre:recordProjection>
                                                                                                  </vdm_lustre:lhsOperand>
                                                                                                  <vdm_lustre:rhsOperand>
                                                                                                    <vdm_lustre:identifier>currentPos</vdm_lustre:identifier>
                                                                                                  </vdm_lustre:rhsOperand>
                                                                                                </vdm_lustre:equal>
                                                                                              </vdm_lustre:recordReference>
                                                                                              <vdm_lustre:fieldId>x</vdm_lustre:fieldId>
                                                                                            </vdm_lustre:recordProjection>
                                                                                          </vdm_lustre:lhsOperand>
                                                                                          <vdm_lustre:rhsOperand>
                                                                                            <vdm_lustre:identifier>waypointPos</vdm_lustre:identifier>
                                                                                          </vdm_lustre:rhsOperand>
                                                                                        </vdm_lustre:and>
                                                                                      </vdm_lustre:recordReference>
                                                                                      <vdm_lustre:fieldId>y</vdm_lustre:fieldId>
                                                                                    </vdm_lustre:recordProjection>
                                                                                  </vdm_lustre:lhsOperand>
                                                                                  <vdm_lustre:rhsOperand>
                                                                                    <vdm_lustre:identifier>currentPos</vdm_lustre:identifier>
                                                                                  </vdm_lustre:rhsOperand>
                                                                                </vdm_lustre:lessThan>
                                                                              </vdm_lustre:recordReference>
                                                                              <vdm_lustre:fieldId>y</vdm_lustre:fieldId>
                                                                            </vdm_lustre:recordProjection>
                                                                          </vdm_lustre:expression>
                                                                        </vdm_lustre:expressionList>
                                                                      </vdm_lustre:condition>
                                                                      <vdm_lustre:thenBranch>
                                                                        <vdm_lustre:identifier>Turn_Left</vdm_lustre:identifier>
                                                                      </vdm_lustre:thenBranch>
                                                                      <vdm_lustre:elseBranch>
                                                                        <vdm_lustre:conditionalExpression>
                                                                          <vdm_lustre:condition>
                                                                            <vdm_lustre:expressionList>
                                                                              <vdm_lustre:expression>
                                                                                <vdm_lustre:recordProjection>
                                                                                  <vdm_lustre:recordReference>
                                                                                    <vdm_lustre:lessThan>
                                                                                      <vdm_lustre:lhsOperand>
                                                                                        <vdm_lustre:recordProjection>
                                                                                          <vdm_lustre:recordReference>
                                                                                            <vdm_lustre:and>
                                                                                              <vdm_lustre:lhsOperand>
                                                                                                <vdm_lustre:recordProjection>
                                                                                                  <vdm_lustre:recordReference>
                                                                                                    <vdm_lustre:equal>
                                                                                                      <vdm_lustre:lhsOperand>
                                                                                                        <vdm_lustre:recordProjection>
                                                                                                          <vdm_lustre:recordReference>
                                                                                                            <vdm_lustre:equal>
                                                                                                              <vdm_lustre:lhsOperand>
                                                                                                                <vdm_lustre:identifier>currentDir</vdm_lustre:identifier>
                                                                                                              </vdm_lustre:lhsOperand>
                                                                                                              <vdm_lustre:rhsOperand>
                                                                                                                <vdm_lustre:and>
                                                                                                                  <vdm_lustre:lhsOperand>
                                                                                                                    <vdm_lustre:identifier>East</vdm_lustre:identifier>
                                                                                                                  </vdm_lustre:lhsOperand>
                                                                                                                  <vdm_lustre:rhsOperand>
                                                                                                                    <vdm_lustre:identifier>waypointPos</vdm_lustre:identifier>
                                                                                                                  </vdm_lustre:rhsOperand>
                                                                                                                </vdm_lustre:and>
                                                                                                              </vdm_lustre:rhsOperand>
                                                                                                            </vdm_lustre:equal>
                                                                                                          </vdm_lustre:recordReference>
                                                                                                          <vdm_lustre:fieldId>x</vdm_lustre:fieldId>
                                                                                                        </vdm_lustre:recordProjection>
                                                                                                      </vdm_lustre:lhsOperand>
                                                                                                      <vdm_lustre:rhsOperand>
                                                                                                        <vdm_lustre:identifier>currentPos</vdm_lustre:identifier>
                                                                                                      </vdm_lustre:rhsOperand>
                                                                                                    </vdm_lustre:equal>
                                                                                                  </vdm_lustre:recordReference>
                                                                                                  <vdm_lustre:fieldId>x</vdm_lustre:fieldId>
                                                                                                </vdm_lustre:recordProjection>
                                                                                              </vdm_lustre:lhsOperand>
                                                                                              <vdm_lustre:rhsOperand>
                                                                                                <vdm_lustre:identifier>waypointPos</vdm_lustre:identifier>
                                                                                              </vdm_lustre:rhsOperand>
                                                                                            </vdm_lustre:and>
                                                                                          </vdm_lustre:recordReference>
                                                                                          <vdm_lustre:fieldId>y</vdm_lustre:fieldId>
                                                                                        </vdm_lustre:recordProjection>
                                                                                      </vdm_lustre:lhsOperand>
                                                                                      <vdm_lustre:rhsOperand>
                                                                                        <vdm_lustre:identifier>currentPos</vdm_lustre:identifier>
                                                                                      </vdm_lustre:rhsOperand>
                                                                                    </vdm_lustre:lessThan>
                                                                                  </vdm_lustre:recordReference>
                                                                                  <vdm_lustre:fieldId>y</vdm_lustre:fieldId>
                                                                                </vdm_lustre:recordProjection>
                                                                              </vdm_lustre:expression>
                                                                            </vdm_lustre:expressionList>
                                                                          </vdm_lustre:condition>
                                                                          <vdm_lustre:thenBranch>
                                                                            <vdm_lustre:identifier>Turn_Right</vdm_lustre:identifier>
                                                                          </vdm_lustre:thenBranch>
                                                                          <vdm_lustre:elseBranch>
                                                                            <vdm_lustre:conditionalExpression>
                                                                              <vdm_lustre:condition>
                                                                                <vdm_lustre:expressionList>
                                                                                  <vdm_lustre:expression>
                                                                                    <vdm_lustre:recordProjection>
                                                                                      <vdm_lustre:recordReference>
                                                                                        <vdm_lustre:notEqual>
                                                                                          <vdm_lustre:lhsOperand>
                                                                                            <vdm_lustre:recordProjection>
                                                                                              <vdm_lustre:recordReference>
                                                                                                <vdm_lustre:and>
                                                                                                  <vdm_lustre:lhsOperand>
                                                                                                    <vdm_lustre:recordProjection>
                                                                                                      <vdm_lustre:recordReference>
                                                                                                        <vdm_lustre:notEqual>
                                                                                                          <vdm_lustre:lhsOperand>
                                                                                                            <vdm_lustre:recordProjection>
                                                                                                              <vdm_lustre:recordReference>
                                                                                                                <vdm_lustre:identifier>waypointPos</vdm_lustre:identifier>
                                                                                                              </vdm_lustre:recordReference>
                                                                                                              <vdm_lustre:fieldId>x</vdm_lustre:fieldId>
                                                                                                            </vdm_lustre:recordProjection>
                                                                                                          </vdm_lustre:lhsOperand>
                                                                                                          <vdm_lustre:rhsOperand>
                                                                                                            <vdm_lustre:identifier>currentPos</vdm_lustre:identifier>
                                                                                                          </vdm_lustre:rhsOperand>
                                                                                                        </vdm_lustre:notEqual>
                                                                                                      </vdm_lustre:recordReference>
                                                                                                      <vdm_lustre:fieldId>x</vdm_lustre:fieldId>
                                                                                                    </vdm_lustre:recordProjection>
                                                                                                  </vdm_lustre:lhsOperand>
                                                                                                  <vdm_lustre:rhsOperand>
                                                                                                    <vdm_lustre:identifier>waypointPos</vdm_lustre:identifier>
                                                                                                  </vdm_lustre:rhsOperand>
                                                                                                </vdm_lustre:and>
                                                                                              </vdm_lustre:recordReference>
                                                                                              <vdm_lustre:fieldId>y</vdm_lustre:fieldId>
                                                                                            </vdm_lustre:recordProjection>
                                                                                          </vdm_lustre:lhsOperand>
                                                                                          <vdm_lustre:rhsOperand>
                                                                                            <vdm_lustre:identifier>currentPos</vdm_lustre:identifier>
                                                                                          </vdm_lustre:rhsOperand>
                                                                                        </vdm_lustre:notEqual>
                                                                                      </vdm_lustre:recordReference>
                                                                                      <vdm_lustre:fieldId>y</vdm_lustre:fieldId>
                                                                                    </vdm_lustre:recordProjection>
                                                                                  </vdm_lustre:expression>
                                                                                </vdm_lustre:expressionList>
                                                                              </vdm_lustre:condition>
                                                                              <vdm_lustre:thenBranch>
                                                                                <vdm_lustre:identifier>Turn_Right</vdm_lustre:identifier>
                                                                              </vdm_lustre:thenBranch>
                                                                              <vdm_lustre:elseBranch>
                                                                                <vdm_lustre:identifier>Stop</vdm_lustre:identifier>
                                                                              </vdm_lustre:elseBranch>
                                                                            </vdm_lustre:conditionalExpression>
                                                                          </vdm_lustre:elseBranch>
                                                                        </vdm_lustre:conditionalExpression>
                                                                      </vdm_lustre:elseBranch>
                                                                    </vdm_lustre:conditionalExpression>
                                                                  </vdm_lustre:elseBranch>
                                                                </vdm_lustre:conditionalExpression>
                                                              </vdm_lustre:elseBranch>
                                                            </vdm_lustre:conditionalExpression>
                                                          </vdm_lustre:elseBranch>
                                                        </vdm_lustre:conditionalExpression>
                                                      </vdm_lustre:elseBranch>
                                                    </vdm_lustre:conditionalExpression>
                                                  </vdm_lustre:elseBranch>
                                                </vdm_lustre:conditionalExpression>
                                              </vdm_lustre:elseBranch>
                                            </vdm_lustre:conditionalExpression>
                                          </vdm_lustre:elseBranch>
                                        </vdm_lustre:conditionalExpression>
                                      </vdm_lustre:elseBranch>
                                    </vdm_lustre:conditionalExpression>
                                  </vdm_lustre:elseBranch>
                                </vdm_lustre:conditionalExpression>
                              </vdm_lustre:elseBranch>
                            </vdm_lustre:conditionalExpression>
                          </vdm_lustre:elseBranch>
                        </vdm_lustre:conditionalExpression>
                      </vdm_lustre:elseBranch>
                    </vdm_lustre:conditionalExpression>
                  </vdm_lustre:elseBranch>
                </vdm_lustre:conditionalExpression>
              </vdm_lustre:elseBranch>
            </vdm_lustre:conditionalExpression>
          </vdm_lustre:rhs>
        </vdm_lustre:equation>
        <vdm_lustre:equation>
          <vdm_lustre:lhs>
            <vdm_lustre:identifier>desReached</vdm_lustre:identifier>
          </vdm_lustre:lhs>
          <vdm_lustre:rhs>
            <vdm_lustre:recordProjection>
              <vdm_lustre:recordReference>
                <vdm_lustre:equal>
                  <vdm_lustre:lhsOperand>
                    <vdm_lustre:recordProjection>
                      <vdm_lustre:recordReference>
                        <vdm_lustre:and>
                          <vdm_lustre:lhsOperand>
                            <vdm_lustre:recordProjection>
                              <vdm_lustre:recordReference>
                                <vdm_lustre:equal>
                                  <vdm_lustre:lhsOperand>
                                    <vdm_lustre:recordProjection>
                                      <vdm_lustre:recordReference>
                                        <vdm_lustre:identifier>currentPos</vdm_lustre:identifier>
                                      </vdm_lustre:recordReference>
                                      <vdm_lustre:fieldId>x</vdm_lustre:fieldId>
                                    </vdm_lustre:recordProjection>
                                  </vdm_lustre:lhsOperand>
                                  <vdm_lustre:rhsOperand>
                                    <vdm_lustre:identifier>waypointPos</vdm_lustre:identifier>
                                  </vdm_lustre:rhsOperand>
                                </vdm_lustre:equal>
                              </vdm_lustre:recordReference>
                              <vdm_lustre:fieldId>x</vdm_lustre:fieldId>
                            </vdm_lustre:recordProjection>
                          </vdm_lustre:lhsOperand>
                          <vdm_lustre:rhsOperand>
                            <vdm_lustre:identifier>currentPos</vdm_lustre:identifier>
                          </vdm_lustre:rhsOperand>
                        </vdm_lustre:and>
                      </vdm_lustre:recordReference>
                      <vdm_lustre:fieldId>y</vdm_lustre:fieldId>
                    </vdm_lustre:recordProjection>
                  </vdm_lustre:lhsOperand>
                  <vdm_lustre:rhsOperand>
                    <vdm_lustre:identifier>waypointPos</vdm_lustre:identifier>
                  </vdm_lustre:rhsOperand>
                </vdm_lustre:equal>
              </vdm_lustre:recordReference>
              <vdm_lustre:fieldId>y</vdm_lustre:fieldId>
            </vdm_lustre:recordProjection>
          </vdm_lustre:rhs>
        </vdm_lustre:equation>
      </vdm_lustre:body>
    </vdm_lustre:nodeDeclaration>
    <vdm_lustre:nodeDeclaration>
      <vdm_lustre:name>PositionEstimator</vdm_lustre:name>
      <vdm_lustre:inputParameter>
        <vdm_lustre:name>GPS_pos</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>Position</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:inputParameter>
      <vdm_lustre:inputParameter>
        <vdm_lustre:name>GPS_dir</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>Direction</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:inputParameter>
      <vdm_lustre:outputParameter>
        <vdm_lustre:name>currentPos</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>Position</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:outputParameter>
      <vdm_lustre:outputParameter>
        <vdm_lustre:name>currentDir</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>Direction</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:outputParameter>
      <vdm_lustre:body>
        <vdm_lustre:equation>
          <vdm_lustre:lhs>
            <vdm_lustre:identifier>currentPos</vdm_lustre:identifier>
          </vdm_lustre:lhs>
          <vdm_lustre:rhs>
            <vdm_lustre:identifier>GPS_pos</vdm_lustre:identifier>
          </vdm_lustre:rhs>
        </vdm_lustre:equation>
        <vdm_lustre:equation>
          <vdm_lustre:lhs>
            <vdm_lustre:identifier>currentDir</vdm_lustre:identifier>
          </vdm_lustre:lhs>
          <vdm_lustre:rhs>
            <vdm_lustre:identifier>GPS_dir</vdm_lustre:identifier>
          </vdm_lustre:rhs>
        </vdm_lustre:equation>
      </vdm_lustre:body>
    </vdm_lustre:nodeDeclaration>
    <vdm_lustre:nodeDeclaration>
      <vdm_lustre:name>RCReceiver</vdm_lustre:name>
      <vdm_lustre:inputParameter>
        <vdm_lustre:name>rcv_payloadCMD</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>Action</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:inputParameter>
      <vdm_lustre:inputParameter>
        <vdm_lustre:name>rcv_move</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>Movement</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:inputParameter>
      <vdm_lustre:inputParameter>
        <vdm_lustre:name>rcv_uavMode</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>UAVState</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:inputParameter>
      <vdm_lustre:outputParameter>
        <vdm_lustre:name>normal</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:plainType>bool</vdm_data:plainType>
        </vdm_lustre:dataType>
      </vdm_lustre:outputParameter>
      <vdm_lustre:outputParameter>
        <vdm_lustre:name>payloadCMD</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>Action</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:outputParameter>
      <vdm_lustre:outputParameter>
        <vdm_lustre:name>move</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>Movement</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:outputParameter>
      <vdm_lustre:outputParameter>
        <vdm_lustre:name>uavMode</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>UAVState</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:outputParameter>
      <vdm_lustre:body>
        <vdm_lustre:equation>
          <vdm_lustre:lhs>
            <vdm_lustre:identifier>payloadCMD</vdm_lustre:identifier>
            <vdm_lustre:identifier>move</vdm_lustre:identifier>
            <vdm_lustre:identifier>uavMode</vdm_lustre:identifier>
          </vdm_lustre:lhs>
          <vdm_lustre:rhs>
            <vdm_lustre:expressionList>
              <vdm_lustre:expression>
                <vdm_lustre:identifier>rcv_payloadCMD</vdm_lustre:identifier>
              </vdm_lustre:expression>
              <vdm_lustre:expression>
                <vdm_lustre:identifier>rcv_move</vdm_lustre:identifier>
              </vdm_lustre:expression>
              <vdm_lustre:expression>
                <vdm_lustre:identifier>rcv_uavMode</vdm_lustre:identifier>
              </vdm_lustre:expression>
            </vdm_lustre:expressionList>
          </vdm_lustre:rhs>
        </vdm_lustre:equation>
        <vdm_lustre:equation>
          <vdm_lustre:lhs>
            <vdm_lustre:identifier>normal</vdm_lustre:identifier>
          </vdm_lustre:lhs>
          <vdm_lustre:rhs>
            <vdm_lustre:boolLiteral>true</vdm_lustre:boolLiteral>
          </vdm_lustre:rhs>
        </vdm_lustre:equation>
      </vdm_lustre:body>
    </vdm_lustre:nodeDeclaration>
    <vdm_lustre:nodeDeclaration>
      <vdm_lustre:name>RCReceiverHealthCheck</vdm_lustre:name>
      <vdm_lustre:inputParameter>
        <vdm_lustre:name>normal</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:plainType>bool</vdm_data:plainType>
        </vdm_lustre:dataType>
      </vdm_lustre:inputParameter>
      <vdm_lustre:outputParameter>
        <vdm_lustre:name>ATE6</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>ATE6Type</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:outputParameter>
      <vdm_lustre:body>
        <vdm_lustre:variableDeclaration>
          <vdm_lustre:name>next_ATE6</vdm_lustre:name>
          <vdm_lustre:dataType>
            <vdm_data:userDefinedType>ATE6Type</vdm_data:userDefinedType>
          </vdm_lustre:dataType>
        </vdm_lustre:variableDeclaration>
        <vdm_lustre:equation>
          <vdm_lustre:lhs>
            <vdm_lustre:identifier>ATE6</vdm_lustre:identifier>
          </vdm_lustre:lhs>
          <vdm_lustre:rhs>
            <vdm_lustre:arrow>
              <vdm_lustre:lhsOperand>
                <vdm_lustre:identifier>RC_Normal</vdm_lustre:identifier>
              </vdm_lustre:lhsOperand>
              <vdm_lustre:rhsOperand>
                <vdm_lustre:pre>
                  <vdm_lustre:identifier>next_ATE6</vdm_lustre:identifier>
                </vdm_lustre:pre>
              </vdm_lustre:rhsOperand>
            </vdm_lustre:arrow>
          </vdm_lustre:rhs>
        </vdm_lustre:equation>
        <vdm_lustre:equation>
          <vdm_lustre:lhs>
            <vdm_lustre:identifier>next_ATE6</vdm_lustre:identifier>
          </vdm_lustre:lhs>
          <vdm_lustre:rhs>
            <vdm_lustre:conditionalExpression>
              <vdm_lustre:condition>
                <vdm_lustre:lessThanOrEqualTo>
                  <vdm_lustre:lhsOperand>
                    <vdm_lustre:call vdm_lustre:nodeId="duration">
                      <vdm_lustre:argument>
                        <vdm_lustre:identifier>normal</vdm_lustre:identifier>
                      </vdm_lustre:argument>
                    </vdm_lustre:call>
                  </vdm_lustre:lhsOperand>
                  <vdm_lustre:rhsOperand>
                    <vdm_lustre:identifier>RC_RECEIVER_TOLERANCE_LEVEL</vdm_lustre:identifier>
                  </vdm_lustre:rhsOperand>
                </vdm_lustre:lessThanOrEqualTo>
              </vdm_lustre:condition>
              <vdm_lustre:thenBranch>
                <vdm_lustre:identifier>RC_Normal</vdm_lustre:identifier>
              </vdm_lustre:thenBranch>
              <vdm_lustre:elseBranch>
                <vdm_lustre:identifier>RC_Abnormal</vdm_lustre:identifier>
              </vdm_lustre:elseBranch>
            </vdm_lustre:conditionalExpression>
          </vdm_lustre:rhs>
        </vdm_lustre:equation>
      </vdm_lustre:body>
    </vdm_lustre:nodeDeclaration>
    <vdm_lustre:nodeDeclaration>
      <vdm_lustre:name>RemoteOperatorController</vdm_lustre:name>
      <vdm_lustre:outputParameter>
        <vdm_lustre:name>payloadCMD</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>Action</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:outputParameter>
      <vdm_lustre:outputParameter>
        <vdm_lustre:name>move</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>Movement</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:outputParameter>
      <vdm_lustre:outputParameter>
        <vdm_lustre:name>uavMode</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>UAVState</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:outputParameter>
      <vdm_lustre:body>
        <vdm_lustre:equation>
          <vdm_lustre:lhs>
            <vdm_lustre:identifier>move</vdm_lustre:identifier>
          </vdm_lustre:lhs>
          <vdm_lustre:rhs>
            <vdm_lustre:arrow>
              <vdm_lustre:lhsOperand>
                <vdm_lustre:identifier>Move_Forward</vdm_lustre:identifier>
              </vdm_lustre:lhsOperand>
              <vdm_lustre:rhsOperand>
                <vdm_lustre:pre>
                  <vdm_lustre:expressionList>
                    <vdm_lustre:expression>
                      <vdm_lustre:arrow>
                        <vdm_lustre:lhsOperand>
                          <vdm_lustre:identifier>Move_Forward</vdm_lustre:identifier>
                        </vdm_lustre:lhsOperand>
                        <vdm_lustre:rhsOperand>
                          <vdm_lustre:pre>
                            <vdm_lustre:expressionList>
                              <vdm_lustre:expression>
                                <vdm_lustre:arrow>
                                  <vdm_lustre:lhsOperand>
                                    <vdm_lustre:identifier>Turn_Left</vdm_lustre:identifier>
                                  </vdm_lustre:lhsOperand>
                                  <vdm_lustre:rhsOperand>
                                    <vdm_lustre:pre>
                                      <vdm_lustre:expressionList>
                                        <vdm_lustre:expression>
                                          <vdm_lustre:arrow>
                                            <vdm_lustre:lhsOperand>
                                              <vdm_lustre:identifier>Move_Forward</vdm_lustre:identifier>
                                            </vdm_lustre:lhsOperand>
                                            <vdm_lustre:rhsOperand>
                                              <vdm_lustre:pre>
                                                <vdm_lustre:expressionList>
                                                  <vdm_lustre:expression>
                                                    <vdm_lustre:arrow>
                                                      <vdm_lustre:lhsOperand>
                                                        <vdm_lustre:identifier>Move_Forward</vdm_lustre:identifier>
                                                      </vdm_lustre:lhsOperand>
                                                      <vdm_lustre:rhsOperand>
                                                        <vdm_lustre:pre>
                                                          <vdm_lustre:identifier>Stop</vdm_lustre:identifier>
                                                        </vdm_lustre:pre>
                                                      </vdm_lustre:rhsOperand>
                                                    </vdm_lustre:arrow>
                                                  </vdm_lustre:expression>
                                                </vdm_lustre:expressionList>
                                              </vdm_lustre:pre>
                                            </vdm_lustre:rhsOperand>
                                          </vdm_lustre:arrow>
                                        </vdm_lustre:expression>
                                      </vdm_lustre:expressionList>
                                    </vdm_lustre:pre>
                                  </vdm_lustre:rhsOperand>
                                </vdm_lustre:arrow>
                              </vdm_lustre:expression>
                            </vdm_lustre:expressionList>
                          </vdm_lustre:pre>
                        </vdm_lustre:rhsOperand>
                      </vdm_lustre:arrow>
                    </vdm_lustre:expression>
                  </vdm_lustre:expressionList>
                </vdm_lustre:pre>
              </vdm_lustre:rhsOperand>
            </vdm_lustre:arrow>
          </vdm_lustre:rhs>
        </vdm_lustre:equation>
        <vdm_lustre:equation>
          <vdm_lustre:lhs>
            <vdm_lustre:identifier>payloadCMD</vdm_lustre:identifier>
          </vdm_lustre:lhs>
          <vdm_lustre:rhs>
            <vdm_lustre:arrow>
              <vdm_lustre:lhsOperand>
                <vdm_lustre:identifier>None</vdm_lustre:identifier>
              </vdm_lustre:lhsOperand>
              <vdm_lustre:rhsOperand>
                <vdm_lustre:pre>
                  <vdm_lustre:expressionList>
                    <vdm_lustre:expression>
                      <vdm_lustre:arrow>
                        <vdm_lustre:lhsOperand>
                          <vdm_lustre:identifier>None</vdm_lustre:identifier>
                        </vdm_lustre:lhsOperand>
                        <vdm_lustre:rhsOperand>
                          <vdm_lustre:pre>
                            <vdm_lustre:expressionList>
                              <vdm_lustre:expression>
                                <vdm_lustre:arrow>
                                  <vdm_lustre:lhsOperand>
                                    <vdm_lustre:identifier>None</vdm_lustre:identifier>
                                  </vdm_lustre:lhsOperand>
                                  <vdm_lustre:rhsOperand>
                                    <vdm_lustre:pre>
                                      <vdm_lustre:expressionList>
                                        <vdm_lustre:expression>
                                          <vdm_lustre:arrow>
                                            <vdm_lustre:lhsOperand>
                                              <vdm_lustre:identifier>None</vdm_lustre:identifier>
                                            </vdm_lustre:lhsOperand>
                                            <vdm_lustre:rhsOperand>
                                              <vdm_lustre:pre>
                                                <vdm_lustre:expressionList>
                                                  <vdm_lustre:expression>
                                                    <vdm_lustre:arrow>
                                                      <vdm_lustre:lhsOperand>
                                                        <vdm_lustre:identifier>None</vdm_lustre:identifier>
                                                      </vdm_lustre:lhsOperand>
                                                      <vdm_lustre:rhsOperand>
                                                        <vdm_lustre:pre>
                                                          <vdm_lustre:expressionList>
                                                            <vdm_lustre:expression>
                                                              <vdm_lustre:arrow>
                                                                <vdm_lustre:lhsOperand>
                                                                  <vdm_lustre:identifier>Camera</vdm_lustre:identifier>
                                                                </vdm_lustre:lhsOperand>
                                                                <vdm_lustre:rhsOperand>
                                                                  <vdm_lustre:pre>
                                                                    <vdm_lustre:identifier>None</vdm_lustre:identifier>
                                                                  </vdm_lustre:pre>
                                                                </vdm_lustre:rhsOperand>
                                                              </vdm_lustre:arrow>
                                                            </vdm_lustre:expression>
                                                          </vdm_lustre:expressionList>
                                                        </vdm_lustre:pre>
                                                      </vdm_lustre:rhsOperand>
                                                    </vdm_lustre:arrow>
                                                  </vdm_lustre:expression>
                                                </vdm_lustre:expressionList>
                                              </vdm_lustre:pre>
                                            </vdm_lustre:rhsOperand>
                                          </vdm_lustre:arrow>
                                        </vdm_lustre:expression>
                                      </vdm_lustre:expressionList>
                                    </vdm_lustre:pre>
                                  </vdm_lustre:rhsOperand>
                                </vdm_lustre:arrow>
                              </vdm_lustre:expression>
                            </vdm_lustre:expressionList>
                          </vdm_lustre:pre>
                        </vdm_lustre:rhsOperand>
                      </vdm_lustre:arrow>
                    </vdm_lustre:expression>
                  </vdm_lustre:expressionList>
                </vdm_lustre:pre>
              </vdm_lustre:rhsOperand>
            </vdm_lustre:arrow>
          </vdm_lustre:rhs>
        </vdm_lustre:equation>
        <vdm_lustre:equation>
          <vdm_lustre:lhs>
            <vdm_lustre:identifier>uavMode</vdm_lustre:identifier>
          </vdm_lustre:lhs>
          <vdm_lustre:rhs>
            <vdm_lustre:identifier>PILOT_FLIGHT_MODE</vdm_lustre:identifier>
          </vdm_lustre:rhs>
        </vdm_lustre:equation>
      </vdm_lustre:body>
    </vdm_lustre:nodeDeclaration>
    <vdm_lustre:nodeDeclaration>
      <vdm_lustre:name>StateController</vdm_lustre:name>
      <vdm_lustre:inputParameter>
        <vdm_lustre:name>ATE6</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:plainType>int</vdm_data:plainType>
        </vdm_lustre:dataType>
      </vdm_lustre:inputParameter>
      <vdm_lustre:inputParameter>
        <vdm_lustre:name>ATE7</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:plainType>int</vdm_data:plainType>
        </vdm_lustre:dataType>
      </vdm_lustre:inputParameter>
      <vdm_lustre:inputParameter>
        <vdm_lustre:name>uavMode</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>UAVState</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:inputParameter>
      <vdm_lustre:outputParameter>
        <vdm_lustre:name>mstate</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>UAVState</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:outputParameter>
      <vdm_lustre:body>
        <vdm_lustre:equation>
          <vdm_lustre:lhs>
            <vdm_lustre:identifier>mstate</vdm_lustre:identifier>
          </vdm_lustre:lhs>
          <vdm_lustre:rhs>
            <vdm_lustre:conditionalExpression>
              <vdm_lustre:condition>
                <vdm_lustre:equal>
                  <vdm_lustre:lhsOperand>
                    <vdm_lustre:equal>
                      <vdm_lustre:lhsOperand>
                        <vdm_lustre:identifier>ATE7</vdm_lustre:identifier>
                      </vdm_lustre:lhsOperand>
                      <vdm_lustre:rhsOperand>
                        <vdm_lustre:and>
                          <vdm_lustre:lhsOperand>
                            <vdm_lustre:identifier>Adequate</vdm_lustre:identifier>
                          </vdm_lustre:lhsOperand>
                          <vdm_lustre:rhsOperand>
                            <vdm_lustre:identifier>ATE6</vdm_lustre:identifier>
                          </vdm_lustre:rhsOperand>
                        </vdm_lustre:and>
                      </vdm_lustre:rhsOperand>
                    </vdm_lustre:equal>
                  </vdm_lustre:lhsOperand>
                  <vdm_lustre:rhsOperand>
                    <vdm_lustre:identifier>RC_Normal</vdm_lustre:identifier>
                  </vdm_lustre:rhsOperand>
                </vdm_lustre:equal>
              </vdm_lustre:condition>
              <vdm_lustre:thenBranch>
                <vdm_lustre:identifier>uavMode</vdm_lustre:identifier>
              </vdm_lustre:thenBranch>
              <vdm_lustre:elseBranch>
                <vdm_lustre:identifier>s_RETURN_TO_LAUNCH</vdm_lustre:identifier>
              </vdm_lustre:elseBranch>
            </vdm_lustre:conditionalExpression>
          </vdm_lustre:rhs>
        </vdm_lustre:equation>
      </vdm_lustre:body>
    </vdm_lustre:nodeDeclaration>
    <vdm_lustre:nodeDeclaration>
      <vdm_lustre:name>TriplexVoter</vdm_lustre:name>
      <vdm_lustre:inputParameter>
        <vdm_lustre:name>gps2PosEst_pos</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>Position</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:inputParameter>
      <vdm_lustre:inputParameter>
        <vdm_lustre:name>dme_vor2PosEst_pos</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>Position</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:inputParameter>
      <vdm_lustre:inputParameter>
        <vdm_lustre:name>iru2PosEst_pos</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>Position</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:inputParameter>
      <vdm_lustre:inputParameter>
        <vdm_lustre:name>gps_dir</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>Direction</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:inputParameter>
      <vdm_lustre:inputParameter>
        <vdm_lustre:name>dme_vor_dir</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>Direction</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:inputParameter>
      <vdm_lustre:inputParameter>
        <vdm_lustre:name>iru_dir</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>Direction</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:inputParameter>
      <vdm_lustre:outputParameter>
        <vdm_lustre:name>GPS2PosEst_pos</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>Position</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:outputParameter>
      <vdm_lustre:outputParameter>
        <vdm_lustre:name>GPS_dir</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>Direction</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:outputParameter>
      <vdm_lustre:body>
        <vdm_lustre:equation>
          <vdm_lustre:lhs>
            <vdm_lustre:identifier>GPS2PosEst_pos</vdm_lustre:identifier>
          </vdm_lustre:lhs>
          <vdm_lustre:rhs>
            <vdm_lustre:conditionalExpression>
              <vdm_lustre:condition>
                <vdm_lustre:expressionList>
                  <vdm_lustre:expression>
                    <vdm_lustre:call vdm_lustre:nodeId="is_equal">
                      <vdm_lustre:argument>
                        <vdm_lustre:identifier>gps2PosEst_pos</vdm_lustre:identifier>
                      </vdm_lustre:argument>
                      <vdm_lustre:argument>
                        <vdm_lustre:identifier>dme_vor2PosEst_pos</vdm_lustre:identifier>
                      </vdm_lustre:argument>
                    </vdm_lustre:call>
                  </vdm_lustre:expression>
                </vdm_lustre:expressionList>
              </vdm_lustre:condition>
              <vdm_lustre:thenBranch>
                <vdm_lustre:identifier>gps2PosEst_pos</vdm_lustre:identifier>
              </vdm_lustre:thenBranch>
              <vdm_lustre:elseBranch>
                <vdm_lustre:conditionalExpression>
                  <vdm_lustre:condition>
                    <vdm_lustre:expressionList>
                      <vdm_lustre:expression>
                        <vdm_lustre:call
                          vdm_lustre:nodeId="is_equal">
                          <vdm_lustre:argument>
                            <vdm_lustre:identifier>gps2PosEst_pos</vdm_lustre:identifier>
                          </vdm_lustre:argument>
                          <vdm_lustre:argument>
                            <vdm_lustre:identifier>iru2PosEst_pos</vdm_lustre:identifier>
                          </vdm_lustre:argument>
                        </vdm_lustre:call>
                      </vdm_lustre:expression>
                    </vdm_lustre:expressionList>
                  </vdm_lustre:condition>
                  <vdm_lustre:thenBranch>
                    <vdm_lustre:identifier>gps2PosEst_pos</vdm_lustre:identifier>
                  </vdm_lustre:thenBranch>
                  <vdm_lustre:elseBranch>
                    <vdm_lustre:identifier>dme_vor2PosEst_pos</vdm_lustre:identifier>
                  </vdm_lustre:elseBranch>
                </vdm_lustre:conditionalExpression>
              </vdm_lustre:elseBranch>
            </vdm_lustre:conditionalExpression>
          </vdm_lustre:rhs>
        </vdm_lustre:equation>
        <vdm_lustre:equation>
          <vdm_lustre:lhs>
            <vdm_lustre:identifier>GPS_dir</vdm_lustre:identifier>
          </vdm_lustre:lhs>
          <vdm_lustre:rhs>
            <vdm_lustre:conditionalExpression>
              <vdm_lustre:condition>
                <vdm_lustre:expressionList>
                  <vdm_lustre:expression>
                    <vdm_lustre:equal>
                      <vdm_lustre:lhsOperand>
                        <vdm_lustre:identifier>gps_dir</vdm_lustre:identifier>
                      </vdm_lustre:lhsOperand>
                      <vdm_lustre:rhsOperand>
                        <vdm_lustre:identifier>dme_vor_dir</vdm_lustre:identifier>
                      </vdm_lustre:rhsOperand>
                    </vdm_lustre:equal>
                  </vdm_lustre:expression>
                </vdm_lustre:expressionList>
              </vdm_lustre:condition>
              <vdm_lustre:thenBranch>
                <vdm_lustre:identifier>gps_dir</vdm_lustre:identifier>
              </vdm_lustre:thenBranch>
              <vdm_lustre:elseBranch>
                <vdm_lustre:conditionalExpression>
                  <vdm_lustre:condition>
                    <vdm_lustre:expressionList>
                      <vdm_lustre:expression>
                        <vdm_lustre:equal>
                          <vdm_lustre:lhsOperand>
                            <vdm_lustre:identifier>gps_dir</vdm_lustre:identifier>
                          </vdm_lustre:lhsOperand>
                          <vdm_lustre:rhsOperand>
                            <vdm_lustre:identifier>iru_dir</vdm_lustre:identifier>
                          </vdm_lustre:rhsOperand>
                        </vdm_lustre:equal>
                      </vdm_lustre:expression>
                    </vdm_lustre:expressionList>
                  </vdm_lustre:condition>
                  <vdm_lustre:thenBranch>
                    <vdm_lustre:identifier>gps_dir</vdm_lustre:identifier>
                  </vdm_lustre:thenBranch>
                  <vdm_lustre:elseBranch>
                    <vdm_lustre:identifier>dme_vor_dir</vdm_lustre:identifier>
                  </vdm_lustre:elseBranch>
                </vdm_lustre:conditionalExpression>
              </vdm_lustre:elseBranch>
            </vdm_lustre:conditionalExpression>
          </vdm_lustre:rhs>
        </vdm_lustre:equation>
      </vdm_lustre:body>
    </vdm_lustre:nodeDeclaration>
    <vdm_lustre:nodeDeclaration>
      <vdm_lustre:name>NavigatorFilter</vdm_lustre:name>
      <vdm_lustre:inputParameter>
        <vdm_lustre:name>trusted_move</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>Movement</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:inputParameter>
      <vdm_lustre:inputParameter>
        <vdm_lustre:name>move</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>Movement</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:inputParameter>
      <vdm_lustre:outputParameter>
        <vdm_lustre:name>filtered_move</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>Movement</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:outputParameter>
      <vdm_lustre:body>
        <vdm_lustre:equation>
          <vdm_lustre:lhs>
            <vdm_lustre:identifier>filtered_move</vdm_lustre:identifier>
          </vdm_lustre:lhs>
          <vdm_lustre:rhs>
            <vdm_lustre:conditionalExpression>
              <vdm_lustre:condition>
                <vdm_lustre:notEqual>
                  <vdm_lustre:lhsOperand>
                    <vdm_lustre:identifier>trusted_move</vdm_lustre:identifier>
                  </vdm_lustre:lhsOperand>
                  <vdm_lustre:rhsOperand>
                    <vdm_lustre:identifier>move</vdm_lustre:identifier>
                  </vdm_lustre:rhsOperand>
                </vdm_lustre:notEqual>
              </vdm_lustre:condition>
              <vdm_lustre:thenBranch>
                <vdm_lustre:identifier>trusted_move</vdm_lustre:identifier>
              </vdm_lustre:thenBranch>
              <vdm_lustre:elseBranch>
                <vdm_lustre:identifier>move</vdm_lustre:identifier>
              </vdm_lustre:elseBranch>
            </vdm_lustre:conditionalExpression>
          </vdm_lustre:rhs>
        </vdm_lustre:equation>
      </vdm_lustre:body>
    </vdm_lustre:nodeDeclaration>
    <vdm_lustre:nodeDeclaration>
      <vdm_lustre:name>UAVSystem</vdm_lustre:name>
      <vdm_lustre:inputParameter>
        <vdm_lustre:name>location_source_pos</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>Position</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:inputParameter>
      <vdm_lustre:inputParameter>
        <vdm_lustre:name>location_source_dir</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>Direction</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:inputParameter>
      <vdm_lustre:inputParameter>
        <vdm_lustre:name>rcv_payloadCMD</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>Action</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:inputParameter>
      <vdm_lustre:inputParameter>
        <vdm_lustre:name>rcv_move</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>Movement</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:inputParameter>
      <vdm_lustre:inputParameter>
        <vdm_lustre:name>rcv_uavMode</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>UAVState</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:inputParameter>
      <vdm_lustre:inputParameter>
        <vdm_lustre:name>is_instrumented</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>ComponentInstrumentation</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:inputParameter>
      <vdm_lustre:outputParameter>
        <vdm_lustre:name>cmd</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>MotorCommand</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:outputParameter>
      <vdm_lustre:outputParameter>
        <vdm_lustre:name>currentPos</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>Position</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:outputParameter>
      <vdm_lustre:outputParameter>
        <vdm_lustre:name>payloadCmdFC</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>Action</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:outputParameter>
      <vdm_lustre:outputParameter>
        <vdm_lustre:name>ROC2Rcv_payloadCMD</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>Action</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:outputParameter>
      <vdm_lustre:outputParameter>
        <vdm_lustre:name>mstate</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>UAVState</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:outputParameter>
      <vdm_lustre:outputParameter>
        <vdm_lustre:name>tasks</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>Tasks</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:outputParameter>
      <vdm_lustre:outputParameter>
        <vdm_lustre:name>payload_performed</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:plainType>bool</vdm_data:plainType>
        </vdm_lustre:dataType>
      </vdm_lustre:outputParameter>
      <vdm_lustre:body>
        <vdm_lustre:variableDeclaration>
          <vdm_lustre:name>gps_pos</vdm_lustre:name>
          <vdm_lustre:dataType>
            <vdm_data:userDefinedType>Position</vdm_data:userDefinedType>
          </vdm_lustre:dataType>
        </vdm_lustre:variableDeclaration>
        <vdm_lustre:variableDeclaration>
          <vdm_lustre:name>dme_vor_pos</vdm_lustre:name>
          <vdm_lustre:dataType>
            <vdm_data:userDefinedType>Position</vdm_data:userDefinedType>
          </vdm_lustre:dataType>
        </vdm_lustre:variableDeclaration>
        <vdm_lustre:variableDeclaration>
          <vdm_lustre:name>iru_pos</vdm_lustre:name>
          <vdm_lustre:dataType>
            <vdm_data:userDefinedType>Position</vdm_data:userDefinedType>
          </vdm_lustre:dataType>
        </vdm_lustre:variableDeclaration>
        <vdm_lustre:variableDeclaration>
          <vdm_lustre:name>currentDir</vdm_lustre:name>
          <vdm_lustre:dataType>
            <vdm_data:userDefinedType>Direction</vdm_data:userDefinedType>
          </vdm_lustre:dataType>
        </vdm_lustre:variableDeclaration>
        <vdm_lustre:variableDeclaration>
          <vdm_lustre:name>LS2PosEst_dir</vdm_lustre:name>
          <vdm_lustre:dataType>
            <vdm_data:userDefinedType>Direction</vdm_data:userDefinedType>
          </vdm_lustre:dataType>
        </vdm_lustre:variableDeclaration>
        <vdm_lustre:variableDeclaration>
          <vdm_lustre:name>gps_dir</vdm_lustre:name>
          <vdm_lustre:dataType>
            <vdm_data:userDefinedType>Direction</vdm_data:userDefinedType>
          </vdm_lustre:dataType>
        </vdm_lustre:variableDeclaration>
        <vdm_lustre:variableDeclaration>
          <vdm_lustre:name>dme_vor_dir</vdm_lustre:name>
          <vdm_lustre:dataType>
            <vdm_data:userDefinedType>Direction</vdm_data:userDefinedType>
          </vdm_lustre:dataType>
        </vdm_lustre:variableDeclaration>
        <vdm_lustre:variableDeclaration>
          <vdm_lustre:name>iru_dir</vdm_lustre:name>
          <vdm_lustre:dataType>
            <vdm_data:userDefinedType>Direction</vdm_data:userDefinedType>
          </vdm_lustre:dataType>
        </vdm_lustre:variableDeclaration>
        <vdm_lustre:variableDeclaration>
          <vdm_lustre:name>moveNav</vdm_lustre:name>
          <vdm_lustre:dataType>
            <vdm_data:userDefinedType>Movement</vdm_data:userDefinedType>
          </vdm_lustre:dataType>
        </vdm_lustre:variableDeclaration>
        <vdm_lustre:variableDeclaration>
          <vdm_lustre:name>moveRC</vdm_lustre:name>
          <vdm_lustre:dataType>
            <vdm_data:userDefinedType>Movement</vdm_data:userDefinedType>
          </vdm_lustre:dataType>
        </vdm_lustre:variableDeclaration>
        <vdm_lustre:variableDeclaration>
          <vdm_lustre:name>ATE6</vdm_lustre:name>
          <vdm_lustre:dataType>
            <vdm_data:userDefinedType>ATE6Type</vdm_data:userDefinedType>
          </vdm_lustre:dataType>
        </vdm_lustre:variableDeclaration>
        <vdm_lustre:variableDeclaration>
          <vdm_lustre:name>ATE7</vdm_lustre:name>
          <vdm_lustre:dataType>
            <vdm_data:userDefinedType>ATE7Type</vdm_data:userDefinedType>
          </vdm_lustre:dataType>
        </vdm_lustre:variableDeclaration>
        <vdm_lustre:variableDeclaration>
          <vdm_lustre:name>uavMode</vdm_lustre:name>
          <vdm_lustre:dataType>
            <vdm_data:userDefinedType>UAVState</vdm_data:userDefinedType>
          </vdm_lustre:dataType>
        </vdm_lustre:variableDeclaration>
        <vdm_lustre:variableDeclaration>
          <vdm_lustre:name>normal</vdm_lustre:name>
          <vdm_lustre:dataType>
            <vdm_data:plainType>bool</vdm_data:plainType>
          </vdm_lustre:dataType>
        </vdm_lustre:variableDeclaration>
        <vdm_lustre:variableDeclaration>
          <vdm_lustre:name>dest_reached</vdm_lustre:name>
          <vdm_lustre:dataType>
            <vdm_data:plainType>bool</vdm_data:plainType>
          </vdm_lustre:dataType>
        </vdm_lustre:variableDeclaration>
        <vdm_lustre:variableDeclaration>
          <vdm_lustre:name>waypoint</vdm_lustre:name>
          <vdm_lustre:dataType>
            <vdm_data:userDefinedType>Position</vdm_data:userDefinedType>
          </vdm_lustre:dataType>
        </vdm_lustre:variableDeclaration>
        <vdm_lustre:variableDeclaration>
          <vdm_lustre:name>battery_level</vdm_lustre:name>
          <vdm_lustre:dataType>
            <vdm_data:plainType>int</vdm_data:plainType>
          </vdm_lustre:dataType>
        </vdm_lustre:variableDeclaration>
        <vdm_lustre:variableDeclaration>
          <vdm_lustre:name>gps2PosEst_pos</vdm_lustre:name>
          <vdm_lustre:dataType>
            <vdm_data:userDefinedType>Position</vdm_data:userDefinedType>
          </vdm_lustre:dataType>
        </vdm_lustre:variableDeclaration>
        <vdm_lustre:variableDeclaration>
          <vdm_lustre:name>LS2PosEst_pos</vdm_lustre:name>
          <vdm_lustre:dataType>
            <vdm_data:userDefinedType>Position</vdm_data:userDefinedType>
          </vdm_lustre:dataType>
        </vdm_lustre:variableDeclaration>
        <vdm_lustre:variableDeclaration>
          <vdm_lustre:name>payloadCmdRC</vdm_lustre:name>
          <vdm_lustre:dataType>
            <vdm_data:userDefinedType>Action</vdm_data:userDefinedType>
          </vdm_lustre:dataType>
        </vdm_lustre:variableDeclaration>
        <vdm_lustre:variableDeclaration>
          <vdm_lustre:name>ROC2Rcv_move</vdm_lustre:name>
          <vdm_lustre:dataType>
            <vdm_data:userDefinedType>Movement</vdm_data:userDefinedType>
          </vdm_lustre:dataType>
        </vdm_lustre:variableDeclaration>
        <vdm_lustre:variableDeclaration>
          <vdm_lustre:name>Nav2Mix_move</vdm_lustre:name>
          <vdm_lustre:dataType>
            <vdm_data:userDefinedType>Movement</vdm_data:userDefinedType>
          </vdm_lustre:dataType>
        </vdm_lustre:variableDeclaration>
        <vdm_lustre:variableDeclaration>
          <vdm_lustre:name>filtered_move</vdm_lustre:name>
          <vdm_lustre:dataType>
            <vdm_data:userDefinedType>Movement</vdm_data:userDefinedType>
          </vdm_lustre:dataType>
        </vdm_lustre:variableDeclaration>
        <vdm_lustre:equation>
          <vdm_lustre:lhs>
            <vdm_lustre:identifier>gps_pos</vdm_lustre:identifier>
            <vdm_lustre:identifier>gps_dir</vdm_lustre:identifier>
          </vdm_lustre:lhs>
          <vdm_lustre:rhs>
            <vdm_lustre:call vdm_lustre:nodeId="GPS">
              <vdm_lustre:argument>
                <vdm_lustre:identifier>location_source_pos</vdm_lustre:identifier>
              </vdm_lustre:argument>
              <vdm_lustre:argument>
                <vdm_lustre:identifier>location_source_dir</vdm_lustre:identifier>
              </vdm_lustre:argument>
            </vdm_lustre:call>
          </vdm_lustre:rhs>
        </vdm_lustre:equation>
        <vdm_lustre:equation>
          <vdm_lustre:lhs>
            <vdm_lustre:identifier>dme_vor_pos</vdm_lustre:identifier>
            <vdm_lustre:identifier>dme_vor_dir</vdm_lustre:identifier>
          </vdm_lustre:lhs>
          <vdm_lustre:rhs>
            <vdm_lustre:call vdm_lustre:nodeId="DME_VOR">
              <vdm_lustre:argument>
                <vdm_lustre:identifier>location_source_pos</vdm_lustre:identifier>
              </vdm_lustre:argument>
              <vdm_lustre:argument>
                <vdm_lustre:identifier>location_source_dir</vdm_lustre:identifier>
              </vdm_lustre:argument>
            </vdm_lustre:call>
          </vdm_lustre:rhs>
        </vdm_lustre:equation>
        <vdm_lustre:equation>
          <vdm_lustre:lhs>
            <vdm_lustre:identifier>iru_pos</vdm_lustre:identifier>
            <vdm_lustre:identifier>iru_dir</vdm_lustre:identifier>
          </vdm_lustre:lhs>
          <vdm_lustre:rhs>
            <vdm_lustre:call vdm_lustre:nodeId="IRU">
              <vdm_lustre:argument>
                <vdm_lustre:identifier>location_source_pos</vdm_lustre:identifier>
              </vdm_lustre:argument>
              <vdm_lustre:argument>
                <vdm_lustre:identifier>location_source_dir</vdm_lustre:identifier>
              </vdm_lustre:argument>
            </vdm_lustre:call>
          </vdm_lustre:rhs>
        </vdm_lustre:equation>
        <vdm_lustre:equation>
          <vdm_lustre:lhs>
            <vdm_lustre:identifier>gps2PosEst_pos</vdm_lustre:identifier>
          </vdm_lustre:lhs>
          <vdm_lustre:rhs>
            <vdm_lustre:call
              vdm_lustre:nodeId="Channel_GPS2PosEst">
              <vdm_lustre:argument>
                <vdm_lustre:identifier>is_instrumented</vdm_lustre:identifier>
              </vdm_lustre:argument>
              <vdm_lustre:argument>
                <vdm_lustre:identifier>gps_pos</vdm_lustre:identifier>
              </vdm_lustre:argument>
            </vdm_lustre:call>
          </vdm_lustre:rhs>
        </vdm_lustre:equation>
        <vdm_lustre:equation>
          <vdm_lustre:lhs>
            <vdm_lustre:identifier>LS2PosEst_pos</vdm_lustre:identifier>
            <vdm_lustre:identifier>LS2PosEst_dir</vdm_lustre:identifier>
          </vdm_lustre:lhs>
          <vdm_lustre:rhs>
            <vdm_lustre:call vdm_lustre:nodeId="TriplexVoter">
              <vdm_lustre:argument>
                <vdm_lustre:identifier>gps2PosEst_pos</vdm_lustre:identifier>
              </vdm_lustre:argument>
              <vdm_lustre:argument>
                <vdm_lustre:identifier>dme_vor_pos</vdm_lustre:identifier>
              </vdm_lustre:argument>
              <vdm_lustre:argument>
                <vdm_lustre:identifier>iru_pos</vdm_lustre:identifier>
              </vdm_lustre:argument>
              <vdm_lustre:argument>
                <vdm_lustre:identifier>gps_dir</vdm_lustre:identifier>
              </vdm_lustre:argument>
              <vdm_lustre:argument>
                <vdm_lustre:identifier>dme_vor_dir</vdm_lustre:identifier>
              </vdm_lustre:argument>
              <vdm_lustre:argument>
                <vdm_lustre:identifier>iru_dir</vdm_lustre:identifier>
              </vdm_lustre:argument>
            </vdm_lustre:call>
          </vdm_lustre:rhs>
        </vdm_lustre:equation>
        <vdm_lustre:equation>
          <vdm_lustre:lhs>
            <vdm_lustre:identifier>currentPos</vdm_lustre:identifier>
            <vdm_lustre:identifier>currentDir</vdm_lustre:identifier>
          </vdm_lustre:lhs>
          <vdm_lustre:rhs>
            <vdm_lustre:call
              vdm_lustre:nodeId="PositionEstimator">
              <vdm_lustre:argument>
                <vdm_lustre:identifier>LS2PosEst_pos</vdm_lustre:identifier>
              </vdm_lustre:argument>
              <vdm_lustre:argument>
                <vdm_lustre:identifier>LS2PosEst_dir</vdm_lustre:identifier>
              </vdm_lustre:argument>
            </vdm_lustre:call>
          </vdm_lustre:rhs>
        </vdm_lustre:equation>
        <vdm_lustre:equation>
          <vdm_lustre:lhs>
            <vdm_lustre:identifier>moveNav</vdm_lustre:identifier>
            <vdm_lustre:identifier>dest_reached</vdm_lustre:identifier>
          </vdm_lustre:lhs>
          <vdm_lustre:rhs>
            <vdm_lustre:call vdm_lustre:nodeId="Navigator">
              <vdm_lustre:argument>
                <vdm_lustre:identifier>currentPos</vdm_lustre:identifier>
              </vdm_lustre:argument>
              <vdm_lustre:argument>
                <vdm_lustre:identifier>waypoint</vdm_lustre:identifier>
              </vdm_lustre:argument>
              <vdm_lustre:argument>
                <vdm_lustre:identifier>currentDir</vdm_lustre:identifier>
              </vdm_lustre:argument>
            </vdm_lustre:call>
          </vdm_lustre:rhs>
        </vdm_lustre:equation>
        <vdm_lustre:equation>
          <vdm_lustre:lhs>
            <vdm_lustre:identifier>tasks</vdm_lustre:identifier>
          </vdm_lustre:lhs>
          <vdm_lustre:rhs>
            <vdm_lustre:call
              vdm_lustre:nodeId="MissionPlanner" />
          </vdm_lustre:rhs>
        </vdm_lustre:equation>
        <vdm_lustre:equation>
          <vdm_lustre:lhs>
            <vdm_lustre:identifier>payloadCmdFC</vdm_lustre:identifier>
            <vdm_lustre:identifier>waypoint</vdm_lustre:identifier>
          </vdm_lustre:lhs>
          <vdm_lustre:rhs>
            <vdm_lustre:call
              vdm_lustre:nodeId="FlightController">
              <vdm_lustre:argument>
                <vdm_lustre:identifier>dest_reached</vdm_lustre:identifier>
              </vdm_lustre:argument>
              <vdm_lustre:argument>
                <vdm_lustre:identifier>payload_performed</vdm_lustre:identifier>
              </vdm_lustre:argument>
              <vdm_lustre:argument>
                <vdm_lustre:identifier>tasks</vdm_lustre:identifier>
              </vdm_lustre:argument>
              <vdm_lustre:argument>
                <vdm_lustre:identifier>mstate</vdm_lustre:identifier>
              </vdm_lustre:argument>
            </vdm_lustre:call>
          </vdm_lustre:rhs>
        </vdm_lustre:equation>
        <vdm_lustre:equation>
          <vdm_lustre:lhs>
            <vdm_lustre:identifier>ROC2Rcv_payloadCMD</vdm_lustre:identifier>
            <vdm_lustre:identifier>ROC2Rcv_move</vdm_lustre:identifier>
          </vdm_lustre:lhs>
          <vdm_lustre:rhs>
            <vdm_lustre:call
              vdm_lustre:nodeId="Encrypted_Channel_ROC2Rcv">
              <vdm_lustre:argument>
                <vdm_lustre:identifier>is_instrumented</vdm_lustre:identifier>
              </vdm_lustre:argument>
              <vdm_lustre:argument>
                <vdm_lustre:identifier>rcv_payloadCMD</vdm_lustre:identifier>
              </vdm_lustre:argument>
              <vdm_lustre:argument>
                <vdm_lustre:identifier>rcv_move</vdm_lustre:identifier>
              </vdm_lustre:argument>
            </vdm_lustre:call>
          </vdm_lustre:rhs>
        </vdm_lustre:equation>
        <vdm_lustre:equation>
          <vdm_lustre:lhs>
            <vdm_lustre:identifier>normal</vdm_lustre:identifier>
            <vdm_lustre:identifier>payloadCmdRC</vdm_lustre:identifier>
            <vdm_lustre:identifier>moveRC</vdm_lustre:identifier>
            <vdm_lustre:identifier>uavMode</vdm_lustre:identifier>
          </vdm_lustre:lhs>
          <vdm_lustre:rhs>
            <vdm_lustre:call vdm_lustre:nodeId="RCReceiver">
              <vdm_lustre:argument>
                <vdm_lustre:identifier>ROC2Rcv_payloadCMD</vdm_lustre:identifier>
              </vdm_lustre:argument>
              <vdm_lustre:argument>
                <vdm_lustre:identifier>ROC2Rcv_move</vdm_lustre:identifier>
              </vdm_lustre:argument>
              <vdm_lustre:argument>
                <vdm_lustre:identifier>rcv_uavMode</vdm_lustre:identifier>
              </vdm_lustre:argument>
            </vdm_lustre:call>
          </vdm_lustre:rhs>
        </vdm_lustre:equation>
        <vdm_lustre:equation>
          <vdm_lustre:lhs>
            <vdm_lustre:identifier>Nav2Mix_move</vdm_lustre:identifier>
          </vdm_lustre:lhs>
          <vdm_lustre:rhs>
            <vdm_lustre:call
              vdm_lustre:nodeId="Channel_Nav2Mix">
              <vdm_lustre:argument>
                <vdm_lustre:identifier>is_instrumented</vdm_lustre:identifier>
              </vdm_lustre:argument>
              <vdm_lustre:argument>
                <vdm_lustre:identifier>moveNav</vdm_lustre:identifier>
              </vdm_lustre:argument>
            </vdm_lustre:call>
          </vdm_lustre:rhs>
        </vdm_lustre:equation>
        <vdm_lustre:equation>
          <vdm_lustre:lhs>
            <vdm_lustre:identifier>filtered_move</vdm_lustre:identifier>
          </vdm_lustre:lhs>
          <vdm_lustre:rhs>
            <vdm_lustre:call
              vdm_lustre:nodeId="NavigatorFilter">
              <vdm_lustre:argument>
                <vdm_lustre:identifier>moveNav</vdm_lustre:identifier>
              </vdm_lustre:argument>
              <vdm_lustre:argument>
                <vdm_lustre:identifier>Nav2Mix_move</vdm_lustre:identifier>
              </vdm_lustre:argument>
            </vdm_lustre:call>
          </vdm_lustre:rhs>
        </vdm_lustre:equation>
        <vdm_lustre:equation>
          <vdm_lustre:lhs>
            <vdm_lustre:identifier>cmd</vdm_lustre:identifier>
          </vdm_lustre:lhs>
          <vdm_lustre:rhs>
            <vdm_lustre:call vdm_lustre:nodeId="Mixer">
              <vdm_lustre:argument>
                <vdm_lustre:identifier>mstate</vdm_lustre:identifier>
              </vdm_lustre:argument>
              <vdm_lustre:argument>
                <vdm_lustre:identifier>moveRC</vdm_lustre:identifier>
              </vdm_lustre:argument>
              <vdm_lustre:argument>
                <vdm_lustre:identifier>filtered_move</vdm_lustre:identifier>
              </vdm_lustre:argument>
              <vdm_lustre:argument>
                <vdm_lustre:identifier>currentDir</vdm_lustre:identifier>
              </vdm_lustre:argument>
            </vdm_lustre:call>
          </vdm_lustre:rhs>
        </vdm_lustre:equation>
        <vdm_lustre:equation>
          <vdm_lustre:lhs>
            <vdm_lustre:identifier>battery_level</vdm_lustre:identifier>
            <vdm_lustre:identifier>payload_performed</vdm_lustre:identifier>
          </vdm_lustre:lhs>
          <vdm_lustre:rhs>
            <vdm_lustre:call vdm_lustre:nodeId="Actuators">
              <vdm_lustre:argument>
                <vdm_lustre:identifier>cmd</vdm_lustre:identifier>
              </vdm_lustre:argument>
              <vdm_lustre:argument>
                <vdm_lustre:identifier>payloadCmdFC</vdm_lustre:identifier>
              </vdm_lustre:argument>
              <vdm_lustre:argument>
                <vdm_lustre:identifier>mstate</vdm_lustre:identifier>
              </vdm_lustre:argument>
              <vdm_lustre:argument>
                <vdm_lustre:identifier>payloadCmdRC</vdm_lustre:identifier>
              </vdm_lustre:argument>
            </vdm_lustre:call>
          </vdm_lustre:rhs>
        </vdm_lustre:equation>
        <vdm_lustre:equation>
          <vdm_lustre:lhs>
            <vdm_lustre:identifier>ATE6</vdm_lustre:identifier>
          </vdm_lustre:lhs>
          <vdm_lustre:rhs>
            <vdm_lustre:call
              vdm_lustre:nodeId="RCReceiverHealthCheck">
              <vdm_lustre:argument>
                <vdm_lustre:identifier>normal</vdm_lustre:identifier>
              </vdm_lustre:argument>
            </vdm_lustre:call>
          </vdm_lustre:rhs>
        </vdm_lustre:equation>
        <vdm_lustre:equation>
          <vdm_lustre:lhs>
            <vdm_lustre:identifier>ATE7</vdm_lustre:identifier>
          </vdm_lustre:lhs>
          <vdm_lustre:rhs>
            <vdm_lustre:call
              vdm_lustre:nodeId="BatteryHealthCheck">
              <vdm_lustre:argument>
                <vdm_lustre:identifier>battery_level</vdm_lustre:identifier>
              </vdm_lustre:argument>
            </vdm_lustre:call>
          </vdm_lustre:rhs>
        </vdm_lustre:equation>
        <vdm_lustre:equation>
          <vdm_lustre:lhs>
            <vdm_lustre:identifier>mstate</vdm_lustre:identifier>
          </vdm_lustre:lhs>
          <vdm_lustre:rhs>
            <vdm_lustre:call
              vdm_lustre:nodeId="StateController">
              <vdm_lustre:argument>
                <vdm_lustre:identifier>ATE6</vdm_lustre:identifier>
              </vdm_lustre:argument>
              <vdm_lustre:argument>
                <vdm_lustre:identifier>ATE7</vdm_lustre:identifier>
              </vdm_lustre:argument>
              <vdm_lustre:argument>
                <vdm_lustre:identifier>uavMode</vdm_lustre:identifier>
              </vdm_lustre:argument>
            </vdm_lustre:call>
          </vdm_lustre:rhs>
        </vdm_lustre:equation>
      </vdm_lustre:body>
    </vdm_lustre:nodeDeclaration>
    <vdm_lustre:nodeDeclaration>
      <vdm_lustre:name>Scenario1</vdm_lustre:name>
      <vdm_lustre:inputParameter>
        <vdm_lustre:name>is_instrumented</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>ComponentInstrumentation</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:inputParameter>
      <vdm_lustre:outputParameter>
        <vdm_lustre:name>pos</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>Position</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:outputParameter>
      <vdm_lustre:outputParameter>
        <vdm_lustre:name>dir</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>Direction</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:outputParameter>
      <vdm_lustre:outputParameter>
        <vdm_lustre:name>cmd</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>MotorCommand</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:outputParameter>
      <vdm_lustre:outputParameter>
        <vdm_lustre:name>currentPos</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>Position</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:outputParameter>
      <vdm_lustre:outputParameter>
        <vdm_lustre:name>payloadCmdFC</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>Action</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:outputParameter>
      <vdm_lustre:outputParameter>
        <vdm_lustre:name>payloadCmdRC</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>Action</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:outputParameter>
      <vdm_lustre:outputParameter>
        <vdm_lustre:name>mstate</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>UAVState</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:outputParameter>
      <vdm_lustre:outputParameter>
        <vdm_lustre:name>tasks</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:userDefinedType>Tasks</vdm_data:userDefinedType>
        </vdm_lustre:dataType>
      </vdm_lustre:outputParameter>
      <vdm_lustre:outputParameter>
        <vdm_lustre:name>payload_performed</vdm_lustre:name>
        <vdm_lustre:dataType>
          <vdm_data:plainType>bool</vdm_data:plainType>
        </vdm_lustre:dataType>
      </vdm_lustre:outputParameter>
      <vdm_lustre:body>
        <vdm_lustre:variableDeclaration>
          <vdm_lustre:name>payloadCMD</vdm_lustre:name>
          <vdm_lustre:dataType>
            <vdm_data:userDefinedType>Action</vdm_data:userDefinedType>
          </vdm_lustre:dataType>
        </vdm_lustre:variableDeclaration>
        <vdm_lustre:variableDeclaration>
          <vdm_lustre:name>move</vdm_lustre:name>
          <vdm_lustre:dataType>
            <vdm_data:userDefinedType>Movement</vdm_data:userDefinedType>
          </vdm_lustre:dataType>
        </vdm_lustre:variableDeclaration>
        <vdm_lustre:variableDeclaration>
          <vdm_lustre:name>uavMode</vdm_lustre:name>
          <vdm_lustre:dataType>
            <vdm_data:userDefinedType>UAVState</vdm_data:userDefinedType>
          </vdm_lustre:dataType>
        </vdm_lustre:variableDeclaration>
        <vdm_lustre:equation>
          <vdm_lustre:lhs>
            <vdm_lustre:identifier>pos</vdm_lustre:identifier>
            <vdm_lustre:identifier>dir</vdm_lustre:identifier>
          </vdm_lustre:lhs>
          <vdm_lustre:rhs>
            <vdm_lustre:call
              vdm_lustre:nodeId="LocationSource">
              <vdm_lustre:argument>
                <vdm_lustre:identifier>cmd</vdm_lustre:identifier>
              </vdm_lustre:argument>
            </vdm_lustre:call>
          </vdm_lustre:rhs>
        </vdm_lustre:equation>
        <vdm_lustre:equation>
          <vdm_lustre:lhs>
            <vdm_lustre:identifier>payloadCMD</vdm_lustre:identifier>
            <vdm_lustre:identifier>move</vdm_lustre:identifier>
            <vdm_lustre:identifier>uavMode</vdm_lustre:identifier>
          </vdm_lustre:lhs>
          <vdm_lustre:rhs>
            <vdm_lustre:call
              vdm_lustre:nodeId="RemoteOperatorController" />
          </vdm_lustre:rhs>
        </vdm_lustre:equation>
        <vdm_lustre:equation>
          <vdm_lustre:lhs>
            <vdm_lustre:identifier>cmd</vdm_lustre:identifier>
            <vdm_lustre:identifier>currentPos</vdm_lustre:identifier>
            <vdm_lustre:identifier>payloadCmdFC</vdm_lustre:identifier>
            <vdm_lustre:identifier>payloadCmdRC</vdm_lustre:identifier>
            <vdm_lustre:identifier>mstate</vdm_lustre:identifier>
            <vdm_lustre:identifier>tasks</vdm_lustre:identifier>
            <vdm_lustre:identifier>payload_performed</vdm_lustre:identifier>
          </vdm_lustre:lhs>
          <vdm_lustre:rhs>
            <vdm_lustre:call vdm_lustre:nodeId="UAVSystem">
              <vdm_lustre:argument>
                <vdm_lustre:identifier>pos</vdm_lustre:identifier>
              </vdm_lustre:argument>
              <vdm_lustre:argument>
                <vdm_lustre:identifier>dir</vdm_lustre:identifier>
              </vdm_lustre:argument>
              <vdm_lustre:argument>
                <vdm_lustre:identifier>payloadCMD</vdm_lustre:identifier>
              </vdm_lustre:argument>
              <vdm_lustre:argument>
                <vdm_lustre:identifier>move</vdm_lustre:identifier>
              </vdm_lustre:argument>
              <vdm_lustre:argument>
                <vdm_lustre:identifier>uavMode</vdm_lustre:identifier>
              </vdm_lustre:argument>
              <vdm_lustre:argument>
                <vdm_lustre:identifier>is_instrumented</vdm_lustre:identifier>
              </vdm_lustre:argument>
            </vdm_lustre:call>
          </vdm_lustre:rhs>
        </vdm_lustre:equation>
      </vdm_lustre:body>
    </vdm_lustre:nodeDeclaration>
  </dataflowCode>
</vdm_model:model>
